{"version":3,"file":"serviceWorker.min.js","mappings":"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","sources":["webpack://yetanotherforum-net/webpack/bootstrap","webpack://yetanotherforum-net/webpack/runtime/make namespace object","webpack://yetanotherforum-net/./wwwroot/lib/serviceWorker.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/// <reference lib=\"WebWorker\" />\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n// Service Worker for PWA\n// Update 'version' if you need to refresh the cache\nvar CACHE_NAME = '{version}';\nvar offlineUrl = '{offlineRoute}';\n// Install event\nself.addEventListener('install', (event) => {\n    event.waitUntil(caches.open(CACHE_NAME).then((cache) => {\n        // @ts-ignore\n        return cache.addAll([offlineUrl, { routes }]);\n    }));\n    self.skipWaiting();\n});\n// Activate event\nself.addEventListener('activate', (event) => {\n    event.waitUntil(caches.keys().then((cacheNames) => {\n        return Promise.all(cacheNames.map((cacheName) => {\n            if (cacheName !== CACHE_NAME) {\n                return caches.delete(cacheName);\n            }\n        }));\n    }));\n    self.clients.claim();\n});\n// Fetch event - Network first, then fallback to cache\nself.addEventListener('fetch', (event) => {\n    const { request } = event;\n    // Skip non-GET requests\n    if (request.method !== 'GET') {\n        return;\n    }\n    event.respondWith(fetch(request)\n        .then((response) => {\n        // Cache successful responses\n        if (response && response.status === 200 && /^https?:$/i.test(new URL(request.url).protocol)) {\n            const responseClone = response.clone();\n            caches.open(CACHE_NAME).then((cache) => {\n                cache.put(request, responseClone);\n            });\n        }\n        return response;\n    })\n        .catch(() => offlineFallback(request)));\n});\nfunction offlineFallback(request) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var cached = yield caches.match(offlineUrl);\n        if (!cached) {\n            cached = new Response('Oops! - You\\'re offline - Please check your internet connection.', {\n                status: 503,\n                statusText: 'Service Unavailable',\n                headers: new Headers({\n                    'Content-Type': 'text/plain'\n                })\n            });\n        }\n        // Fallback to cache on network failure\n        return caches.match(request).then((response) => {\n            return response || cached;\n        });\n    });\n}\n// Handle push notifications\nself.addEventListener('push', (event) => {\n    if (!event.data) {\n        return;\n    }\n    const data = event.data.json();\n    const unreadCount = data.unreadCount;\n    // Set or clear the badge.\n    if (navigator.setAppBadge) {\n        if (unreadCount && unreadCount > 0) {\n            navigator.setAppBadge(unreadCount);\n        }\n        else {\n            navigator.clearAppBadge();\n        }\n    }\n    // Parse push event data if available\n    const notification = {\n        title: data.title,\n        body: data.body,\n        icon: data.icon,\n        badge: data.badge,\n        image: data.image,\n        // @ts-ignore\n        vibrate: [200, 100, 200],\n        tag: `push-notification-${Date.now()}`,\n        requireInteraction: true,\n        silent: false,\n        actions: [\n            {\n                action: data.data.url, title: data.data.action\n            },\n            {\n                action: 'close', title: data.data.close\n            }\n        ]\n    };\n    event.waitUntil(self.registration.showNotification(data.title, notification));\n});\n// Handle notification clicks\nself.addEventListener('notificationclick', (event) => {\n    const action = event.action;\n    event.notification.close();\n    event.waitUntil(\n    // @ts-ignore\n    clients.matchAll({ type: 'window', includeUncontrolled: true }).then((clientList) => {\n        // Check if app window already exists\n        for (let i = 0; i < clientList.length; i++) {\n            const client = clientList[i];\n            if (client.url === '/' && 'focus' in client) {\n                return client.focus();\n            }\n        }\n        // If not, open new window\n        // @ts-ignore\n        if (clients.openWindow) {\n            if (action && action !== 'close') {\n                // @ts-ignore\n                return clients.openWindow(action);\n            }\n            ;\n        }\n    }));\n});\n// Handle notification close\nself.addEventListener('notificationclose', (event) => {\n});\nexport {};\n"],"names":["__webpack_require__","exports","Symbol","toStringTag","Object","defineProperty","value","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","CACHE_NAME","offlineUrl","self","addEventListener","event","waitUntil","caches","open","cache","addAll","routes","skipWaiting","keys","cacheNames","all","map","cacheName","delete","clients","claim","request","method","respondWith","fetch","response","status","test","URL","url","protocol","responseClone","clone","put","catch","this","cached","match","Response","statusText","headers","Headers","offlineFallback","data","json","unreadCount","navigator","setAppBadge","clearAppBadge","notification","title","body","icon","badge","image","vibrate","tag","Date","now","requireInteraction","silent","actions","action","close","registration","showNotification","matchAll","type","includeUncontrolled","clientList","i","length","client","focus","openWindow"],"ignoreList":[],"sourceRoot":""}