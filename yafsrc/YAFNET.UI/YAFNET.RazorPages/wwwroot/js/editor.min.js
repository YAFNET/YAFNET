/*! Yet Another Forum.NET v4.0.4 | © Ingo Herbote | https://www.yetanotherforum.net/ */

(()=>{"use strict";var __webpack_modules__={"./node_modules/@w8tcha/bootbox/dist/bootbox.js"(e,t,o){o.r(t),o.d(t,{VERSION:()=>l,addLocale:()=>b,alert:()=>k,confirm:()=>w,dialog:()=>y,getAllLocales:()=>p,getLocale:()=>d,hideAll:()=>v,init:()=>g,prompt:()=>C,removeLocale:()=>m,setDefaults:()=>h,setLocale:()=>f});var n=o("bootstrap");function r(e){return/([01][0-9]|2[0-3]):[0-5][0-9]?:[0-5][0-9]/.test(e)}function a(e){return/(\d{4})-(\d{2})-(\d{2})/.test(e)}function i(e,t){if("string"==typeof t&&"function"==typeof e[t])e[t]();else{const o="string"==typeof t?new Event(t,{bubbles:!0}):t;e.dispatchEvent(o)}}const l="6.0.6",s={ar:{OK:"موافق",CANCEL:"الغاء",CONFIRM:"تأكيد"},az:{OK:"OK",CANCEL:"İmtina et",CONFIRM:"Təsdiq et"},bgBG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},eu:{OK:"OK",CANCEL:"Ezeztatu",CONFIRM:"Onartu"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"Confirmer"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"OK"},ka:{OK:"OK",CANCEL:"გაუქმება",CONFIRM:"დადასტურება"},ko:{OK:"OK",CANCEL:"취소",CONFIRM:"확인"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ptBR:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sk:{OK:"OK",CANCEL:"Zrušiť",CONFIRM:"Potvrdiť"},sl:{OK:"OK",CANCEL:"Prekliči",CONFIRM:"Potrdi"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},sw:{OK:"Sawa",CANCEL:"Ghairi",CONFIRM:"Thibitisha"},ta:{OK:"சரி",CANCEL:"ரத்து செய்",CONFIRM:"உறுதி செய்"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},uk:{OK:"OK",CANCEL:"Відміна",CONFIRM:"Прийняти"},vi:{OK:"OK",CANCEL:"Hủy bỏ",CONFIRM:"Xác nhận"},zhCN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zhTW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}},c={dialog:'<div class="bootbox modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="bootbox-body"></div></div></div></div></div>',header:'<div class="modal-header"><h5 class="modal-title"></h5></div>',footer:'<div class="modal-footer"></div>',closeButton:'<button type="button" class="bootbox-close-button close btn-close" aria-label="Close"></button>',form:'<form class="bootbox-form"></form>',button:'<button type="button" class="btn"></button>',option:'<option value=""></option>',promptMessage:'<div class="bootbox-prompt-message"></div>',inputs:{text:'<input class="bootbox-input bootbox-input-text form-control" autocomplete="off" type="text" />',textarea:'<textarea class="bootbox-input bootbox-input-textarea form-control"></textarea>',email:'<input class="bootbox-input bootbox-input-email form-control" autocomplete="off" type="email" />',select:'<select class="bootbox-input bootbox-input-select form-select"></select>',checkbox:'<div class="form-check checkbox"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-checkbox" type="checkbox" /></label></div>',radio:'<div class="form-check radio"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-radio" type="radio" name="bootbox-radio" /></label></div>',date:'<input class="bootbox-input bootbox-input-date form-control" autocomplete="off" type="date" />',time:'<input class="bootbox-input bootbox-input-time form-control" autocomplete="off" type="time" />',number:'<input class="bootbox-input bootbox-input-number form-control" autocomplete="off" type="number" />',password:'<input class="bootbox-input bootbox-input-password form-control" autocomplete="off" type="password" />',range:'<input class="bootbox-input bootbox-input-range form-control-range" autocomplete="off" type="range" />'}},u={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body",value:"",inputType:"text",errorMessage:null,swapButtonOrder:!1,centerVertical:!1,multiple:!1,scrollable:!1,reusable:!1,relatedTarget:null,size:null,id:null};function d(e){return s[e]}function p(){return s}function b(e,t){["OK","CANCEL","CONFIRM"].forEach(((e,o)=>{if(!t[e])throw new Error(`Please supply a translation for "${e}"`)})),s[e]={OK:t.OK,CANCEL:t.CANCEL,CONFIRM:t.CONFIRM}}function m(e){if("en"===e)throw new Error('"en" is used as the default and fallback locale and cannot be removed.');delete s[e]}function f(e){return e&&(e=e.replace("-","")),h("locale",e)}function h(...e){let t={};2===e.length?t[e[0]]=e[1]:t=e[0],Object.assign(u,t)}function v(){document.querySelectorAll(".bootbox").forEach((e=>{const t=n.Modal.getInstance(e);t&&t.hide()}))}function g(e){return g()}function y(e){if(void 0===n.Modal)throw new Error('"bootstrap.Modal" is not defined; please double check you have included the Bootstrap JavaScript library. See https://getbootstrap.com/docs/5.3/getting-started/introduction/ for more details.');e=function(e){let t,o;if(!e.message&&!e.messageForm)throw new Error('"message" option must not be null or an empty string.');e=Object.assign({},u,e),e.backdrop?e.backdrop="string"!=typeof e.backdrop||"static"!==e.backdrop.toLowerCase()||"static":e.backdrop=!1!==e.backdrop&&0!==e.backdrop&&"static",e.buttons||(e.buttons={}),t=e.buttons,o=K(t);let n=0;for(let[r,a]of Object.entries(t)){if("function"==typeof a&&(a=t[r]={callback:a,label:"",className:""}),"object"!==Object.prototype.toString.call(a).replace(/^\[object (.+)\]$/,"$1").toLowerCase())throw new Error(`button with key "${r}" must be an object`);if(a.label||(a.label=r),!a.className){let t=!1;t=e.swapButtonOrder?0===n:n===o-1,a.className=o<=2&&t?"btn-primary":"btn-secondary"}n++}return e}(e);let t=S(c.dialog),o=t.querySelector(".modal-dialog"),r=t.querySelector(".modal-body"),a=S(c.header),l=S(c.footer),s=e.buttons;e.messageForm?r.querySelector(".bootbox-body").append(e.messageForm):"string"==typeof e.message?r.querySelector(".bootbox-body").innerHTML=e.message:r.querySelector(".bootbox-body").append(e.message);let d={};if("function"==typeof e.onEscape&&(d.onEscape=e.onEscape),K(e.buttons)>0){for(const[e,t]of Object.entries(s)){let o=S(c.button);switch(o.dataset.bbHandler=e,t.className.split(" ").forEach((e=>{o.classList.add(e)})),e){case"ok":case"confirm":o.classList.add("bootbox-accept");break;case"cancel":o.classList.add("bootbox-cancel")}o.innerHTML=t.label,t.id&&o.setAttribute("id",t.id),!0===t.disabled&&(o.disabled=!0),l.append(o),"function"==typeof t.callback&&(d[e]=t.callback)}r.after(l)}if(!0===e.animate&&t.classList.add("fade"),e.className&&e.className.split(" ").forEach((e=>{t.classList.add(e)})),e.id&&t.setAttribute("id",e.id),e.size)switch(e.size){case"small":case"sm":o.classList.add("modal-sm");break;case"large":case"lg":o.classList.add("modal-lg");break;case"extra-large":case"xl":o.classList.add("modal-xl")}if(e.scrollable&&o.classList.add("modal-dialog-scrollable"),e.title||e.closeButton){if(e.title?a.querySelector(".modal-title").innerHTML=e.title:a.classList.add("border-0"),e.closeButton){let e=S(c.closeButton);a.append(e)}r.before(a)}if(e.centerVertical&&o.classList.add("modal-dialog-centered"),e.reusable||(t.addEventListener("hide.bs.modal",(e=>{e.target===t&&(t.removeEventListener("escape.close.bb",(()=>{})),t.removeEventListener("click",(()=>{})))}),{once:!0}),t.addEventListener("hidden.bs.modal",(e=>{e.target===t&&t.remove()}),{once:!0})),e.onHide){if("function"!=typeof e.onHide)throw new Error('Argument supplied to "onHide" must be a function');t.addEventListener("hide.bs.modal",e.onHide)}if(e.onHidden){if("function"!=typeof e.onHidden)throw new Error('Argument supplied to "onHidden" must be a function');t.addEventListener("hidden.bs.modal",e.onHidden)}if(e.onShow){if("function"!=typeof e.onShow)throw new Error('Argument supplied to "onShow" must be a function');q(t,"show.bs.modal",e.onShow)}if(t.addEventListener("shown.bs.modal",A),e.onShown){if("function"!=typeof e.onShown)throw new Error('Argument supplied to "onShown" must be a function');q(t,"shown.bs.modal",e.onShown)}if(!0===e.backdrop){let e=!1;q(t,"mousedown",(t=>{t.stopPropagation(),e=!0}),".modal-content"),q(t,"click.dismiss.bs.modal",(o=>{e||o.target!==o.currentTarget||i(t,"escape.close.bb")}))}t.addEventListener("escape.close.bb",(e=>{d.onEscape&&$(e,t,d.onEscape)})),t.addEventListener("click",(e=>{if("button"===e.target.nodeName.toLowerCase()&&!e.target.classList.contains("disabled")){const o=e.target.dataset.bbHandler;void 0!==o&&$(e,t,d[o])}})),document.addEventListener("click",(e=>{e.target.closest(".bootbox-close-button")&&$(e,t,d.onEscape)})),t.addEventListener("keyup",(e=>{(27===e.which||27===e.detail.which)&&i(t,"escape.close.bb")})),"object"==typeof e.container?e.container.append(t):document.querySelector(e.container)?.append(t);const p=new n.Modal(t,{backdrop:e.backdrop,keyboard:!1});return e.show&&(e.relatedTarget?p.show(e.relatedTarget):p.show()),{_element:t,_modal:p,_options:e}}function k(...e){const t=E("alert",["ok"],["message","callback"],e);if(t.callback&&"function"!=typeof t.callback)throw new Error('alert requires the "callback" property to be a function when provided');return t.buttons.ok.callback=t.onEscape=function(){return"function"!=typeof t.callback||t.callback.call(this)},y(t)}function w(...e){let t;if(t=E("confirm",["cancel","confirm"],["message","callback"],e),"function"!=typeof t.callback)throw new Error("confirm requires a callback");let o=t.buttons.cancel,n=t.buttons.confirm;return n||(t.buttons.confirm=N("confirm",t.locale),n=t.buttons.confirm),o||(t.buttons.cancel=N("cancel",t.locale),o=t.buttons.cancel),o.callback=t.onEscape=function(){return t.callback?.call(this,null)},n.callback=function(){return t.callback?.call(this,!0)},t.buttons.cancel=o,t.buttons.confirm=n,y(t)}function C(...e){let t,o,n,l,s,d;n=S(c.form),t=E("prompt",["cancel","confirm"],["title","callback"],e),t.value||(t.value=u.value),t.inputType||(t.inputType=u.inputType),s=void 0===t.show?u.show:t.show,t.show=!1;var p=t.buttons.cancel;p||(t.buttons.cancel=N("cancel",t.locale),p=t.buttons.cancel),p.callback=t.onEscape=function(){return t.callback?.call(this,null)},t.buttons.cancel=p;var b=t.buttons.confirm;if(b||(t.buttons.confirm=N("confirm",t.locale),b=t.buttons.confirm),b.callback=function(){let e;if(n.classList.add("was-validated"),"checkbox"===t.inputType){const o=Array.from(l.querySelectorAll('input[type="checkbox"]:checked'));if(e=Array.from(o).map((e=>e.value)),!0===t.required&&0===o.length)return!1}else if("radio"===t.inputType)e=l.querySelector('input[type="radio"]:checked').value;else{let o=l;if(o.setCustomValidity(""),o.checkValidity&&!o.checkValidity())return t.errorMessage&&o.setCustomValidity(t.errorMessage),o.reportValidity&&o.reportValidity(),!1;e="select"===t.inputType&&!0===t.multiple?Array.from(l.querySelectorAll("option:checked")).map((e=>e.value)):o.value}return t.callback?.call(this,e)},t.buttons.confirm=b,!t.title)throw new Error("prompt requires a title");if("function"!=typeof t.callback)throw new Error("prompt requires a callback");var m=c.inputs;if(!m[t.inputType])throw new Error("Invalid prompt type");switch(l=S(m[t.inputType]),"textarea"!==t.inputType&&l.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),i(o.querySelector(".bootbox-accept"),"click"))})),t.inputType){case"text":case"textarea":case"email":case"password":l.value=t.value.toString(),t.placeholder&&l.setAttribute("placeholder",t.placeholder),t.pattern&&l.setAttribute("pattern",t.pattern),t.maxlength&&l.setAttribute("maxlength",t.maxlength.toString()),t.required&&(l.required=!0),"textarea"===t.inputType&&t.rows&&!isNaN(parseInt(t.rows.toString()))&&l.setAttribute("rows",t.rows.toString());break;case"date":case"time":case"number":case"range":if(l.value=t.value.toString(),t.placeholder&&l.setAttribute("placeholder",t.placeholder),t.pattern?l.setAttribute("pattern",t.pattern):"date"===t.inputType?l.setAttribute("pattern","d{4}-d{2}-d{2}"):"time"===t.inputType&&l.setAttribute("pattern","d{2}:d{2}"),t.required&&(l.required=!0),t.step)if("string"==typeof t.step&&("any"===t.step||parseFloat(t.step)>0))l.setAttribute("step",t.step);else{if("number"!=typeof t.step||isNaN(t.step)||!(t.step>0))throw new Error('"step" must be a valid positive number or the value "any". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-step for more information.');l.setAttribute("step",t.step.toString())}(function(e,t,o){let n=!1,i=!0,l=!0;if("date"===e)void 0===t||(i=a(t))?void 0!==o&&!(l=a(o))&&console.warn('Invalid "max" date format for input type "date".'):console.warn('Invalid "min" date format for input type "date".');else if("time"===e){if(void 0!==t&&!(i=r(t)))throw new Error('"min" is not a valid time.');if(void 0!==o&&!(l=r(o)))throw new Error('"max" is not a valid time.')}else{if(void 0!==t&&isNaN(Number(t)))throw i=!1,new Error('"min" must be a valid number.');if(void 0!==o&&isNaN(Number(o)))throw l=!1,new Error('"max" must be a valid number.')}if(i&&l){if("number"==typeof t&&"number"==typeof o&&o<t)throw new Error('"max" must be greater than or equal to "min".');if("string"==typeof t&&"string"==typeof o&&o<t)throw new Error('"max" must be greater than or equal to "min".');n=!0}return n})(t.inputType,t.min,t.max)&&(void 0!==t.min&&l.setAttribute("min",t.min.toString()),void 0!==t.max&&l.setAttribute("max",t.max.toString()));break;case"select":var f={};if(d=t.inputOptions||[],!Array.isArray(d))throw new Error("Please pass an array of input options");if(!d.length)throw new Error('prompt with "inputType" set to "select" requires at least one option');t.required&&(l.required=!0),t.multiple&&(l.multiple=!0);for(const[,e]of Object.entries(d)){let t=l;if(void 0===e.value||void 0===e.text)throw new Error('each option needs a "value" property and a "text" property');if(e.group){if(!f[e.group]){var h=S("<optgroup />");h.setAttribute("label",e.group),f[e.group]={Content:h}}t=f[e.group].Content}let o=S(c.option);o.setAttribute("value",e.value),o.textContent=e.text,t.append(o)}for(const[e,t]of Object.entries(f))l.append(t.Content);l.value=t.value.toString();break;case"checkbox":var v=Array.isArray(t.value)?t.value:[t.value];if(d=t.inputOptions||[],!d.length)throw new Error('prompt with "inputType" set to "checkbox" requires at least one option');l=S('<div class="bootbox-checkbox-list"></div>');for(const[e,o]of Object.entries(d)){if(void 0===o.value||void 0===o.text)throw new Error('each option needs a "value" property and a "text" property');let e=S(c.inputs[t.inputType]);e.querySelector("input")?.setAttribute("value",o.value),e.querySelector("label")?.append(`\n${o.text}`);for(const[t,n]of Object.entries(v))n===o.value&&e.querySelector("input")?.setAttribute("checked","true");l.append(e)}break;case"radio":if(void 0!==t.value&&Array.isArray(t.value))throw new Error('prompt with "inputType" set to "radio" requires a single, non-array value for "value"');if(d=t.inputOptions||[],!d.length)throw new Error('prompt with "inputType" set to "radio" requires at least one option');l=S('<div class="bootbox-radiobutton-list"></div>');var g=!0;for(const[e,o]of Object.entries(d)){if(void 0===o.value||void 0===o.text)throw new Error('each option needs a "value" property and a "text" property');let e=S(c.inputs[t.inputType]);e.querySelector("input")?.setAttribute("value",o.value),e.querySelector("label")?.append(`\n${o.text}`),void 0!==t.value&&o.value===t.value&&(e.querySelector("input").checked=!0,g=!1),l.append(e)}g&&l.querySelector('input[type="radio"]')?.setAttribute("checked","true")}if(n.append(l),n.addEventListener("submit",(e=>{e.preventDefault(),e.stopPropagation(),n.classList.remove("was-validated"),o.querySelector(".bootbox-accept")?.click()})),t.message&&""!==t.message.trim()){let e=S(c.promptMessage).innerHTML=t.message;n.prepend(e),t.messageForm=n}else t.messageForm=n;const k=y(t);o=k._element,o.removeEventListener("shown.bs.modal",A),o.addEventListener("shown.bs.modal",(()=>{l.focus()}));const w=k._modal;return!0===s&&w.show(),o}function O(...e){const t={};let o=!1,n=0;const r=e.length;"[object Boolean]"===Object.prototype.toString.call(e[0])&&(o=e[0],n++);const a=e=>{for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o&&"[object Object]"===Object.prototype.toString.call(e[n])?t[n]=O(!0,t[n],e[n]):t[n]=e[n])};for(;n<r;n++){a(e[n])}return t}function _(e,t,o){return O({},e,function(e,t){const o=e.length;let n={};if(o<1||o>2)throw new Error("Invalid argument length");return 2===o||"string"==typeof e[0]?(n[t[0]]=e[0],n[t[1]]=e[1]):n=e[0],n}(t,o))}function E(e,t,o,n){let r;n&&n[0]&&(r=n[0].locale||u.locale,(n[0].swapButtonOrder||u.swapButtonOrder)&&(t=t.reverse()));return function(e,t){const o={};for(const[e,n]of Object.entries(t))o[n]=!0;for(const[n]of Object.entries(e.buttons))if(void 0===o[n])throw new Error(`button key "${n}" is not allowed (options are ${t.join(" ")})`);return e}(_({className:`bootbox-${e}`,buttons:x(t,r),show:!0,closeButton:!0,animate:!0,locale:"en",swapButtonOrder:!1,scrollable:!1,reusable:!1,centerVertical:!1},n,o),t)}function x(e,t){const o={};for(let n=0,r=e.length;n<r;n++){const r=e[n],a=r.toLowerCase(),i=r.toUpperCase();o[a]={label:L(i,t),className:""}}return o}function N(e,t){return{label:L(e.toUpperCase(),t),className:""}}function L(e,t){const o=s[t];return o?o[e]:s.en[e]}function A(e){const t=e?.data?.dialog?.querySelector(".bootbox-accept");t&&i(t,"focus")}function K(e){return Object.keys(e).length}function $(e,t,o){e.stopPropagation(),e.preventDefault(),("function"!=typeof o||!1!==o.call(t,e))&&t&&n.Modal.getInstance(t)?.hide()}function S(e){const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.children[0]}function q(e,t,o,n){if(n){const r=e=>{if(!e.target)return;const t=e.target.closest(n);t&&o.call(t,e)};return e.addEventListener(t,r),r}{const n=t=>{o.call(e,t)};return e.addEventListener(t,n),n}}},"./wwwroot/lib/editor/autoCloseTags.ts"(e,t,o){o.r(t),o.d(t,{default:()=>n});class n{constructor(e){this.textarea=e,this.autoClosingTags=["b","i","u","h","code","img","quote","left","center","right","indent","list","color","size","albumimg","attach","youtube","vimeo","instagram","twitter","facebook","googlewidget","spoiler","userlink","googlemaps","hide","group-hide","hide-thanks","hide-reply-thanks","hide-reply","hide-posts","dailymotion","audio","media"],this.enableAutoCloseTags()}enableAutoCloseTags(){this.textarea.addEventListener("keydown",(e=>{if("]"===e.key){const e=this.textarea.selectionStart,t=this.textarea.value.substring(0,e),o=this.textarea.value.substring(this.textarea.selectionEnd);let n;try{n=t.match(/\[([^\]]+)$/)[1].match(/^([a-z1-6]+)/)[1]}catch(e){return}if(!n||!this.autoClosingTags.includes(n))return;const r=`[/${n}]`;this.textarea.value=t+r+o,this.textarea.selectionStart=this.textarea.selectionEnd=e,this.textarea.focus()}}))}}},"./wwwroot/lib/editor/mentions.ts"(__unused_webpack_module,__webpack_exports__,__webpack_require__){function Mentions(opts={}){var _a;opts=Object.assign({lookup:"lookup",id:"",selector:"",element:null,symbol:"@",items:[],item_template:'<a class="dropdown-item" href="#"><img src="${item.avatar}" alt="avatar" class="me-2 img-thumbnail" style="max-width:20px;max-height:20px" /> ${item.name}</a>',onclick:void 0,url:""},opts);const $e=opts.id&&document.getElementById(opts.id)||opts.selector&&document.querySelector(opts.selector)||opts.element;if(!$e)return console.error("Invalid element selector",opts);const $lookup=document.createElement("div");$lookup.classList.value=`fixed-top autohide ${opts.lookup}`,null===(_a=$e.parentNode)||void 0===_a||_a.insertBefore($lookup,$e.nextSibling),$e.addEventListener("keydown",processKey),$e.addEventListener("keyup",showLookup),$e.addEventListener("click",hideLookup);let start=0,end=0,prevWord="";function showLookup(event){var _a,_b;if("Escape"===event.code)return hideLookup();const sel=window.getSelection(),$parent=null===(_a=$lookup.parentNode)||void 0===_a?void 0:_a.querySelector("textarea");if(!(null==sel?void 0:sel.anchorNode)||!$parent)return;const text=$parent.value||"",curr=$parent.selectionStart,getLength=e=>Array.isArray(e)&&e.length>0?e[0].length:0;start=curr-getLength(text.slice(0,curr).match(/[\S]+$/g)),end=curr+getLength(text.slice(curr).match(/^[\S]+/g));const word=text.substring(start,end);if(!word||word[0]!==opts.symbol)return prevWord="",hideLookup();if(word===prevWord)return;prevWord=word;const rect=$parent.getBoundingClientRect();$lookup.style.left=`${rect.left+20}px`,$lookup.style.top=`${rect.top+30}px`;const query=word.slice(1);if(query.length>=3&&opts.url){const e=null===(_b=document.querySelector('input[name="__RequestVerificationToken"]'))||void 0===_b?void 0:_b.value;fetch(opts.url.replace("{q}",encodeURIComponent(query)),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json;charset=utf-8",RequestVerificationToken:e}}).then((e=>e.json())).then((e=>opts.items=e))}const items=(opts.items||[]).filter((e=>e.name.toLowerCase().includes(query.toLowerCase()))).map((item=>eval('`<li class="mention-li-nt ${opts.lookup}" data-name="${item.name}" data-id="${item.id}">'+opts.item_template+"</li>`")));if(!items.length)return hideLookup();$lookup.innerHTML=`<ul class="dropdown-menu dropdown-mentions show">${items.join("")}</ul>`,[...$lookup.firstElementChild.children].forEach((e=>{e.addEventListener("click",onClick),e.addEventListener("mouseenter",onHover)})),$lookup.firstElementChild.children[0].classList.add("active"),$lookup.hasAttribute("hidden")&&$lookup.removeAttribute("hidden");const bounding=$lookup.getBoundingClientRect();(bounding.bottom>window.innerHeight||bounding.right>window.innerWidth)&&($lookup.style.top=parseInt($lookup.style.top)-10-$lookup.clientHeight+"px")}function hideLookup(){$lookup.hasAttribute("hidden")||$lookup.setAttribute("hidden","true")}function onClick(e){var t,o;const n=e.target.closest(".mention-li-nt");if(!n)return;null===(t=opts.onclick)||void 0===t||t.call(opts,n.dataset);const r=null===(o=$lookup.parentNode)||void 0===o?void 0:o.querySelector("textarea");r.value=r.value.replace(r.value.substring(start+1,end),""),hideLookup()}function onHover(e){const t=e.target.closest(".mention-li-nt");t&&!t.classList.contains("active")&&([...$lookup.firstElementChild.children].forEach((e=>e.classList.remove("active"))),t.classList.add("active"))}function processKey(e){const t=e.key;if(!["ArrowUp","ArrowDown","Enter"].includes(t)||$lookup.hasAttribute("hidden"))return;if(e.preventDefault(),"Enter"===t){const e=$lookup.querySelector(".active");return void(null==e||e.click())}const o=[...$lookup.firstElementChild.children],n=o.findIndex((e=>e.classList.contains("active")));o[n].classList.remove("active");const r=o[(n+("ArrowUp"===t?-1:1)+o.length)%o.length];r.classList.add("active"),r.scrollIntoView({block:"nearest"})}}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>Mentions})},bootstrap(e){e.exports=bootstrap}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;if(void 0===__webpack_modules__[e]){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.r(__webpack_exports__);var e=__webpack_require__("./wwwroot/lib/editor/autoCloseTags.ts"),t=__webpack_require__("./node_modules/@w8tcha/bootbox/dist/bootbox.js"),o=__webpack_require__("./wwwroot/lib/editor/mentions.ts");function n(e,t,o){if(void 0!==e.setSelectionRange)e.focus(),e.setSelectionRange(t,o);else if(e.createTextRange){const n=e.createTextRange();n.collapse(!0),n.moveEnd("character",o),n.moveStart("character",t),n.select()}}function r(e,t){e.setSelectionRange(t,t)}function a(e,t){if(void 0!==e.setSelectionRange){const o=e.selectionStart,a=e.selectionEnd;e.value=e.value.substring(0,o)+t+e.value.substring(a),o!==a?n(e,o,o+t.length):r(e,o+t.length)}else e.value+=t,e.focus()}function i(e,t,o){if(void 0!==e.setSelectionRange){const a=e.selectionStart,i=e.selectionEnd;e.value=e.value.substring(0,a)+t+e.value.substring(a,i)+o+e.value.substring(i),a!==i?n(e,a,t.length+o.length+i):r(e,a+t.length)}else e.value+=t,e.focus(),e.value+=o;e.dispatchEvent(new Event("change"))}function l(e){return void 0!==e.setSelectionRange&&e.selectionStart!==e.selectionEnd}(window||__webpack_require__.g).yafEditor=class{constructor(t,n,r,a,l,s,c,u,d){this.Name=t,this.InsertNote=u,this.TypeTitle=d,this.UrlTitle=n,this.UrlDescription=r,this.UrlImageTitle=a,this.UrlImageDescription=l,this.Description=s,this.MediaTitle=c,document.querySelectorAll(".BBCodeEditor").forEach((t=>{new e.default(t);var n={};n.id=t.id,n.lookup="user",n.url="/api/User/GetMentionUsers?users={q}",n.onclick=e=>{this.FormatText("userlink",e.name)},(0,o.default)(n),t.addEventListener("keydown",(e=>{var t,o;if(e.ctrlKey&&!e.altKey&&[66,73,85,81,13].includes(e.which)){const n=e.target;66===e.which?i(n,"[b]","[/b]"):73===e.which?i(n,"[i]","[/i]"):85===e.which?i(n,"[u]","[/u]"):81===e.which?i(n,"[quote]","[/quote]"):13===e.which&&(null!==document.getElementById("QuickReplyDialog")?null===(t=document.querySelector('[data-bs-save*="modal"]'))||void 0===t||t.click():null!==document.querySelector('[formaction*="PostReply"]')&&(null===(o=document.querySelector('[formaction*="PostReply"]'))||void 0===o||o.click()))}}))}))}FormatText(e,o){var s=document.getElementById(this.Name);switch(e){case"undo":document.execCommand("undo");break;case"redo":document.execCommand("redo");break;case"bold":i(s,"[b]","[/b]");break;case"italic":i(s,"[i]","[/i]");break;case"underline":i(s,"[u]","[/u]");break;case"strikethrough":i(s,"[s]","[/s]");break;case"highlight":i(s,"[h]","[/h]");break;case"code":i(s,"[code]","[/code]");break;case"codelang":i(s,`[code=${o}]`,"[/code]");break;case"media":l(s)?i(s,"[media]","[/media]"):t.prompt({title:this.MediaTitle,placeholder:"https://",callback:e=>{a(s,`[media]${e}[/media]`)}});break;case"img":l(s)?i(s,"[img]","[/img]"):t.confirm({title:this.UrlImageTitle,message:`<form><div class="mb-3">\n                                 <label for="url" class="form-label">${this.UrlImageTitle}</label> \n                                 <input type="text" class="form-control" id="url" placeholder="https://" />\n                             </div>\n                             <div class="mb-3">\n                                 <label for="desc" class="form-label">${this.UrlImageDescription}</label>\n                                 <input type="text" class="form-control" id="desc" placeholder="${this.Description}" />\n                             </div></form>\n                                 `,callback:e=>{if(e){const e=document.getElementById("url").value,t=document.getElementById("desc").value;a(s,""!==t&&null!==t?`[img=${e}]${t}[/img]`:`[img]${e}[/img]`)}}});break;case"quote":i(s,"[quote]","[/quote]");break;case"justifyleft":i(s,"[left]","[/left]");break;case"justifycenter":i(s,"[center]","[/center]");break;case"justifyright":i(s,"[right]","[/right]");break;case"indent":i(s,"[indent]","[/indent]");break;case"outdent":l(s)&&function(e,t,o){if(void 0!==e.setSelectionRange){const a=e.selectionStart,i=e.selectionEnd,l=e.value.substring(a,i);-1!==l.indexOf(t)&&-1!==l.indexOf(o)&&(e.value=e.value.substring(0,a)+e.value.substring(a+t.length,i-o.length)+e.value.substring(i),a!==i?n(e,a,i-o.length-t.length):r(e,a+t.length))}}(s,"[indent]","[/indent]");break;case"removeFormat":l(s)&&function(e){if(void 0!==e.setSelectionRange){const t=e.selectionStart,o=e.selectionEnd,r=e.value.substring(t,o),a=/\[.*?\]/g,i=r.replace(a,""),l=r.length-i.length;e.value=e.value.replace(r,i),n(e,t,o-l)}}(s);break;case"createNote":t.confirm({title:this.InsertNote,message:`<form><div class="mb-3">\n                                 <label for="type" class="form-label">${this.TypeTitle}</label> \n                                 <select class="form-select" id="type" aria-label="note type">\n                                     <option value="primary">primary</option>\n                                     <option value="secondary">secondary</option>\n                                     <option value="success">success</option>\n                                     <option value="danger">danger</option>\n                                     <option value="warning">warning</option>\n                                     <option value="info">info</option>\n                                     <option value="light">light</option>\n                                     <option value="dark">dark</option>\n                                 </select>\n                             </div>\n                             <div class="mb-3">\n                                 <label for="txt" class="form-label">${this.InsertNote}</label>\n                                 <textarea cols="20" rows="7" id="txt" class="form-control textarea-input"></textarea>\n                             </div></form>\n                                 `,callback:e=>{if(e){const e=document.getElementById("type").value,t=document.getElementById("txt").value;a(s,`[note=${e}]${t}[/note]`)}}});break;case"createlink":t.confirm({title:this.UrlTitle,message:`<form><div class="mb-3">\n                                 <label for="url" class="form-label">${this.UrlTitle}</label> \n                                 <input type="text" class="form-control" id="url" placeholder="https://" />\n                             </div>\n                             <div class="mb-3">\n                                 <label for="desc" class="form-label">${this.UrlDescription}</label>\n                                 <input type="text" class="form-control" id="desc" placeholder="${this.Description}" />\n                             </div></form>\n                                 `,callback(e){if(e){const e=document.getElementById("url").value,t=document.getElementById("desc").value;a(s,""!==t&&null!=t?`[url=${e}]${t}[/url]`:`[url]${e}[/url]`)}}});break;case"unorderedlist":i(s,"[list][*]","[/list]");break;case"orderedlist":i(s,"[list=1][*]","[/list]");break;case"color":i(s,`[color=${o}]`,"[/color]");break;case"font":i(s,`[font=${o}]`,"[/font]");break;case"fontsize":i(s,`[size=${o}]`,"[/size]");break;case"albumimg":a(s,`[albumimg]${o}[/albumimg]`);break;case"attach":a(s,`[attach]${o}[/attach]`);break;case"email":t.confirm({title:this.UrlTitle,message:`<form><div class="mb-3">\n                  <label for="url" class="form-label">${this.UrlTitle}</label> \n                  <input type="text" class="form-control" id="url" placeholder="https://" />\n              </div>\n              <div class="mb-3">\n                  <label for="desc" class="form-label">${this.UrlDescription}</label>\n                  <input type="text" class="form-control" id="desc" placeholder="${this.Description}" />\n              </div></form>\n                  `,callback(e){if(e){const e=document.getElementById("url").value,t=document.getElementById("desc").value;a(s,""!==t&&null!=t?`[email=${e}]${t}[/email]`:`[email]${e}[/email]`)}}});break;case"userlink":a(s,`[userlink]${o}[/userlink]`);break;case"selectAll":s.select();break;case"cut":l(s)&&document.execCommand("cut");break;case"copy":l(s)&&document.execCommand("copy");break;case"paste":navigator.clipboard.readText().then((e=>{s.value+=e}));break;default:i(s,`[${e}]`,`[/${e}]`)}}}})()})();
//# sourceMappingURL=editor.min.js.map