function Button_Load(n){n.className="ButtonOut";n.onmouseover=function(){Button_Over(this)};n.onmouseout=function(){Button_Out(this)}}function Button_Over(n){n.className=typeof n._enabled!="boolean"||n._enabled?"ButtonOver":"ButtonOff"}function Button_Out(n){n.className=typeof n._enabled!="boolean"||n._enabled?typeof n._selected=="boolean"&&n._selected?"ButtonChecked":"ButtonOut":"ButtonOff"}function Button_SetState(n,t,i){var r=document.getElementById(t);try{r._selected=n.queryCommandState(i)}catch(u){r._selected=!1}r._enabled=n.queryCommandEnabled(i);r.className=r._enabled?r._selected?"ButtonChecked":"ButtonOut":"ButtonOff"}function storeCaret(n){n.createTextRange&&(n.caretPos=document.selection.createRange().duplicate())}function setSelectionRange(n,t,i){if(n.setSelectionRange)n.focus(),n.setSelectionRange(t,i);else if(n.createTextRange){var r=n.createTextRange();r.collapse(!0);r.moveEnd("character",i);r.moveStart("character",t);r.select()}}function setCaretToPos(n,t){setSelectionRange(n,t,t)}function replaceSelection(n,t){if(n.setSelectionRange){var i=n.selectionStart,r=n.selectionEnd;n.value=n.value.substring(0,i)+t+n.value.substring(r);i!=r?setSelectionRange(n,i,i+t.length):setCaretToPos(n,i+t.length)}else document.selection?(n.focus(),document.selection.createRange().text=t):(n.value+=t,n.focus())}function removeFromSelection(n,t,i){if(n.setSelectionRange){var r=n.selectionStart,u=n.selectionEnd,f=n.value.substring(r,u);f.indexOf(t)!=-1&&f.indexOf(i)!=-1&&(n.value=n.value.substring(0,r)+n.value.substring(r+t.length,u-i.length)+n.value.substring(u),r!=u?setSelectionRange(n,r,u-i.length-t.length):setCaretToPos(n,r+t.length))}}function wrapSelection(n,t,i){var r,u,f;n.setSelectionRange?(r=n.selectionStart,u=n.selectionEnd,n.value=n.value.substring(0,r)+t+n.value.substring(r,u)+i+n.value.substring(u),r!=u?setSelectionRange(n,r,t.length+i.length+u):setCaretToPos(n,r+t.length)):document.selection?(f=document.selection.createRange().text,f?(document.selection.createRange().text=t+f+i,n.focus()):(n.value+=t,n.focus(),n.value+=i)):(n.value+=t,n.focus(),n.value+=i)}function getCurrentSelection(n){if(n.setSelectionRange)return n.selectionStart!=n.selectionEnd;if(document.selection){var t=document.selection.createRange();return t.parentElement()==n&&t.text!=""}return!1}var yafEditor=function(n){this.Name=n};yafEditor.prototype.FormatText=function(n,t){var i=document.getElementById(this.Name),u,f,r,e;switch(n){case"bold":wrapSelection(i,"[b]","[/b]");break;case"italic":wrapSelection(i,"[i]","[/i]");break;case"underline":wrapSelection(i,"[u]","[/u]");break;case"highlight":wrapSelection(i,"[h]","[/h]");break;case"code":wrapSelection(i,"[code]","[/code]");break;case"codelang":wrapSelection(i,"[code="+t+"]","[/code]");break;case"img":getCurrentSelection(i)?wrapSelection(i,"[img]","[/img]"):(u=prompt("Enter Image Url:","http://"),f=prompt("Enter Image Description:",""),f!==""&&f!=null?replaceSelection(i,"[img="+u+"]"+f+"[/img]"):u!==""&&u!=null&&replaceSelection(i,"[img]"+u+"[/img]"));break;case"quote":wrapSelection(i,"[quote]","[/quote]");break;case"justifyleft":wrapSelection(i,"[left]","[/left]");break;case"justifycenter":wrapSelection(i,"[center]","[/center]");break;case"justifyright":wrapSelection(i,"[right]","[/right]");break;case"indent":wrapSelection(i,"[indent]","[/indent]");break;case"outdent":getCurrentSelection(i)&&removeFromSelection(i,"[indent]","[/indent]");break;case"createlink":r=prompt("Enter URL:","http://");r!=""&&r!=null&&(getCurrentSelection(i)?wrapSelection(i,"[url="+r+"]","[/url]"):(e=prompt("Enter URL Description:",""),e!=""&&e!=null?replaceSelection(i,"[url="+r+"]"+e+"[/url]"):replaceSelection(i,"[url]"+r+"[/url]")));break;case"unorderedlist":wrapSelection(i,"[list][*]","[/list]");break;case"orderedlist":wrapSelection(i,"[list=1][*]","[/list]");break;case"color":wrapSelection(i,"[color="+t+"]","[/color]");break;case"fontsize":wrapSelection(i,"[size="+t+"]","[/size]");break;case"AlbumImgId":replaceSelection(i,"[albumimg]"+t+"[/albumimg]");break;case"attach":replaceSelection(i,"[attach]"+t+"[/attach]");break;default:wrapSelection(i,"["+n+"]","[/"+n+"]")}};yafEditor.prototype.AddImage=function(){var i=document.getElementById(this.Name),n=prompt("Enter image URL:","http://"),t=prompt("Enter Image Description:","");t!=""&&t!=null?replaceSelection(i,"[img="+n+"]"+t+"[/img]"):n!=""&&n!=null&&replaceSelection(i,"[img]"+n+"[/img]")};yafEditor.prototype.InsertSmiley=function(n){var t=document.getElementById(this.Name);replaceSelection(t,n)};$(document).ready(function(){if(jQuery("#PostAlbumsListPlaceholder").length)getAlbumImagesData(5,0,!1);$(".BBCodeEditor").keydown(function(n){if(n.ctrlKey&&!n.altKey&&(n.which==66||n.which==73||n.which==85||n.which==81||n.which==13))return n.which==66?wrapSelection(this,"[b]","[/b]"):n.which==73?wrapSelection(this,"[i]","[/i]"):n.which==85?wrapSelection(this,"[u]","[/u]"):n.which==81?wrapSelection(this,"[quote]","[/quote]"):n.which==13&&($('[id *= "QuickReply"]').length?$('[id *= "QuickReply"]').click():$('[id *= "PostReply"]').length&&(window.location.href=$('[id *= "PostReply"]').attr("href"))),!1})});