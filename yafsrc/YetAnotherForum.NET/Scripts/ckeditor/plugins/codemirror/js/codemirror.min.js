(function(a){if(typeof exports=="object"&&typeof module=="object"){module.exports=a()}else{if(typeof define=="function"&&define.amd){return define([],a)}else{this.CodeMirror=a()}}})(function(){var co=/gecko\/\d/i.test(navigator.userAgent);var eK=/MSIE \d/.test(navigator.userAgent);var bJ=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);var dK=eK||bJ;var k=dK&&(eK?document.documentMode||6:bJ[1]);var c0=/WebKit\//.test(navigator.userAgent);var dN=c0&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var dc=/Chrome\//.test(navigator.userAgent);var d2=/Opera\//.test(navigator.userAgent);var aC=/Apple Computer/.test(navigator.vendor);var c7=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var fu=/PhantomJS/.test(navigator.userAgent);var e1=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var eg=e1||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var b7=e1||/Mac/.test(navigator.platform);var aP=/win/i.test(navigator.platform);var aZ=d2&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(aZ){aZ=Number(aZ[1])}if(aZ&&aZ>=15){d2=false;c0=true}var bQ=b7&&(dN||d2&&(aZ==null||aZ<12.11));var f7=co||(dK&&k>=9);var ga=false,a8=false;function H(gg,gi){if(!(this instanceof H)){return new H(gg,gi)}this.options=gi=gi?aN(gi):{};aN(e3,gi,false);ce(gi);var gm=gi.value;if(typeof gm=="string"){gm=new at(gm,gi.mode)}this.doc=gm;var gh=new H.inputStyles[gi.inputStyle](this);var gl=this.display=new eI(gg,gm,gh);gl.wrapper.CodeMirror=this;ec(this);cO(this);if(gi.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(gi.autofocus&&!eg){gl.input.focus()}aD(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,draggingText:false,highlight:new ge(),keySeq:null,specialChars:null};var gf=this;if(dK&&k<11){setTimeout(function(){gf.display.input.reset(true)},20)}fQ(this);bj();cI(this);this.curOp.forceUpdate=true;eb(this,gm);if((gi.autofocus&&!eg)||gf.hasFocus()){setTimeout(cv(cB,this),20)}else{aV(this)}for(var gk in bf){if(bf.hasOwnProperty(gk)){bf[gk](this,gi[gk],cc)}}d5(this);if(gi.finishInit){gi.finishInit(this)}for(var gj=0;gj<a9.length;++gj){a9[gj](this)}am(this);if(c0&&gi.lineWrapping&&getComputedStyle(gl.lineDiv).textRendering=="optimizelegibility"){gl.lineDiv.style.textRendering="auto"}}function eI(gf,gh,gg){var gi=this;this.input=gg;gi.scrollbarFiller=f0("div",null,"CodeMirror-scrollbar-filler");gi.scrollbarFiller.setAttribute("cm-not-content","true");gi.gutterFiller=f0("div",null,"CodeMirror-gutter-filler");gi.gutterFiller.setAttribute("cm-not-content","true");gi.lineDiv=f0("div",null,"CodeMirror-code");gi.selectionDiv=f0("div",null,null,"position: relative; z-index: 1");gi.cursorDiv=f0("div",null,"CodeMirror-cursors");gi.measure=f0("div",null,"CodeMirror-measure");gi.lineMeasure=f0("div",null,"CodeMirror-measure");gi.lineSpace=f0("div",[gi.measure,gi.lineMeasure,gi.selectionDiv,gi.cursorDiv,gi.lineDiv],null,"position: relative; outline: none");gi.mover=f0("div",[f0("div",[gi.lineSpace],"CodeMirror-lines")],null,"position: relative");gi.sizer=f0("div",[gi.mover],"CodeMirror-sizer");gi.sizerWidth=null;gi.heightForcer=f0("div",null,null,"position: absolute; height: "+dJ+"px; width: 1px;");gi.gutters=f0("div",null,"CodeMirror-gutters");gi.lineGutter=null;gi.scroller=f0("div",[gi.sizer,gi.heightForcer,gi.gutters],"CodeMirror-scroll");gi.scroller.setAttribute("tabIndex","-1");gi.wrapper=f0("div",[gi.scrollbarFiller,gi.gutterFiller,gi.scroller],"CodeMirror");if(dK&&k<8){gi.gutters.style.zIndex=-1;gi.scroller.style.paddingRight=0}if(!c0&&!(co&&eg)){gi.scroller.draggable=true}if(gf){if(gf.appendChild){gf.appendChild(gi.wrapper)}else{gf(gi.wrapper)}}gi.viewFrom=gi.viewTo=gh.first;gi.reportedViewFrom=gi.reportedViewTo=gh.first;gi.view=[];gi.renderedView=null;gi.externalMeasured=null;gi.viewOffset=0;gi.lastWrapHeight=gi.lastWrapWidth=0;gi.updateLineNumbers=null;gi.nativeBarWidth=gi.barHeight=gi.barWidth=0;gi.scrollbarsClipped=false;gi.lineNumWidth=gi.lineNumInnerWidth=gi.lineNumChars=null;gi.alignWidgets=false;gi.cachedCharWidth=gi.cachedTextHeight=gi.cachedPaddingH=null;gi.maxLine=null;gi.maxLineLength=0;gi.maxLineChanged=false;gi.wheelDX=gi.wheelDY=gi.wheelStartX=gi.wheelStartY=null;gi.shift=false;gi.selForContextMenu=null;gi.activeTouch=null;gg.init(gi)}function br(gf){gf.doc.mode=H.getMode(gf.options,gf.doc.modeOption);el(gf)}function el(gf){gf.doc.iter(function(gg){if(gg.stateAfter){gg.stateAfter=null}if(gg.styles){gg.styles=null}});gf.doc.frontier=gf.doc.first;ef(gf,100);gf.state.modeGen++;if(gf.curOp){ah(gf)}}function eG(gf){if(gf.options.lineWrapping){fA(gf.display.wrapper,"CodeMirror-wrap");gf.display.sizer.style.minWidth="";gf.display.sizerWidth=null}else{f(gf.display.wrapper,"CodeMirror-wrap");g(gf)}X(gf);ah(gf);ak(gf);setTimeout(function(){eY(gf)},100)}function be(gf){var gh=aY(gf.display),gg=gf.options.lineWrapping;var gi=gg&&Math.max(5,gf.display.scroller.clientWidth/dD(gf.display)-3);return function(gk){if(fw(gf.doc,gk)){return 0}var gj=0;if(gk.widgets){for(var gl=0;gl<gk.widgets.length;gl++){if(gk.widgets[gl].height){gj+=gk.widgets[gl].height}}}if(gg){return gj+(Math.ceil(gk.text.length/gi)||1)*gh}else{return gj+gh}}}function X(gf){var gh=gf.doc,gg=be(gf);gh.iter(function(gi){var gj=gg(gi);if(gj!=gi.height){f3(gi,gj)}})}function cO(gf){gf.display.wrapper.className=gf.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+gf.options.theme.replace(/(^|\s)\s*/g," cm-s-");ak(gf)}function dw(gf){ec(gf);ah(gf);setTimeout(function(){eE(gf)},20)}function ec(gf){var gg=gf.display.gutters,gk=gf.options.gutters;d1(gg);for(var gh=0;gh<gk.length;++gh){var gi=gk[gh];var gj=gg.appendChild(f0("div",null,"CodeMirror-gutter "+gi));if(gi=="CodeMirror-linenumbers"){gf.display.lineGutter=gj;gj.style.width=(gf.display.lineNumWidth||1)+"px"}}gg.style.display=gh?"":"none";c4(gf)}function c4(gf){var gg=gf.display.gutters.offsetWidth;gf.display.sizer.style.marginLeft=gg+"px"}function en(gh){if(gh.height==0){return 0}var gg=gh.text.length,gf,gj=gh;while(gf=eO(gj)){var gi=gf.find(0,true);gj=gi.from.line;gg+=gi.from.ch-gi.to.ch}gj=gh;while(gf=ew(gj)){var gi=gf.find(0,true);gg-=gj.text.length-gi.from.ch;gj=gi.to.line;gg+=gj.text.length-gi.to.ch}return gg}function g(gf){var gh=gf.display,gg=gf.doc;gh.maxLine=ff(gg,gg.first);gh.maxLineLength=en(gh.maxLine);gh.maxLineChanged=true;gg.iter(function(gj){var gi=en(gj);if(gi>gh.maxLineLength){gh.maxLineLength=gi;gh.maxLine=gj}})}function ce(gf){var gg=dh(gf.gutters,"CodeMirror-linenumbers");if(gg==-1&&gf.lineNumbers){gf.gutters=gf.gutters.concat(["CodeMirror-linenumbers"])}else{if(gg>-1&&!gf.lineNumbers){gf.gutters=gf.gutters.slice(0);gf.gutters.splice(gg,1)}}}function dA(gf){var gi=gf.display,gh=gi.gutters.offsetWidth;var gg=Math.round(gf.doc.height+bI(gf.display));return{clientHeight:gi.scroller.clientHeight,viewHeight:gi.wrapper.clientHeight,scrollWidth:gi.scroller.scrollWidth,clientWidth:gi.scroller.clientWidth,viewWidth:gi.wrapper.clientWidth,barLeft:gf.options.fixedGutter?gh:0,docHeight:gg,scrollHeight:gg+cT(gf)+gi.barHeight,nativeBarWidth:gi.nativeBarWidth,gutterWidth:gh}}function dk(gh,gg,gf){this.cm=gf;var gi=this.vert=f0("div",[f0("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var gj=this.horiz=f0("div",[f0("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");gh(gi);gh(gj);bX(gi,"scroll",function(){if(gi.clientHeight){gg(gi.scrollTop,"vertical")}});bX(gj,"scroll",function(){if(gj.clientWidth){gg(gj.scrollLeft,"horizontal")}});this.checkedOverlay=false;if(dK&&k<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}}dk.prototype=aN({update:function(gi){var gj=gi.scrollWidth>gi.clientWidth+1;var gh=gi.scrollHeight>gi.clientHeight+1;var gk=gi.nativeBarWidth;if(gh){this.vert.style.display="block";this.vert.style.bottom=gj?gk+"px":"0";var gg=gi.viewHeight-(gj?gk:0);this.vert.firstChild.style.height=Math.max(0,gi.scrollHeight-gi.clientHeight+gg)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(gj){this.horiz.style.display="block";this.horiz.style.right=gh?gk+"px":"0";this.horiz.style.left=gi.barLeft+"px";var gf=gi.viewWidth-gi.barLeft-(gh?gk:0);this.horiz.firstChild.style.width=(gi.scrollWidth-gi.clientWidth+gf)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedOverlay&&gi.clientHeight>0){if(gk==0){this.overlayHack()}this.checkedOverlay=true}return{right:gh?gk:0,bottom:gj?gk:0}},setScrollLeft:function(gf){if(this.horiz.scrollLeft!=gf){this.horiz.scrollLeft=gf}},setScrollTop:function(gf){if(this.vert.scrollTop!=gf){this.vert.scrollTop=gf}},overlayHack:function(){var gf=b7&&!c7?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=gf;var gg=this;var gh=function(gi){if(L(gi)!=gg.vert&&L(gi)!=gg.horiz){c2(gg.cm,eu)(gi)}};bX(this.vert,"mousedown",gh);bX(this.horiz,"mousedown",gh)},clear:function(){var gf=this.horiz.parentNode;gf.removeChild(this.horiz);gf.removeChild(this.vert)}},dk.prototype);function e4(){}e4.prototype=aN({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},e4.prototype);H.scrollbarModel={"native":dk,"null":e4};function aD(gf){if(gf.display.scrollbars){gf.display.scrollbars.clear();if(gf.display.scrollbars.addClass){f(gf.display.wrapper,gf.display.scrollbars.addClass)}}gf.display.scrollbars=new H.scrollbarModel[gf.options.scrollbarStyle](function(gg){gf.display.wrapper.insertBefore(gg,gf.display.scrollbarFiller);bX(gg,"mousedown",function(){if(gf.state.focused){setTimeout(function(){gf.display.input.focus()},0)}});gg.setAttribute("cm-not-content","true")},function(gh,gg){if(gg=="horizontal"){bE(gf,gh)}else{N(gf,gh)}},gf);if(gf.display.scrollbars.addClass){fA(gf.display.wrapper,gf.display.scrollbars.addClass)}}function eY(gh,gj){if(!gj){gj=dA(gh)}var gg=gh.display.barWidth,gf=gh.display.barHeight;aU(gh,gj);for(var gi=0;gi<4&&gg!=gh.display.barWidth||gf!=gh.display.barHeight;gi++){if(gg!=gh.display.barWidth&&gh.options.lineWrapping){ba(gh)}aU(gh,dA(gh));gg=gh.display.barWidth;gf=gh.display.barHeight}}function aU(gf,gg){var gi=gf.display;var gh=gi.scrollbars.update(gg);gi.sizer.style.paddingRight=(gi.barWidth=gh.right)+"px";gi.sizer.style.paddingBottom=(gi.barHeight=gh.bottom)+"px";if(gh.right&&gh.bottom){gi.scrollbarFiller.style.display="block";gi.scrollbarFiller.style.height=gh.bottom+"px";gi.scrollbarFiller.style.width=gh.right+"px"}else{gi.scrollbarFiller.style.display=""}if(gh.bottom&&gf.options.coverGutterNextToScrollbar&&gf.options.fixedGutter){gi.gutterFiller.style.display="block";gi.gutterFiller.style.height=gh.bottom+"px";gi.gutterFiller.style.width=gg.gutterWidth+"px"}else{gi.gutterFiller.style.display=""}}function b6(gi,gm,gh){var gj=gh&&gh.top!=null?Math.max(0,gh.top):gi.scroller.scrollTop;gj=Math.floor(gj-e8(gi));var gf=gh&&gh.bottom!=null?gh.bottom:gj+gi.wrapper.clientHeight;var gk=bG(gm,gj),gl=bG(gm,gf);if(gh&&gh.ensure){var gg=gh.ensure.from.line,gn=gh.ensure.to.line;if(gg<gk){gk=gg;gl=bG(gm,bM(ff(gm,gg))+gi.wrapper.clientHeight)}else{if(Math.min(gn,gm.lastLine())>=gl){gk=bG(gm,bM(ff(gm,gn))-gi.wrapper.clientHeight);gl=gn}}}return{from:gk,to:Math.max(gl,gk+1)}}function eE(gn){var gl=gn.display,gm=gl.view;if(!gl.alignWidgets&&(!gl.gutters.firstChild||!gn.options.fixedGutter)){return}var gj=dX(gl)-gl.scroller.scrollLeft+gn.doc.scrollLeft;var gf=gl.gutters.offsetWidth,gg=gj+"px";for(var gi=0;gi<gm.length;gi++){if(!gm[gi].hidden){if(gn.options.fixedGutter&&gm[gi].gutter){gm[gi].gutter.style.left=gg}var gk=gm[gi].alignable;if(gk){for(var gh=0;gh<gk.length;gh++){gk[gh].style.left=gg}}}}if(gn.options.fixedGutter){gl.gutters.style.left=(gj+gf)+"px"}}function d5(gf){if(!gf.options.lineNumbers){return false}var gk=gf.doc,gg=es(gf.options,gk.first+gk.size-1),gj=gf.display;if(gg.length!=gj.lineNumChars){var gl=gj.measure.appendChild(f0("div",[f0("div",gg)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var gh=gl.firstChild.offsetWidth,gi=gl.offsetWidth-gh;gj.lineGutter.style.width="";gj.lineNumInnerWidth=Math.max(gh,gj.lineGutter.offsetWidth-gi)+1;gj.lineNumWidth=gj.lineNumInnerWidth+gi;gj.lineNumChars=gj.lineNumInnerWidth?gg.length:-1;gj.lineGutter.style.width=gj.lineNumWidth+"px";c4(gf);return true}return false}function es(gf,gg){return String(gf.lineNumberFormatter(gg+gf.firstLineNumber))}function dX(gf){return gf.scroller.getBoundingClientRect().left-gf.sizer.getBoundingClientRect().left}function aI(gg,gf,gh){var gi=gg.display;this.viewport=gf;this.visible=b6(gi,gg.doc,gf);this.editorIsHidden=!gi.wrapper.offsetWidth;this.wrapperHeight=gi.wrapper.clientHeight;this.wrapperWidth=gi.wrapper.clientWidth;this.oldDisplayWidth=dl(gg);this.force=gh;this.dims=fd(gg);this.events=[]}aI.prototype.signal=function(gg,gf){if(fi(gg,gf)){this.events.push(arguments)}};aI.prototype.finish=function(){for(var gf=0;gf<this.events.length;gf++){aE.apply(null,this.events[gf])}};function J(gf){var gg=gf.display;if(!gg.scrollbarsClipped&&gg.scroller.offsetWidth){gg.nativeBarWidth=gg.scroller.offsetWidth-gg.scroller.clientWidth;gg.heightForcer.style.height=cT(gf)+"px";gg.sizer.style.marginBottom=-gg.nativeBarWidth+"px";gg.sizer.style.borderRightWidth=cT(gf)+"px";gg.scrollbarsClipped=true}}function B(go,gi){var gj=go.display,gn=go.doc;if(gi.editorIsHidden){ex(go);return false}if(!gi.force&&gi.visible.from>=gj.viewFrom&&gi.visible.to<=gj.viewTo&&(gj.updateLineNumbers==null||gj.updateLineNumbers>=gj.viewTo)&&gj.renderedView==gj.view&&db(go)==0){return false}if(d5(go)){ex(go);gi.dims=fd(go)}var gh=gn.first+gn.size;var gl=Math.max(gi.visible.from-go.options.viewportMargin,gn.first);var gm=Math.min(gh,gi.visible.to+go.options.viewportMargin);if(gj.viewFrom<gl&&gl-gj.viewFrom<20){gl=Math.max(gn.first,gj.viewFrom)}if(gj.viewTo>gm&&gj.viewTo-gm<20){gm=Math.min(gh,gj.viewTo)}if(a8){gl=aW(go.doc,gl);gm=d3(go.doc,gm)}var gg=gl!=gj.viewFrom||gm!=gj.viewTo||gj.lastWrapHeight!=gi.wrapperHeight||gj.lastWrapWidth!=gi.wrapperWidth;cR(go,gl,gm);gj.viewOffset=bM(ff(go.doc,gj.viewFrom));go.display.mover.style.top=gj.viewOffset+"px";var gf=db(go);if(!gg&&gf==0&&!gi.force&&gj.renderedView==gj.view&&(gj.updateLineNumbers==null||gj.updateLineNumbers>=gj.viewTo)){return false}var gk=dO();if(gf>4){gj.lineDiv.style.display="none"}cm(go,gj.updateLineNumbers,gi.dims);if(gf>4){gj.lineDiv.style.display=""}gj.renderedView=gj.view;if(gk&&dO()!=gk&&gk.offsetHeight){gk.focus()}d1(gj.cursorDiv);d1(gj.selectionDiv);gj.gutters.style.height=0;if(gg){gj.lastWrapHeight=gi.wrapperHeight;gj.lastWrapWidth=gi.wrapperWidth;ef(go,400)}gj.updateLineNumbers=null;return true}function cj(gg,gk){var gi=gk.force,gf=gk.viewport;for(var gj=true;;gj=false){if(gj&&gg.options.lineWrapping&&gk.oldDisplayWidth!=dl(gg)){gi=true}else{gi=false;if(gf&&gf.top!=null){gf={top:Math.min(gg.doc.height+bI(gg.display)-cV(gg),gf.top)}}gk.visible=b6(gg.display,gg.doc,gf);if(gk.visible.from>=gg.display.viewFrom&&gk.visible.to<=gg.display.viewTo){break}}if(!B(gg,gk)){break}ba(gg);var gh=dA(gg);bC(gg);dz(gg,gh);eY(gg,gh)}gk.signal(gg,"update",gg);if(gg.display.viewFrom!=gg.display.reportedViewFrom||gg.display.viewTo!=gg.display.reportedViewTo){gk.signal(gg,"viewportChange",gg,gg.display.viewFrom,gg.display.viewTo);gg.display.reportedViewFrom=gg.display.viewFrom;gg.display.reportedViewTo=gg.display.viewTo}}function dT(gg,gf){var gi=new aI(gg,gf);if(B(gg,gi)){ba(gg);cj(gg,gi);var gh=dA(gg);bC(gg);dz(gg,gh);eY(gg,gh);gi.finish()}}function dz(gf,gg){gf.display.sizer.style.minHeight=gg.docHeight+"px";var gh=gg.docHeight+gf.display.barHeight;gf.display.heightForcer.style.top=gh+"px";gf.display.gutters.style.height=Math.max(gh+cT(gf),gg.clientHeight)+"px"}function ba(gm){var gk=gm.display;var gg=gk.lineDiv.offsetTop;for(var gh=0;gh<gk.view.length;gh++){var gn=gk.view[gh],go;if(gn.hidden){continue}if(dK&&k<8){var gj=gn.node.offsetTop+gn.node.offsetHeight;go=gj-gg;gg=gj}else{var gi=gn.node.getBoundingClientRect();go=gi.bottom-gi.top}var gl=gn.line.height-go;if(go<2){go=aY(gk)}if(gl>0.001||gl<-0.001){f3(gn.line,go);cb(gn.line);if(gn.rest){for(var gf=0;gf<gn.rest.length;gf++){cb(gn.rest[gf])}}}}}function cb(gf){if(gf.widgets){for(var gg=0;gg<gf.widgets.length;++gg){gf.widgets[gg].height=gf.widgets[gg].node.offsetHeight}}}function fd(gf){var gk=gf.display,gi={},gh={};var gj=gk.gutters.clientLeft;for(var gl=gk.gutters.firstChild,gg=0;gl;gl=gl.nextSibling,++gg){gi[gf.options.gutters[gg]]=gl.offsetLeft+gl.clientLeft+gj;gh[gf.options.gutters[gg]]=gl.clientWidth}return{fixedPos:dX(gk),gutterTotalWidth:gk.gutters.offsetWidth,gutterLeft:gi,gutterWidth:gh,wrapperWidth:gk.wrapper.clientWidth}}function cm(gq,gh,gp){var gm=gq.display,gs=gq.options.lineNumbers;var gf=gm.lineDiv,gr=gf.firstChild;function gl(gu){var gt=gu.nextSibling;if(c0&&b7&&gq.display.currentWheelTarget==gu){gu.style.display="none"}else{gu.parentNode.removeChild(gu)}return gt}var gn=gm.view,gk=gm.viewFrom;for(var gi=0;gi<gn.length;gi++){var gj=gn[gi];if(gj.hidden){}else{if(!gj.node||gj.node.parentNode!=gf){var gg=aF(gq,gj,gk,gp);gf.insertBefore(gg,gr)}else{while(gr!=gj.node){gr=gl(gr)}var go=gs&&gh!=null&&gh<=gk&&gj.lineNumber;if(gj.changes){if(dh(gj.changes,"gutter")>-1){go=false}ab(gq,gj,gk,gp)}if(go){d1(gj.lineNumber);gj.lineNumber.appendChild(document.createTextNode(es(gq.options,gk)))}gr=gj.node.nextSibling}}gk+=gj.size}while(gr){gr=gl(gr)}}function ab(gf,gh,gj,gk){for(var gg=0;gg<gh.changes.length;gg++){var gi=gh.changes[gg];if(gi=="text"){fl(gf,gh)}else{if(gi=="gutter"){df(gf,gh,gj,gk)}else{if(gi=="class"){dG(gh)}else{if(gi=="widget"){ao(gf,gh,gk)}}}}}gh.changes=null}function fH(gf){if(gf.node==gf.text){gf.node=f0("div",null,null,"position: relative");if(gf.text.parentNode){gf.text.parentNode.replaceChild(gf.node,gf.text)}gf.node.appendChild(gf.text);if(dK&&k<8){gf.node.style.zIndex=2}}return gf.node}function ev(gg){var gf=gg.bgClass?gg.bgClass+" "+(gg.line.bgClass||""):gg.line.bgClass;if(gf){gf+=" CodeMirror-linebackground"}if(gg.background){if(gf){gg.background.className=gf}else{gg.background.parentNode.removeChild(gg.background);gg.background=null}}else{if(gf){var gh=fH(gg);gg.background=gh.insertBefore(f0("div",null,gf),gh.firstChild)}}}function dV(gf,gg){var gh=gf.display.externalMeasured;if(gh&&gh.line==gg.line){gf.display.externalMeasured=null;gg.measure=gh.measure;return gh.built}return eR(gf,gg)}function fl(gf,gi){var gg=gi.text.className;var gh=dV(gf,gi);if(gi.text==gi.node){gi.node=gh.pre}gi.text.parentNode.replaceChild(gh.pre,gi.text);gi.text=gh.pre;if(gh.bgClass!=gi.bgClass||gh.textClass!=gi.textClass){gi.bgClass=gh.bgClass;gi.textClass=gh.textClass;dG(gi)}else{if(gg){gi.text.className=gg}}}function dG(gg){ev(gg);if(gg.line.wrapClass){fH(gg).className=gg.line.wrapClass}else{if(gg.node!=gg.text){gg.node.className=""}}var gf=gg.textClass?gg.textClass+" "+(gg.line.textClass||""):gg.line.textClass;gg.text.className=gf||""}function df(gn,gl,gk,gm){if(gl.gutter){gl.node.removeChild(gl.gutter);gl.gutter=null}var gi=gl.line.gutterMarkers;if(gn.options.lineNumbers||gi){var gg=fH(gl);var gj=gl.gutter=f0("div",null,"CodeMirror-gutter-wrapper","left: "+(gn.options.fixedGutter?gm.fixedPos:-gm.gutterTotalWidth)+"px; width: "+gm.gutterTotalWidth+"px");gn.display.input.setUneditable(gj);gg.insertBefore(gj,gl.text);if(gl.line.gutterClass){gj.className+=" "+gl.line.gutterClass}if(gn.options.lineNumbers&&(!gi||!gi["CodeMirror-linenumbers"])){gl.lineNumber=gj.appendChild(f0("div",es(gn.options,gk),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+gm.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+gn.display.lineNumInnerWidth+"px"))}if(gi){for(var gh=0;gh<gn.options.gutters.length;++gh){var gf=gn.options.gutters[gh],go=gi.hasOwnProperty(gf)&&gi[gf];if(go){gj.appendChild(f0("div",[go],"CodeMirror-gutter-elt","left: "+gm.gutterLeft[gf]+"px; width: "+gm.gutterWidth[gf]+"px"))}}}}}function ao(gf,gg,gj){if(gg.alignable){gg.alignable=null}for(var gi=gg.node.firstChild,gh;gi;gi=gh){var gh=gi.nextSibling;if(gi.className=="CodeMirror-linewidget"){gg.node.removeChild(gi)}}ft(gf,gg,gj)}function aF(gf,gh,gi,gj){var gg=dV(gf,gh);gh.text=gh.node=gg.pre;if(gg.bgClass){gh.bgClass=gg.bgClass}if(gg.textClass){gh.textClass=gg.textClass}dG(gh);df(gf,gh,gi,gj);ft(gf,gh,gj);return gh.node}function ft(gf,gh,gi){f5(gf,gh.line,gh,gi,true);if(gh.rest){for(var gg=0;gg<gh.rest.length;gg++){f5(gf,gh.rest[gg],gh,gi,false)}}}function f5(gn,go,gk,gm,gi){if(!go.widgets){return}var gf=fH(gk);for(var gh=0,gl=go.widgets;gh<gl.length;++gh){var gj=gl[gh],gg=f0("div",[gj.node],"CodeMirror-linewidget");if(!gj.handleMouseEvents){gg.setAttribute("cm-ignore-events","true")}bF(gj,gg,gk,gm);gn.display.input.setUneditable(gg);if(gi&&gj.above){gf.insertBefore(gg,gk.gutter||gk.text)}else{gf.appendChild(gg)}ae(gj,"redraw")}}function bF(gi,gh,gf,gj){if(gi.noHScroll){(gf.alignable||(gf.alignable=[])).push(gh);var gg=gj.wrapperWidth;gh.style.left=gj.fixedPos+"px";if(!gi.coverGutter){gg-=gj.gutterTotalWidth;gh.style.paddingLeft=gj.gutterTotalWidth+"px"}gh.style.width=gg+"px"}if(gi.coverGutter){gh.style.zIndex=5;gh.style.position="relative";if(!gi.noHScroll){gh.style.marginLeft=-gj.gutterTotalWidth+"px"}}}var W=H.Pos=function(gf,gg){if(!(this instanceof W)){return new W(gf,gg)}this.line=gf;this.ch=gg};var cf=H.cmpPos=function(gg,gf){return gg.line-gf.line||gg.ch-gf.ch};function ci(gf){return W(gf.line,gf.ch)}function bx(gg,gf){return cf(gg,gf)<0?gf:gg}function ar(gg,gf){return cf(gg,gf)<0?gg:gf}function r(gf){if(!gf.state.focused){gf.display.input.focus();cB(gf)}}function aj(gf){return gf.options.readOnly||gf.doc.cantEdit}var bm=null;function fX(gu,gk,gh,gg){var gt=gu.doc;gu.display.shift=false;if(!gg){gg=gt.sel}var go=a1(gk),gf=null;if(gu.state.pasteIncoming&&gg.ranges.length>1){if(bm&&bm.join("\n")==gk){gf=gg.ranges.length%bm.length==0&&bS(bm,a1)}else{if(go.length==gg.ranges.length){gf=bS(go,function(gv){return[gv]})}}}for(var gl=gg.ranges.length-1;gl>=0;gl--){var gm=gg.ranges[gl];var gs=gm.from(),gr=gm.to();if(gm.empty()){if(gh&&gh>0){gs=W(gs.line,gs.ch-gh)}else{if(gu.state.overwrite&&!gu.state.pasteIncoming){gr=W(gr.line,Math.min(ff(gt,gr.line).text.length,gr.ch+fG(go).length))}}}var gp=gu.curOp.updateInput;var gq={from:gs,to:gr,text:gf?gf[gl%gf.length]:go,origin:gu.state.pasteIncoming?"paste":gu.state.cutIncoming?"cut":"+input"};bg(gu.doc,gq);ae(gu,"inputRead",gu,gq);if(gk&&!gu.state.pasteIncoming&&gu.options.electricChars&&gu.options.smartIndent&&gm.head.ch<100&&(!gl||gg.ranges[gl-1].head.line!=gm.head.line)){var gn=gu.getModeAt(gm.head);var gi=cX(gq);if(gn.electricChars){for(var gj=0;gj<gn.electricChars.length;gj++){if(gk.indexOf(gn.electricChars.charAt(gj))>-1){ad(gu,gi.line,"smart");break}}}else{if(gn.electricInput){if(gn.electricInput.test(ff(gt,gi.line).text.slice(0,gi.ch))){ad(gu,gi.line,"smart")}}}}}fF(gu);gu.curOp.updateInput=gp;gu.curOp.typing=true;gu.state.pasteIncoming=gu.state.cutIncoming=false}function dj(gf){var gk=[],gh=[];for(var gi=0;gi<gf.doc.sel.ranges.length;gi++){var gg=gf.doc.sel.ranges[gi].head.line;var gj={anchor:W(gg,0),head:W(gg+1,0)};gh.push(gj);gk.push(gf.getRange(gj.anchor,gj.head))}return{text:gk,ranges:gh}}function fP(gf){gf.setAttribute("autocorrect","off");gf.setAttribute("autocapitalize","off");gf.setAttribute("spellcheck","false")}function Y(gf){this.cm=gf;this.prevInput="";this.pollingFast=false;this.polling=new ge();this.inaccurateSelection=false;this.hasSelection=false}function aX(){var gf=f0("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");var gg=f0("div",[gf],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(c0){gf.style.width="1000px"}else{gf.setAttribute("wrap","off")}if(e1){gf.style.border="1px solid black"}fP(gf);return gg}Y.prototype=aN({init:function(gh){var gg=this,gf=this.cm;var gk=this.wrapper=aX();var gi=this.textarea=gk.firstChild;gh.wrapper.insertBefore(gk,gh.wrapper.firstChild);if(e1){gi.style.width="0px"}bX(gi,"input",function(){if(dK&&k>=9&&gg.hasSelection){gg.hasSelection=null}gg.poll()});bX(gi,"paste",function(){if(c0&&!gf.state.fakedLastChar&&!(new Date-gf.state.lastMiddleDown<200)){var gm=gi.selectionStart,gl=gi.selectionEnd;gi.value+="$";gi.selectionEnd=gl;gi.selectionStart=gm;gf.state.fakedLastChar=true}gf.state.pasteIncoming=true;gg.fastPoll()});function gj(gm){if(gf.somethingSelected()){bm=gf.getSelections();if(gg.inaccurateSelection){gg.prevInput="";gg.inaccurateSelection=false;gi.value=bm.join("\n");dL(gi)}}else{var gl=dj(gf);bm=gl.text;if(gm.type=="cut"){gf.setSelections(gl.ranges,null,Z)}else{gg.prevInput="";gi.value=gl.text.join("\n");dL(gi)}}if(gm.type=="cut"){gf.state.cutIncoming=true}}bX(gi,"cut",gj);bX(gi,"copy",gj);bX(gh.scroller,"paste",function(gl){if(bb(gh,gl)){return}gf.state.pasteIncoming=true;gg.focus()});bX(gh.lineSpace,"selectstart",function(gl){if(!bb(gh,gl)){cG(gl)}})},prepareSelection:function(){var gg=this.cm,gk=gg.display,gj=gg.doc;var gf=fI(gg);if(gg.options.moveInputWithCursor){var gl=dU(gg,gj.sel.primary().head,"div");var gh=gk.wrapper.getBoundingClientRect(),gi=gk.lineDiv.getBoundingClientRect();gf.teTop=Math.max(0,Math.min(gk.wrapper.clientHeight-10,gl.top+gi.top-gh.top));gf.teLeft=Math.max(0,Math.min(gk.wrapper.clientWidth-10,gl.left+gi.left-gh.left))}return gf},showSelection:function(gh){var gf=this.cm,gg=gf.display;bR(gg.cursorDiv,gh.cursors);bR(gg.selectionDiv,gh.selection);if(gh.teTop!=null){this.wrapper.style.top=gh.teTop+"px";this.wrapper.style.left=gh.teLeft+"px"}},reset:function(gj){if(this.contextMenuPending){return}var gg,gi,gf=this.cm,gl=gf.doc;if(gf.somethingSelected()){this.prevInput="";var gh=gl.sel.primary();gg=da&&(gh.to().line-gh.from().line>100||(gi=gf.getSelection()).length>1000);var gk=gg?"-":gi||gf.getSelection();this.textarea.value=gk;if(gf.state.focused){dL(this.textarea)}if(dK&&k>=9){this.hasSelection=gk}}else{if(!gj){this.prevInput=this.textarea.value="";if(dK&&k>=9){this.hasSelection=null}}}this.inaccurateSelection=gg},getField:function(){return this.textarea},supportsTouch:function(){return false},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!eg||dO()!=this.textarea)){try{this.textarea.focus()}catch(gf){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var gf=this;if(gf.pollingFast){return}gf.polling.set(this.cm.options.pollInterval,function(){gf.poll();if(gf.cm.state.focused){gf.slowPoll()}})},fastPoll:function(){var gg=false,gf=this;gf.pollingFast=true;function gh(){var gi=gf.poll();if(!gi&&!gg){gg=true;gf.polling.set(60,gh)}else{gf.pollingFast=false;gf.slowPoll()}}gf.polling.set(20,gh)},poll:function(){var gf=this.cm,gi=this.textarea,gj=this.prevInput;if(!gf.state.focused||(bs(gi)&&!gj)||aj(gf)||gf.options.disableInput||gf.state.keySeq){return false}if(gf.state.pasteIncoming&&gf.state.fakedLastChar){gi.value=gi.value.substring(0,gi.value.length-1);gf.state.fakedLastChar=false}var gk=gi.value;if(gk==gj&&!gf.somethingSelected()){return false}if(dK&&k>=9&&this.hasSelection===gk||b7&&/[\uf700-\uf7ff]/.test(gk)){gf.display.input.reset();return false}if(gf.doc.sel==gf.display.selForContextMenu){if(gk.charCodeAt(0)==8203){if(!gj){gj="\u200b"}}else{if(gj=="\u200b"){gk=gk.slice(1);gj=""}}}var gl=0,gg=Math.min(gj.length,gk.length);while(gl<gg&&gj.charCodeAt(gl)==gk.charCodeAt(gl)){++gl}var gh=this;cM(gf,function(){fX(gf,gk.slice(gl),gj.length-gl);if(gk.length>1000||gk.indexOf("\n")>-1){gi.value=gh.prevInput=""}else{gh.prevInput=gk}});return true},ensurePolled:function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}},onKeyPress:function(){if(dK&&k>=9){this.hasSelection=null}this.fastPoll()},onContextMenu:function(gk){var gp=this,gq=gp.cm,gm=gq.display,gg=gp.textarea;var go=cn(gq,gk),gf=gm.scroller.scrollTop;if(!go||d2){return}var gj=gq.options.resetSelectionOnContextMenu;if(gj&&gq.doc.sel.contains(go)==-1){c2(gq,bU)(gq.doc,eS(go),Z)}var gl=gg.style.cssText;gp.wrapper.style.position="absolute";gg.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(gk.clientY-5)+"px; left: "+(gk.clientX-5)+"px; z-index: 1000; background: "+(dK?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(c0){var gr=window.scrollY}gm.input.focus();if(c0){window.scrollTo(null,gr)}gm.input.reset();if(!gq.somethingSelected()){gg.value=gp.prevInput=" "}gp.contextMenuPending=true;gm.selForContextMenu=gq.doc.sel;clearTimeout(gm.detectingSelectAll);function gi(){if(gg.selectionStart!=null){var gs=gq.somethingSelected();var gt=gg.value="\u200b"+(gs?gg.value:"");gp.prevInput=gs?"":"\u200b";gg.selectionStart=1;gg.selectionEnd=gt.length;gm.selForContextMenu=gq.doc.sel}}function gn(){gp.contextMenuPending=false;gp.wrapper.style.position="relative";gg.style.cssText=gl;if(dK&&k<9){gm.scrollbars.setScrollTop(gm.scroller.scrollTop=gf)}if(gg.selectionStart!=null){if(!dK||(dK&&k<9)){gi()}var gs=0,gt=function(){if(gm.selForContextMenu==gq.doc.sel&&gg.selectionStart==0&&gp.prevInput=="\u200b"){c2(gq,eD.selectAll)(gq)}else{if(gs++<10){gm.detectingSelectAll=setTimeout(gt,500)}else{gm.input.reset()}}};gm.detectingSelectAll=setTimeout(gt,200)}}if(dK&&k>=9){gi()}if(f7){er(gk);var gh=function(){ed(window,"mouseup",gh);setTimeout(gn,20)};bX(window,"mouseup",gh)}else{setTimeout(gn,50)}},setUneditable:fU,needsContentAttribute:false},Y.prototype);function dv(gf){this.cm=gf;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new ge();this.gracePeriod=false}dv.prototype=aN({init:function(gi){var gh=this,gf=gh.cm;var gj=gh.div=gi.lineDiv;gj.contentEditable="true";fP(gj);bX(gj,"paste",function(gl){var gk=gl.clipboardData&&gl.clipboardData.getData("text/plain");if(gk){gl.preventDefault();gf.replaceSelection(gk,null,"paste")}});bX(gj,"compositionstart",function(go){var gn=go.data;gh.composing={sel:gf.doc.sel,data:gn,startData:gn};if(!gn){return}var gl=gf.doc.sel.primary();var gk=gf.getLine(gl.head.line);var gm=gk.indexOf(gn,Math.max(0,gl.head.ch-gn.length));if(gm>-1&&gm<=gl.head.ch){gh.composing.sel=eS(W(gl.head.line,gm),W(gl.head.line,gm+gn.length))}});bX(gj,"compositionupdate",function(gk){gh.composing.data=gk.data});bX(gj,"compositionend",function(gl){var gk=gh.composing;if(!gk){return}if(gl.data!=gk.startData&&!/\u200b/.test(gl.data)){gk.data=gl.data}setTimeout(function(){if(!gk.handled){gh.applyComposition(gk)}if(gh.composing==gk){gh.composing=null}},50)});bX(gj,"touchstart",function(){gh.forceCompositionEnd()});bX(gj,"input",function(){if(gh.composing){return}if(!gh.pollContent()){cM(gh.cm,function(){ah(gf)})}});function gg(gn){if(gf.somethingSelected()){bm=gf.getSelections();if(gn.type=="cut"){gf.replaceSelection("",null,"cut")}}else{var gl=dj(gf);bm=gl.text;if(gn.type=="cut"){gf.operation(function(){gf.setSelections(gl.ranges,0,Z);gf.replaceSelection("",null,"cut")})}}if(gn.clipboardData&&!e1){gn.preventDefault();gn.clipboardData.clearData();gn.clipboardData.setData("text/plain",bm.join("\n"))}else{var gm=aX(),go=gm.firstChild;gf.display.lineSpace.insertBefore(gm,gf.display.lineSpace.firstChild);go.value=bm.join("\n");var gk=document.activeElement;dL(go);setTimeout(function(){gf.display.lineSpace.removeChild(gm);gk.focus()},50)}}bX(gj,"copy",gg);bX(gj,"cut",gg)},prepareSelection:function(){var gf=fI(this.cm,false);gf.focus=this.cm.state.focused;return gf},showSelection:function(gf){if(!gf||!this.cm.display.view.length){return}if(gf.focus){this.showPrimarySelection()}this.showMultipleSelections(gf)},showPrimarySelection:function(){var gj=window.getSelection(),gm=this.cm.doc.sel.primary();var gk=az(this.cm,gj.anchorNode,gj.anchorOffset);var go=az(this.cm,gj.focusNode,gj.focusOffset);if(gk&&!gk.bad&&go&&!go.bad&&cf(ar(gk,go),gm.from())==0&&cf(bx(gk,go),gm.to())==0){return}var gi=cz(this.cm,gm.from());var gn=cz(this.cm,gm.to());if(!gi&&!gn){return}var gq=this.cm.display.view;var gl=gj.rangeCount&&gj.getRangeAt(0);if(!gi){gi={node:gq[0].measure.map[2],offset:0}}else{if(!gn){var gh=gq[gq.length-1].measure;var gg=gh.maps?gh.maps[gh.maps.length-1]:gh.map;gn={node:gg[gg.length-1],offset:gg[gg.length-2]-gg[gg.length-3]}}}try{var gf=cl(gi.node,gi.offset,gn.offset,gn.node)}catch(gp){}if(gf){gj.removeAllRanges();gj.addRange(gf);if(gl&&gj.anchorNode==null){gj.addRange(gl)}else{if(co){this.startGracePeriod()}}}this.rememberSelection()},startGracePeriod:function(){var gf=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){gf.gracePeriod=false;if(gf.selectionChanged()){gf.cm.operation(function(){gf.cm.curOp.selectionChanged=true})}},20)},showMultipleSelections:function(gf){bR(this.cm.display.cursorDiv,gf.cursors);bR(this.cm.display.selectionDiv,gf.selection)},rememberSelection:function(){var gf=window.getSelection();this.lastAnchorNode=gf.anchorNode;this.lastAnchorOffset=gf.anchorOffset;this.lastFocusNode=gf.focusNode;this.lastFocusOffset=gf.focusOffset},selectionInEditor:function(){var gg=window.getSelection();if(!gg.rangeCount){return false}var gf=gg.getRangeAt(0).commonAncestorContainer;return f8(this.div,gf)},focus:function(){if(this.cm.options.readOnly!="nocursor"){this.div.focus()}},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return true},receivedFocus:function(){var gf=this;if(this.selectionInEditor()){this.pollSelection()}else{cM(this.cm,function(){gf.cm.curOp.selectionChanged=true})}function gg(){if(gf.cm.state.focused){gf.pollSelection();gf.polling.set(gf.cm.options.pollInterval,gg)}}this.polling.set(this.cm.options.pollInterval,gg)},selectionChanged:function(){var gf=window.getSelection();return gf.anchorNode!=this.lastAnchorNode||gf.anchorOffset!=this.lastAnchorOffset||gf.focusNode!=this.lastFocusNode||gf.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var gi=window.getSelection(),gf=this.cm;this.rememberSelection();var gg=az(gf,gi.anchorNode,gi.anchorOffset);var gh=az(gf,gi.focusNode,gi.focusOffset);if(gg&&gh){cM(gf,function(){bU(gf.doc,eS(gg,gh),Z);if(gg.bad||gh.bad){gf.curOp.selectionChanged=true}})}}},pollContent:function(){var gp=this.cm,gz=gp.display,gx=gp.doc.sel.primary();var gy=gx.from(),gj=gx.to();if(gy.line<gz.viewFrom||gj.line>gz.viewTo-1){return false}var gm;if(gy.line==gz.viewFrom||(gm=dr(gp,gy.line))==0){var gk=bN(gz.view[0].line);var go=gz.view[0].node}else{var gk=bN(gz.view[gm].line);var go=gz.view[gm-1].node.nextSibling}var gw=dr(gp,gj.line);if(gw==gz.view.length-1){var gr=gz.viewTo-1;var gu=gz.view[gw].node}else{var gr=bN(gz.view[gw+1].line)-1;var gu=gz.view[gw+1].node.previousSibling}var gA=a1(fY(gp,go,gu,gk,gr));var gt=f2(gp.doc,W(gk,0),W(gr,ff(gp.doc,gr).text.length));while(gA.length>1&&gt.length>1){if(fG(gA)==fG(gt)){gA.pop();gt.pop();gr--}else{if(gA[0]==gt[0]){gA.shift();gt.shift();gk++}else{break}}}var gv=0,gh=0;var gq=gA[0],gg=gt[0],gf=Math.min(gq.length,gg.length);while(gv<gf&&gq.charCodeAt(gv)==gg.charCodeAt(gv)){++gv}var gn=fG(gA),gB=fG(gt);var gi=Math.min(gn.length-(gA.length==1?gv:0),gB.length-(gt.length==1?gv:0));while(gh<gi&&gn.charCodeAt(gn.length-gh-1)==gB.charCodeAt(gB.length-gh-1)){++gh}gA[gA.length-1]=gn.slice(0,gn.length-gh);gA[0]=gA[0].slice(gv);var gl=W(gk,gv);var gs=W(gr,gt.length?fG(gt).length-gh:0);if(gA.length>1||gA[0]||cf(gl,gs)){a2(gp.doc,gA,gl,gs,"+input");return true}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){if(!this.composing||this.composing.handled){return}this.applyComposition(this.composing);this.composing.handled=true;this.div.blur();this.div.focus()},applyComposition:function(gf){if(gf.data&&gf.data!=gf.startData){c2(this.cm,fX)(this.cm,gf.data,0,gf.sel)}},setUneditable:function(gf){gf.setAttribute("contenteditable","false")},onKeyPress:function(gf){gf.preventDefault();c2(this.cm,fX)(this.cm,String.fromCharCode(gf.charCode==null?gf.keyCode:gf.charCode),0)},onContextMenu:fU,resetPosition:fU,needsContentAttribute:true},dv.prototype);function cz(gl,gj){var gk=fb(gl,gj.line);if(!gk||gk.hidden){return null}var gn=ff(gl.doc,gj.line);var gg=ct(gk,gn,gj.line);var gh=a(gn),gi="left";if(gh){var gf=aG(gh,gj.ch);gi=gf%2?"right":"left"}var gm=aL(gg.map,gj.ch,"left");gm.offset=gm.collapse=="right"?gm.end:gm.start;return gm}function et(gg,gf){if(gf){gg.bad=true}return gg}function az(gf,gi,gk){var gj;if(gi==gf.display.lineDiv){gj=gf.display.lineDiv.childNodes[gk];if(!gj){return et(gf.clipPos(W(gf.display.viewTo-1)),true)}gi=null;gk=0}else{for(gj=gi;;gj=gj.parentNode){if(!gj||gj==gf.display.lineDiv){return null}if(gj.parentNode&&gj.parentNode==gf.display.lineDiv){break}}}for(var gh=0;gh<gf.display.view.length;gh++){var gg=gf.display.view[gh];if(gg.node==gj){return aa(gg,gi,gk)}}}function aa(gn,gj,gl){var gh=gn.text.firstChild,gi=false;if(!gj||!f8(gh,gj)){return et(W(bN(gn.line),0),true)}if(gj==gh){gi=true;gj=gh.childNodes[gl];gl=0;if(!gj){var gt=gn.rest?fG(gn.rest):gn.line;return et(W(bN(gt),gt.text.length),gi)}}var gk=gj.nodeType==3?gj:null,gr=gj;if(!gk&&gj.childNodes.length==1&&gj.firstChild.nodeType==3){gk=gj.firstChild;if(gl){gl=gk.nodeValue.length}}while(gr.parentNode!=gh){gr=gr.parentNode}var gg=gn.measure,gp=gg.maps;function gm(gw,gB,gy){for(var gA=-1;gA<(gp?gp.length:0);gA++){var gv=gA<0?gg.map:gp[gA];for(var gz=0;gz<gv.length;gz+=3){var gx=gv[gz+2];if(gx==gw||gx==gB){var gC=bN(gA<0?gn.line:gn.rest[gA]);var gu=gv[gz]+gy;if(gy<0||gx!=gw){gu=gv[gz+(gy?1:0)]}return W(gC,gu)}}}}var gs=gm(gk,gr,gl);if(gs){return et(gs,gi)}for(var gf=gr.nextSibling,go=gk?gk.nodeValue.length-gl:0;gf;gf=gf.nextSibling){gs=gm(gf,gf.firstChild,0);if(gs){return et(W(gs.line,gs.ch-go),gi)}else{go+=gf.textContent.length}}for(var gq=gr.previousSibling,go=gl;gq;gq=gq.previousSibling){gs=gm(gq,gq.firstChild,-1);if(gs){return et(W(gs.line,gs.ch+go),gi)}else{go+=gf.textContent.length}}}function fY(gm,gk,gl,gh,gf){var gn="",gg=false;function gi(go){return function(gp){return gp.id==go}}function gj(gs){if(gs.nodeType==1){var gp=gs.getAttribute("cm-text");if(gp!=null){if(gp==""){gp=gs.textContent.replace(/\u200b/g,"")}gn+=gp;return}var gr=gs.getAttribute("cm-marker"),go;if(gr){var gt=gm.findMarks(W(gh,0),W(gf+1,0),gi(+gr));if(gt.length&&(go=gt[0].find())){gn+=f2(gm.doc,go.from,go.to).join("\n")}return}if(gs.getAttribute("contenteditable")=="false"){return}for(var gq=0;gq<gs.childNodes.length;gq++){gj(gs.childNodes[gq])}if(/^(pre|div|p)$/i.test(gs.nodeName)){gg=true}}else{if(gs.nodeType==3){var gu=gs.nodeValue;if(!gu){return}if(gg){gn+="\n";gg=false}gn+=gu}}}for(;;){gj(gk);if(gk==gl){break}gk=gk.nextSibling}return gn}H.inputStyles={textarea:Y,contenteditable:dv};function f1(gf,gg){this.ranges=gf;this.primIndex=gg}f1.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(gf){if(gf==this){return true}if(gf.primIndex!=this.primIndex||gf.ranges.length!=this.ranges.length){return false}for(var gh=0;gh<this.ranges.length;gh++){var gg=this.ranges[gh],gi=gf.ranges[gh];if(cf(gg.anchor,gi.anchor)!=0||cf(gg.head,gi.head)!=0){return false}}return true},deepCopy:function(){for(var gf=[],gg=0;gg<this.ranges.length;gg++){gf[gg]=new dY(ci(this.ranges[gg].anchor),ci(this.ranges[gg].head))}return new f1(gf,this.primIndex)},somethingSelected:function(){for(var gf=0;gf<this.ranges.length;gf++){if(!this.ranges[gf].empty()){return true}}return false},contains:function(gi,gf){if(!gf){gf=gi}for(var gh=0;gh<this.ranges.length;gh++){var gg=this.ranges[gh];if(cf(gf,gg.from())>=0&&cf(gi,gg.to())<=0){return gh}}return -1}};function dY(gf,gg){this.anchor=gf;this.head=gg}dY.prototype={from:function(){return ar(this.anchor,this.head)},to:function(){return bx(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function cw(gf,gm){var gh=gf[gm];gf.sort(function(gp,go){return cf(gp.from(),go.from())});gm=dh(gf,gh);for(var gj=1;gj<gf.length;gj++){var gn=gf[gj],gg=gf[gj-1];if(cf(gg.to(),gn.from())>=0){var gk=ar(gg.from(),gn.from()),gl=bx(gg.to(),gn.to());var gi=gg.empty()?gn.from()==gn.head:gg.from()==gg.head;if(gj<=gm){--gm}gf.splice(--gj,2,new dY(gi?gl:gk,gi?gk:gl))}}return new f1(gf,gm)}function eS(gf,gg){return new f1([new dY(gf,gg||gf)],0)}function c5(gf,gg){return Math.max(gf.first,Math.min(gg,gf.first+gf.size-1))}function fJ(gg,gh){if(gh.line<gg.first){return W(gg.first,0)}var gf=gg.first+gg.size-1;if(gh.line>gf){return W(gf,ff(gg,gf).text.length)}return fs(gh,ff(gg,gh.line).text.length)}function fs(gh,gg){var gf=gh.ch;if(gf==null||gf>gg){return W(gh.line,gg)}else{if(gf<0){return W(gh.line,0)}else{return gh}}}function b9(gg,gf){return gf>=gg.first&&gf<gg.first+gg.size}function d0(gh,gi){for(var gf=[],gg=0;gg<gi.length;gg++){gf[gg]=fJ(gh,gi[gg])}return gf}function fv(gk,gg,gj,gf){if(gk.cm&&gk.cm.display.shift||gk.extend){var gi=gg.anchor;if(gf){var gh=cf(gj,gi)<0;if(gh!=(cf(gf,gi)<0)){gi=gj;gj=gf}else{if(gh!=(cf(gj,gf)<0)){gj=gf}}}return new dY(gi,gj)}else{return new dY(gf||gj,gj)}}function fV(gi,gh,gf,gg){bU(gi,new f1([fv(gi,gi.sel.primary(),gh,gf)],0),gg)}function aw(gk,gj,gh){for(var gg=[],gi=0;gi<gk.sel.ranges.length;gi++){gg[gi]=fv(gk,gk.sel.ranges[gi],gj[gi],null)}var gf=cw(gg,gk.sel.primIndex);bU(gk,gf,gh)}function e(gj,gi,gg,gh){var gf=gj.sel.ranges.slice(0);gf[gi]=gg;bU(gj,cw(gf,gj.sel.primIndex),gh)}function F(gi,gg,gh,gf){bU(gi,eS(gg,gh),gf)}function c(gh,gf){var gg={ranges:gf.ranges,update:function(gi){this.ranges=[];for(var gj=0;gj<gi.length;gj++){this.ranges[gj]=new dY(fJ(gh,gi[gj].anchor),fJ(gh,gi[gj].head))}}};aE(gh,"beforeSelectionChange",gh,gg);if(gh.cm){aE(gh.cm,"beforeSelectionChange",gh.cm,gg)}if(gg.ranges!=gf.ranges){return cw(gg.ranges,gg.ranges.length-1)}else{return gf}}function e7(gj,gi,gg){var gf=gj.history.done,gh=fG(gf);if(gh&&gh.ranges){gf[gf.length-1]=gi;ep(gj,gi,gg)}else{bU(gj,gi,gg)}}function bU(gh,gg,gf){ep(gh,gg,gf);f9(gh,gh.sel,gh.cm?gh.cm.curOp.id:NaN,gf)}function ep(gi,gh,gg){if(fi(gi,"beforeSelectionChange")||gi.cm&&fi(gi.cm,"beforeSelectionChange")){gh=c(gi,gh)}var gf=gg&&gg.bias||(cf(gh.primary().head,gi.sel.primary().head)<0?-1:1);c9(gi,n(gi,gh,gf,true));if(!(gg&&gg.scroll===false)&&gi.cm){fF(gi.cm)}}function c9(gg,gf){if(gf.equals(gg.sel)){return}gg.sel=gf;if(gg.cm){gg.cm.curOp.updateInput=gg.cm.curOp.selectionChanged=true;V(gg.cm)}ae(gg,"cursorActivity",gg)}function ey(gf){c9(gf,n(gf,gf.sel,null,false),Z)}function n(gn,gf,gk,gl){var gh;for(var gi=0;gi<gf.ranges.length;gi++){var gj=gf.ranges[gi];var gm=bV(gn,gj.anchor,gk,gl);var gg=bV(gn,gj.head,gk,gl);if(gh||gm!=gj.anchor||gg!=gj.head){if(!gh){gh=gf.ranges.slice(0,gi)}gh[gi]=new dY(gm,gg)}}return gh?cw(gh,gf.primIndex):gf}function bV(go,gn,gk,gl){var gp=false,gh=gn;var gi=gk||1;go.cantEdit=false;search:for(;;){var gq=ff(go,gh.line);if(gq.markedSpans){for(var gj=0;gj<gq.markedSpans.length;++gj){var gf=gq.markedSpans[gj],gg=gf.marker;if((gf.from==null||(gg.inclusiveLeft?gf.from<=gh.ch:gf.from<gh.ch))&&(gf.to==null||(gg.inclusiveRight?gf.to>=gh.ch:gf.to>gh.ch))){if(gl){aE(gg,"beforeCursorEnter");if(gg.explicitlyCleared){if(!gq.markedSpans){break}else{--gj;continue}}}if(!gg.atomic){continue}var gm=gg.find(gi<0?-1:1);if(cf(gm,gh)==0){gm.ch+=gi;if(gm.ch<0){if(gm.line>go.first){gm=fJ(go,W(gm.line-1))}else{gm=null}}else{if(gm.ch>gq.text.length){if(gm.line<go.first+go.size-1){gm=W(gm.line+1,0)}else{gm=null}}}if(!gm){if(gp){if(!gl){return bV(go,gn,gk,true)}go.cantEdit=true;return W(go.first,0)}gp=true;gm=gn;gi=-gi}}gh=gm;continue search}}}return gh}}function bC(gf){gf.display.input.showSelection(gf.display.input.prepareSelection())}function fI(gm,gf){var gl=gm.doc,gn={};var gk=gn.cursors=document.createDocumentFragment();var gg=gn.selection=document.createDocumentFragment();for(var gi=0;gi<gl.sel.ranges.length;gi++){if(gf===false&&gi==gl.sel.primIndex){continue}var gj=gl.sel.ranges[gi];var gh=gj.empty();if(gh||gm.options.showCursorWhenSelecting){A(gm,gj,gk)}if(!gh){bD(gm,gj,gg)}}return gn}function A(gf,gi,gh){var gk=dU(gf,gi.head,"div",null,null,!gf.options.singleCursorHeightPerLine);var gj=gh.appendChild(f0("div","\u00a0","CodeMirror-cursor"));gj.style.left=gk.left+"px";gj.style.top=gk.top+"px";gj.style.height=Math.max(0,gk.bottom-gk.top)*gf.options.cursorHeight+"px";if(gk.other){var gg=gh.appendChild(f0("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));gg.style.display="";gg.style.left=gk.other.left+"px";gg.style.top=gk.other.top+"px";gg.style.height=(gk.other.bottom-gk.other.top)*0.85+"px"}}function bD(gj,gp,gk){var gs=gj.display,gw=gj.doc;var gf=document.createDocumentFragment();var go=e5(gj.display),gi=go.left;var gt=Math.max(gs.sizerWidth,dl(gj)-gs.sizer.offsetLeft)-go.right;function gq(gA,gz,gy,gx){if(gz<0){gz=0}gz=Math.round(gz);gx=Math.round(gx);gf.appendChild(f0("div",null,"CodeMirror-selected","position: absolute; left: "+gA+"px; top: "+gz+"px; width: "+(gy==null?gt-gA:gy)+"px; height: "+(gx-gz)+"px"))}function gg(gy,gA,gD){var gz=ff(gw,gy);var gB=gz.text.length;var gE,gx;function gC(gG,gF){return cJ(gj,W(gy,gG),"div",gz,gF)}d4(a(gz),gA||0,gD==null?gB:gD,function(gM,gL,gF){var gI=gC(gM,"left"),gJ,gK,gH;if(gM==gL){gJ=gI;gK=gH=gI.left}else{gJ=gC(gL-1,"right");if(gF=="rtl"){var gG=gI;gI=gJ;gJ=gG}gK=gI.left;gH=gJ.right}if(gA==null&&gM==0){gK=gi}if(gJ.top-gI.top>3){gq(gK,gI.top,null,gI.bottom);gK=gi;if(gI.bottom<gJ.top){gq(gK,gI.bottom,null,gJ.top)}}if(gD==null&&gL==gB){gH=gt}if(!gE||gI.top<gE.top||gI.top==gE.top&&gI.left<gE.left){gE=gI}if(!gx||gJ.bottom>gx.bottom||gJ.bottom==gx.bottom&&gJ.right>gx.right){gx=gJ}if(gK<gi+1){gK=gi}gq(gK,gJ.top,gH-gK,gJ.bottom)});return{start:gE,end:gx}}var gv=gp.from(),gu=gp.to();if(gv.line==gu.line){gg(gv.line,gv.ch,gu.ch)}else{var gh=ff(gw,gv.line),gm=ff(gw,gu.line);var gl=y(gh)==y(gm);var gn=gg(gv.line,gv.ch,gl?gh.text.length+1:null).end;var gr=gg(gu.line,gl?0:null,gu.ch).start;if(gl){if(gn.top<gr.top-2){gq(gn.right,gn.top,null,gn.bottom);gq(gi,gr.top,gr.left,gr.bottom)}else{gq(gn.right,gn.top,gr.left-gn.right,gn.bottom)}}if(gn.bottom<gr.top){gq(gi,gn.bottom,null,gr.top)}}gk.appendChild(gf)}function o(gf){if(!gf.state.focused){return}var gh=gf.display;clearInterval(gh.blinker);var gg=true;gh.cursorDiv.style.visibility="";if(gf.options.cursorBlinkRate>0){gh.blinker=setInterval(function(){gh.cursorDiv.style.visibility=(gg=!gg)?"":"hidden"},gf.options.cursorBlinkRate)}else{if(gf.options.cursorBlinkRate<0){gh.cursorDiv.style.visibility="hidden"}}}function ef(gf,gg){if(gf.doc.mode.startState&&gf.doc.frontier<gf.display.viewTo){gf.state.highlight.set(gg,cv(cP,gf))}}function cP(gf){var gj=gf.doc;if(gj.frontier<gj.first){gj.frontier=gj.first}if(gj.frontier>=gf.display.viewTo){return}var gh=+new Date+gf.options.workTime;var gi=b3(gj.mode,dC(gf,gj.frontier));var gg=[];gj.iter(gj.frontier,Math.min(gj.first+gj.size,gf.display.viewTo+500),function(gk){if(gj.frontier>=gf.display.viewFrom){var gn=gk.styles;var gp=fz(gf,gk,gi,true);gk.styles=gp.styles;var gm=gk.styleClasses,go=gp.classes;if(go){gk.styleClasses=go}else{if(gm){gk.styleClasses=null}}var gq=!gn||gn.length!=gk.styles.length||gm!=go&&(!gm||!go||gm.bgClass!=go.bgClass||gm.textClass!=go.textClass);for(var gl=0;!gq&&gl<gn.length;++gl){gq=gn[gl]!=gk.styles[gl]}if(gq){gg.push(gj.frontier)}gk.stateAfter=b3(gj.mode,gi)}else{dx(gf,gk.text,gi);gk.stateAfter=gj.frontier%5==0?b3(gj.mode,gi):null}++gj.frontier;if(+new Date>gh){ef(gf,gf.options.workDelay);return true}});if(gg.length){cM(gf,function(){for(var gk=0;gk<gg.length;gk++){R(gf,gg[gk],"text")}})}}function cy(gl,gf,gi){var gg,gj,gk=gl.doc;var gh=gi?-1:gf-(gl.doc.mode.innerMode?1000:100);for(var go=gf;go>gh;--go){if(go<=gk.first){return gk.first}var gn=ff(gk,go-1);if(gn.stateAfter&&(!gi||go<=gk.frontier)){return go}var gm=bT(gn.text,null,gl.options.tabSize);if(gj==null||gg>gm){gj=go-1;gg=gm}}return gj}function dC(gf,gl,gg){var gj=gf.doc,gi=gf.display;if(!gj.mode.startState){return true}var gk=cy(gf,gl,gg),gh=gk>gj.first&&ff(gj,gk-1).stateAfter;if(!gh){gh=b0(gj.mode)}else{gh=b3(gj.mode,gh)}gj.iter(gk,gl,function(gm){dx(gf,gm.text,gh);var gn=gk==gl-1||gk%5==0||gk>=gi.viewFrom&&gk<gi.viewTo;gm.stateAfter=gn?b3(gj.mode,gh):null;++gk});if(gg){gj.frontier=gk}return gh}function e8(gf){return gf.lineSpace.offsetTop}function bI(gf){return gf.mover.offsetHeight-gf.lineSpace.offsetHeight}function e5(gi){if(gi.cachedPaddingH){return gi.cachedPaddingH}var gh=bR(gi.measure,f0("pre","x"));var gf=window.getComputedStyle?window.getComputedStyle(gh):gh.currentStyle;var gg={left:parseInt(gf.paddingLeft),right:parseInt(gf.paddingRight)};if(!isNaN(gg.left)&&!isNaN(gg.right)){gi.cachedPaddingH=gg}return gg}function cT(gf){return dJ-gf.display.nativeBarWidth}function dl(gf){return gf.display.scroller.clientWidth-cT(gf)-gf.display.barWidth}function cV(gf){return gf.display.scroller.clientHeight-cT(gf)-gf.display.barHeight}function ch(gm,gi,gl){var gh=gm.options.lineWrapping;var gj=gh&&dl(gm);if(!gi.measure.heights||gh&&gi.measure.width!=gj){var gk=gi.measure.heights=[];if(gh){gi.measure.width=gj;var go=gi.text.firstChild.getClientRects();for(var gf=0;gf<go.length-1;gf++){var gn=go[gf],gg=go[gf+1];if(Math.abs(gn.bottom-gg.bottom)>2){gk.push((gn.bottom+gg.top)/2-gl.top)}}}gk.push(gl.bottom-gl.top)}}function ct(gh,gf,gi){if(gh.line==gf){return{map:gh.measure.map,cache:gh.measure.cache}}for(var gg=0;gg<gh.rest.length;gg++){if(gh.rest[gg]==gf){return{map:gh.measure.maps[gg],cache:gh.measure.caches[gg]}}}for(var gg=0;gg<gh.rest.length;gg++){if(bN(gh.rest[gg])>gi){return{map:gh.measure.maps[gg],cache:gh.measure.caches[gg],before:true}}}}function c1(gf,gh){gh=y(gh);var gj=bN(gh);var gg=gf.display.externalMeasured=new bv(gf.doc,gh,gj);gg.lineN=gj;var gi=gg.built=eR(gf,gg);gg.text=gi.pre;bR(gf.display.lineMeasure,gi.pre);return gg}function eh(gf,gg,gi,gh){return C(gf,a5(gf,gg),gi,gh)}function fb(gf,gh){if(gh>=gf.display.viewFrom&&gh<gf.display.viewTo){return gf.display.view[dr(gf,gh)]}var gg=gf.display.externalMeasured;if(gg&&gh>=gg.lineN&&gh<gg.lineN+gg.size){return gg}}function a5(gf,gh){var gi=bN(gh);var gg=fb(gf,gi);if(gg&&!gg.text){gg=null}else{if(gg&&gg.changes){ab(gf,gg,gi,fd(gf))}}if(!gg){gg=c1(gf,gh)}var gj=ct(gg,gh,gi);return{line:gh,view:gg,rect:null,map:gj.map,cache:gj.cache,before:gj.before,hasHeights:false}}function C(gf,gl,gj,gg,gi){if(gl.before){gj=-1}var gh=gj+(gg||""),gk;if(gl.cache.hasOwnProperty(gh)){gk=gl.cache[gh]}else{if(!gl.rect){gl.rect=gl.view.text.getBoundingClientRect()}if(!gl.hasHeights){ch(gf,gl.view,gl.rect);gl.hasHeights=true}gk=j(gf,gl,gj,gg);if(!gk.bogus){gl.cache[gh]=gk}}return{left:gk.left,right:gk.right,top:gi?gk.rtop:gk.top,bottom:gi?gk.rbottom:gk.bottom}}var eB={left:0,right:0,top:0,bottom:0};function aL(gg,gf,gm){var gi,gh,gk,gn;for(var gl=0;gl<gg.length;gl+=3){var gj=gg[gl],go=gg[gl+1];if(gf<gj){gh=0;gk=1;gn="left"}else{if(gf<go){gh=gf-gj;gk=gh+1}else{if(gl==gg.length-3||gf==go&&gg[gl+3]>gf){gk=go-gj;gh=gk-1;if(gf>=go){gn="right"}}}}if(gh!=null){gi=gg[gl+2];if(gj==go&&gm==(gi.insertLeft?"left":"right")){gn=gm}if(gm=="left"&&gh==0){while(gl&&gg[gl-2]==gg[gl-3]&&gg[gl-1].insertLeft){gi=gg[(gl-=3)+2];gn="left"}}if(gm=="right"&&gh==go-gj){while(gl<gg.length-3&&gg[gl+3]==gg[gl+4]&&!gg[gl+5].insertLeft){gi=gg[(gl+=3)+2];gn="right"}}break}}return{node:gi,start:gh,end:gk,collapse:gn,coverStart:gj,coverEnd:go}}function j(gm,gw,gp,gk){var gn=aL(gw.map,gp,gk);var gu=gn.node,gj=gn.start,gi=gn.end,gf=gn.collapse;var gg;if(gu.nodeType==3){for(var gv=0;gv<4;gv++){while(gj&&fp(gw.line.text.charAt(gn.coverStart+gj))){--gj}while(gn.coverStart+gi<gn.coverEnd&&fp(gw.line.text.charAt(gn.coverStart+gi))){++gi}if(dK&&k<9&&gj==0&&gi==gn.coverEnd-gn.coverStart){gg=gu.parentNode.getBoundingClientRect()}else{if(dK&&gm.options.lineWrapping){var gh=cl(gu,gj,gi).getClientRects();if(gh.length){gg=gh[gk=="right"?gh.length-1:0]}else{gg=eB}}else{gg=cl(gu,gj,gi).getBoundingClientRect()||eB}}if(gg.left||gg.right||gj==0){break}gi=gj;gj=gj-1;gf="right"}if(dK&&k<11){gg=eN(gm.display.measure,gg)}}else{if(gj>0){gf=gk="right"}var gh;if(gm.options.lineWrapping&&(gh=gu.getClientRects()).length>1){gg=gh[gk=="right"?gh.length-1:0]}else{gg=gu.getBoundingClientRect()}}if(dK&&k<9&&!gj&&(!gg||!gg.left&&!gg.right)){var gl=gu.parentNode.getClientRects()[0];if(gl){gg={left:gl.left,right:gl.left+dD(gm.display),top:gl.top,bottom:gl.bottom}}else{gg=eB}}var gs=gg.top-gw.rect.top,gq=gg.bottom-gw.rect.top;var gy=(gs+gq)/2;var gx=gw.view.measure.heights;for(var gv=0;gv<gx.length-1;gv++){if(gy<gx[gv]){break}}var gt=gv?gx[gv-1]:0,gr=gx[gv];var go={left:(gf=="right"?gg.right:gg.left)-gw.rect.left,right:(gf=="left"?gg.left:gg.right)-gw.rect.left,top:gt,bottom:gr};if(!gg.left&&!gg.right){go.bogus=true}if(!gm.options.singleCursorHeightPerLine){go.rtop=gs;go.rbottom=gq}return go}function eN(gh,gi){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aK(gh)){return gi}var gg=screen.logicalXDPI/screen.deviceXDPI;var gf=screen.logicalYDPI/screen.deviceYDPI;return{left:gi.left*gg,right:gi.right*gg,top:gi.top*gf,bottom:gi.bottom*gf}}function au(gg){if(gg.measure){gg.measure.cache={};gg.measure.heights=null;if(gg.rest){for(var gf=0;gf<gg.rest.length;gf++){gg.measure.caches[gf]={}}}}}function aO(gf){gf.display.externalMeasure=null;d1(gf.display.lineMeasure);for(var gg=0;gg<gf.display.view.length;gg++){au(gf.display.view[gg])}}function ak(gf){aO(gf);gf.display.cachedCharWidth=gf.display.cachedTextHeight=gf.display.cachedPaddingH=null;if(!gf.options.lineWrapping){gf.display.maxLineChanged=true}gf.display.lineNumChars=null}function cu(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cs(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function eQ(gl,gi,gk,gg){if(gi.widgets){for(var gh=0;gh<gi.widgets.length;++gh){if(gi.widgets[gh].above){var gn=cY(gi.widgets[gh]);gk.top+=gn;gk.bottom+=gn}}}if(gg=="line"){return gk}if(!gg){gg="local"}var gj=bM(gi);if(gg=="local"){gj+=e8(gl.display)}else{gj-=gl.display.viewOffset}if(gg=="page"||gg=="window"){var gf=gl.display.lineSpace.getBoundingClientRect();gj+=gf.top+(gg=="window"?0:cs());var gm=gf.left+(gg=="window"?0:cu());gk.left+=gm;gk.right+=gm}gk.top+=gj;gk.bottom+=gj;return gk}function gc(gg,gj,gh){if(gh=="div"){return gj}var gl=gj.left,gk=gj.top;if(gh=="page"){gl-=cu();gk-=cs()}else{if(gh=="local"||!gh){var gi=gg.display.sizer.getBoundingClientRect();gl+=gi.left;gk+=gi.top}}var gf=gg.display.lineSpace.getBoundingClientRect();return{left:gl-gf.left,top:gk-gf.top}}function cJ(gf,gj,gi,gh,gg){if(!gh){gh=ff(gf.doc,gj.line)}return eQ(gf,gh,eh(gf,gh,gj.ch,gg),gi)}function dU(go,gn,gh,gl,gq,gm){gl=gl||ff(go.doc,gn.line);if(!gq){gq=a5(go,gl)}function gj(gt,gs){var gr=C(go,gq,gt,gs?"right":"left",gm);if(gs){gr.left=gr.right}else{gr.right=gr.left}return eQ(go,gl,gr,gh)}function gp(gu,gr){var gs=gk[gr],gt=gs.level%2;if(gu==dy(gs)&&gr&&gs.level<gk[gr-1].level){gs=gk[--gr];gu=gb(gs)-(gs.level%2?0:1);gt=true}else{if(gu==gb(gs)&&gr<gk.length-1&&gs.level<gk[gr+1].level){gs=gk[++gr];gu=dy(gs)-gs.level%2;gt=false}}if(gt&&gu==gs.to&&gu>gs.from){return gj(gu-1)}return gj(gu,gt)}var gk=a(gl),gf=gn.ch;if(!gk){return gj(gf)}var gg=aG(gk,gf);var gi=gp(gf,gg);if(e2!=null){gi.other=gp(gf,e2)}return gi}function dH(gf,gj){var gi=0,gj=fJ(gf.doc,gj);if(!gf.options.lineWrapping){gi=dD(gf.display)*gj.ch}var gg=ff(gf.doc,gj.line);var gh=bM(gg)+e8(gf.display);return{left:gi,right:gi,top:gh,bottom:gh+gg.height}}function fZ(gf,gg,gh,gj){var gi=W(gf,gg);gi.xRel=gj;if(gh){gi.outside=true}return gi}function fO(gm,gj,gi){var gl=gm.doc;gi+=gm.display.viewOffset;if(gi<0){return fZ(gl.first,0,true,-1)}var gh=bG(gl,gi),gn=gl.first+gl.size-1;if(gh>gn){return fZ(gl.first+gl.size-1,ff(gl,gn).text.length,true,1)}if(gj<0){gj=0}var gg=ff(gl,gh);for(;;){var go=cZ(gm,gg,gh,gj,gi);var gk=ew(gg);var gf=gk&&gk.find(0,true);if(gk&&(go.ch>gf.from.ch||go.ch==gf.from.ch&&go.xRel>0)){gh=bN(gg=gf.to.line)}else{return go}}}function cZ(gp,gh,gs,gr,gq){var go=gq-bM(gh);var gl=false,gy=2*gp.display.wrapper.clientWidth;var gv=a5(gp,gh);function gC(gE){var gF=dU(gp,W(gs,gE),"line",gh,gv);gl=true;if(go>gF.bottom){return gF.left-gy}else{if(go<gF.top){return gF.left+gy}else{gl=false}}return gF.left}var gu=a(gh),gx=gh.text.length;var gz=cE(gh),gi=cS(gh);var gw=gC(gz),gf=gl,gg=gC(gi),gk=gl;if(gr>gg){return fZ(gs,gi,gk,1)}for(;;){if(gu?gi==gz||gi==u(gh,gz,1):gi-gz<=1){var gt=gr<gw||gr-gw<=gg-gr?gz:gi;var gB=gr-(gt==gz?gw:gg);while(fp(gh.text.charAt(gt))){++gt}var gn=fZ(gs,gt,gt==gz?gf:gk,gB<-1?-1:gB>1?1:0);return gn}var gm=Math.ceil(gx/2),gD=gz+gm;if(gu){gD=gz;for(var gA=0;gA<gm;++gA){gD=u(gh,gD,1)}}var gj=gC(gD);if(gj>gr){gi=gD;gg=gj;if(gk=gl){gg+=1000}gx=gm}else{gz=gD;gw=gj;gf=gl;gx-=gm}}}var aH;function aY(gh){if(gh.cachedTextHeight!=null){return gh.cachedTextHeight}if(aH==null){aH=f0("pre");for(var gg=0;gg<49;++gg){aH.appendChild(document.createTextNode("x"));aH.appendChild(f0("br"))}aH.appendChild(document.createTextNode("x"))}bR(gh.measure,aH);var gf=aH.offsetHeight/50;if(gf>3){gh.cachedTextHeight=gf}d1(gh.measure);return gf||1}function dD(gj){if(gj.cachedCharWidth!=null){return gj.cachedCharWidth}var gf=f0("span","xxxxxxxxxx");var gi=f0("pre",[gf]);bR(gj.measure,gi);var gh=gf.getBoundingClientRect(),gg=(gh.right-gh.left)/10;if(gg>2){gj.cachedCharWidth=gg}return gg||10}var bp=null;var d8=0;function cI(gf){gf.curOp={cm:gf,viewChanged:false,startHeight:gf.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++d8};if(bp){bp.ops.push(gf.curOp)}else{gf.curOp.ownsGroup=bp={ops:[gf.curOp],delayedCallbacks:[]}}}function cU(gi){var gh=gi.delayedCallbacks,gg=0;do{for(;gg<gh.length;gg++){gh[gg]()}for(var gf=0;gf<gi.ops.length;gf++){var gj=gi.ops[gf];if(gj.cursorActivityHandlers){while(gj.cursorActivityCalled<gj.cursorActivityHandlers.length){gj.cursorActivityHandlers[gj.cursorActivityCalled++](gj.cm)}}}}while(gg<gh.length)}function am(gf){var gi=gf.curOp,gh=gi.ownsGroup;if(!gh){return}try{cU(gh)}finally{bp=null;for(var gg=0;gg<gh.ops.length;gg++){gh.ops[gg].cm.curOp=null}cK(gh)}}function cK(gh){var gg=gh.ops;for(var gf=0;gf<gg.length;gf++){b5(gg[gf])}for(var gf=0;gf<gg.length;gf++){aq(gg[gf])}for(var gf=0;gf<gg.length;gf++){b2(gg[gf])}for(var gf=0;gf<gg.length;gf++){ap(gg[gf])}for(var gf=0;gf<gg.length;gf++){e0(gg[gf])}}function b5(gh){var gf=gh.cm,gg=gf.display;J(gf);if(gh.updateMaxLine){g(gf)}gh.mustUpdate=gh.viewChanged||gh.forceUpdate||gh.scrollTop!=null||gh.scrollToPos&&(gh.scrollToPos.from.line<gg.viewFrom||gh.scrollToPos.to.line>=gg.viewTo)||gg.maxLineChanged&&gf.options.lineWrapping;gh.update=gh.mustUpdate&&new aI(gf,gh.mustUpdate&&{top:gh.scrollTop,ensure:gh.scrollToPos},gh.forceUpdate)}function aq(gf){gf.updatedDisplay=gf.mustUpdate&&B(gf.cm,gf.update)}function b2(gh){var gf=gh.cm,gg=gf.display;if(gh.updatedDisplay){ba(gf)}gh.barMeasure=dA(gf);if(gg.maxLineChanged&&!gf.options.lineWrapping){gh.adjustWidthTo=eh(gf,gg.maxLine,gg.maxLine.text.length).left+3;gf.display.sizerWidth=gh.adjustWidthTo;gh.barMeasure.scrollWidth=Math.max(gg.scroller.clientWidth,gg.sizer.offsetLeft+gh.adjustWidthTo+cT(gf)+gf.display.barWidth);gh.maxScrollLeft=Math.max(0,gg.sizer.offsetLeft+gh.adjustWidthTo-dl(gf))}if(gh.updatedDisplay||gh.selectionChanged){gh.preparedSelection=gg.input.prepareSelection()}}function ap(gg){var gf=gg.cm;if(gg.adjustWidthTo!=null){gf.display.sizer.style.minWidth=gg.adjustWidthTo+"px";if(gg.maxScrollLeft<gf.doc.scrollLeft){bE(gf,Math.min(gf.display.scroller.scrollLeft,gg.maxScrollLeft),true)}gf.display.maxLineChanged=false}if(gg.preparedSelection){gf.display.input.showSelection(gg.preparedSelection)}if(gg.updatedDisplay){dz(gf,gg.barMeasure)}if(gg.updatedDisplay||gg.startHeight!=gf.doc.height){eY(gf,gg.barMeasure)}if(gg.selectionChanged){o(gf)}if(gf.state.focused&&gg.updateInput){gf.display.input.reset(gg.typing)}}function e0(gm){var gf=gm.cm,gk=gf.display,gj=gf.doc;if(gm.updatedDisplay){cj(gf,gm.update)}if(gk.wheelStartX!=null&&(gm.scrollTop!=null||gm.scrollLeft!=null||gm.scrollToPos)){gk.wheelStartX=gk.wheelStartY=null}if(gm.scrollTop!=null&&(gk.scroller.scrollTop!=gm.scrollTop||gm.forceScroll)){gj.scrollTop=Math.max(0,Math.min(gk.scroller.scrollHeight-gk.scroller.clientHeight,gm.scrollTop));gk.scrollbars.setScrollTop(gj.scrollTop);gk.scroller.scrollTop=gj.scrollTop}if(gm.scrollLeft!=null&&(gk.scroller.scrollLeft!=gm.scrollLeft||gm.forceScroll)){gj.scrollLeft=Math.max(0,Math.min(gk.scroller.scrollWidth-dl(gf),gm.scrollLeft));gk.scrollbars.setScrollLeft(gj.scrollLeft);gk.scroller.scrollLeft=gj.scrollLeft;eE(gf)}if(gm.scrollToPos){var gi=D(gf,fJ(gj,gm.scrollToPos.from),fJ(gj,gm.scrollToPos.to),gm.scrollToPos.margin);if(gm.scrollToPos.isCursor&&gf.state.focused){d6(gf,gi)}}var gh=gm.maybeHiddenMarkers,gl=gm.maybeUnhiddenMarkers;if(gh){for(var gg=0;gg<gh.length;++gg){if(!gh[gg].lines.length){aE(gh[gg],"hide")}}}if(gl){for(var gg=0;gg<gl.length;++gg){if(gl[gg].lines.length){aE(gl[gg],"unhide")}}}if(gk.wrapper.offsetHeight){gj.scrollTop=gf.display.scroller.scrollTop}if(gm.changeObjs){aE(gf,"changes",gf,gm.changeObjs)}if(gm.update){gm.update.finish()}}function cM(gf,gg){if(gf.curOp){return gg()}cI(gf);try{return gg()}finally{am(gf)}}function c2(gf,gg){return function(){if(gf.curOp){return gg.apply(gf,arguments)}cI(gf);try{return gg.apply(gf,arguments)}finally{am(gf)}}}function c8(gf){return function(){if(this.curOp){return gf.apply(this,arguments)}cI(this);try{return gf.apply(this,arguments)}finally{am(this)}}}function cD(gf){return function(){var gg=this.cm;if(!gg||gg.curOp){return gf.apply(this,arguments)}cI(gg);try{return gf.apply(this,arguments)}finally{am(gg)}}}function bv(gh,gf,gg){this.line=gf;this.rest=h(gf);this.size=this.rest?bN(fG(this.rest))-gg+1:1;this.node=this.text=null;this.hidden=fw(gh,gf)}function eV(gf,gl,gk){var gj=[],gh;for(var gi=gl;gi<gk;gi=gh){var gg=new bv(gf.doc,ff(gf.doc,gi),gi);gh=gi+gg.size;gj.push(gg)}return gj}function ah(gm,gk,gl,gn){if(gk==null){gk=gm.doc.first}if(gl==null){gl=gm.doc.first+gm.doc.size}if(!gn){gn=0}var gh=gm.display;if(gn&&gl<gh.viewTo&&(gh.updateLineNumbers==null||gh.updateLineNumbers>gk)){gh.updateLineNumbers=gk}gm.curOp.viewChanged=true;if(gk>=gh.viewTo){if(a8&&aW(gm.doc,gk)<gh.viewTo){ex(gm)}}else{if(gl<=gh.viewFrom){if(a8&&d3(gm.doc,gl+gn)>gh.viewFrom){ex(gm)}else{gh.viewFrom+=gn;gh.viewTo+=gn}}else{if(gk<=gh.viewFrom&&gl>=gh.viewTo){ex(gm)}else{if(gk<=gh.viewFrom){var gj=de(gm,gl,gl+gn,1);if(gj){gh.view=gh.view.slice(gj.index);gh.viewFrom=gj.lineN;gh.viewTo+=gn}else{ex(gm)}}else{if(gl>=gh.viewTo){var gj=de(gm,gk,gk,-1);if(gj){gh.view=gh.view.slice(0,gj.index);gh.viewTo=gj.lineN}else{ex(gm)}}else{var gi=de(gm,gk,gk,-1);var gg=de(gm,gl,gl+gn,1);if(gi&&gg){gh.view=gh.view.slice(0,gi.index).concat(eV(gm,gi.lineN,gg.lineN)).concat(gh.view.slice(gg.index));gh.viewTo+=gn}else{ex(gm)}}}}}}var gf=gh.externalMeasured;if(gf){if(gl<gf.lineN){gf.lineN+=gn}else{if(gk<gf.lineN+gf.size){gh.externalMeasured=null}}}}function R(gg,gh,gk){gg.curOp.viewChanged=true;var gl=gg.display,gj=gg.display.externalMeasured;if(gj&&gh>=gj.lineN&&gh<gj.lineN+gj.size){gl.externalMeasured=null}if(gh<gl.viewFrom||gh>=gl.viewTo){return}var gi=gl.view[dr(gg,gh)];if(gi.node==null){return}var gf=gi.changes||(gi.changes=[]);if(dh(gf,gk)==-1){gf.push(gk)}}function ex(gf){gf.display.viewFrom=gf.display.viewTo=gf.doc.first;gf.display.view=[];gf.display.viewOffset=0}function dr(gf,gi){if(gi>=gf.display.viewTo){return null}gi-=gf.display.viewFrom;if(gi<0){return null}var gg=gf.display.view;for(var gh=0;gh<gg.length;gh++){gi-=gg[gh].size;if(gi<0){return gh}}}function de(gn,gh,gj,gg){var gk=dr(gn,gh),gm,gl=gn.display.view;if(!a8||gj==gn.doc.first+gn.doc.size){return{index:gk,lineN:gj}}for(var gi=0,gf=gn.display.viewFrom;gi<gk;gi++){gf+=gl[gi].size}if(gf!=gh){if(gg>0){if(gk==gl.length-1){return null}gm=(gf+gl[gk].size)-gh;gk++}else{gm=gf-gh}gh+=gm;gj+=gm}while(aW(gn.doc,gj)!=gj){if(gk==(gg<0?0:gl.length-1)){return null}gj+=gg*gl[gk-(gg<0?1:0)].size;gk+=gg}return{index:gk,lineN:gj}}function cR(gf,gj,gi){var gh=gf.display,gg=gh.view;if(gg.length==0||gj>=gh.viewTo||gi<=gh.viewFrom){gh.view=eV(gf,gj,gi);gh.viewFrom=gj}else{if(gh.viewFrom>gj){gh.view=eV(gf,gj,gh.viewFrom).concat(gh.view)}else{if(gh.viewFrom<gj){gh.view=gh.view.slice(dr(gf,gj))}}gh.viewFrom=gj;if(gh.viewTo<gi){gh.view=gh.view.concat(eV(gf,gh.viewTo,gi))}else{if(gh.viewTo>gi){gh.view=gh.view.slice(0,dr(gf,gi))}}}gh.viewTo=gi}function db(gf){var gg=gf.display.view,gj=0;for(var gi=0;gi<gg.length;gi++){var gh=gg[gi];if(!gh.hidden&&(!gh.node||gh.changes)){++gj}}return gj}function fQ(gm){var gj=gm.display;bX(gj.scroller,"mousedown",c2(gm,eu));if(dK&&k<11){bX(gj.scroller,"dblclick",c2(gm,function(gp){if(aR(gm,gp)){return}var gq=cn(gm,gp);if(!gq||l(gm,gp)||bb(gm.display,gp)){return}cG(gp);var go=gm.findWordAt(gq);fV(gm.doc,go.anchor,go.head)}))}else{bX(gj.scroller,"dblclick",function(go){aR(gm,go)||cG(go)})}if(!f7){bX(gj.scroller,"contextmenu",function(go){ay(gm,go)})}var gn,gg={end:0};function gi(){if(gj.activeTouch){gn=setTimeout(function(){gj.activeTouch=null},1000);gg=gj.activeTouch;gg.end=+new Date}}function gh(go){if(go.touches.length!=1){return false}var gp=go.touches[0];return gp.radiusX<=1&&gp.radiusY<=1}function gf(gr,go){if(go.left==null){return true}var gq=go.left-gr.left,gp=go.top-gr.top;return gq*gq+gp*gp>20*20}bX(gj.scroller,"touchstart",function(gp){if(!gh(gp)){clearTimeout(gn);var go=+new Date;gj.activeTouch={start:go,moved:false,prev:go-gg.end<=300?gg:null};if(gp.touches.length==1){gj.activeTouch.left=gp.touches[0].pageX;gj.activeTouch.top=gp.touches[0].pageY}}});bX(gj.scroller,"touchmove",function(){if(gj.activeTouch){gj.activeTouch.moved=true}});bX(gj.scroller,"touchend",function(gp){var gr=gj.activeTouch;if(gr&&!bb(gj,gp)&&gr.left!=null&&!gr.moved&&new Date-gr.start<300){var gq=gm.coordsChar(gj.activeTouch,"page"),go;if(!gr.prev||gf(gr,gr.prev)){go=new dY(gq,gq)}else{if(!gr.prev.prev||gf(gr,gr.prev.prev)){go=gm.findWordAt(gq)}else{go=new dY(W(gq.line,0),fJ(gm.doc,W(gq.line+1,0)))}}gm.setSelection(go.anchor,go.head);gm.focus();cG(gp)}gi()});bX(gj.scroller,"touchcancel",gi);bX(gj.scroller,"scroll",function(){if(gj.scroller.clientHeight){N(gm,gj.scroller.scrollTop);bE(gm,gj.scroller.scrollLeft,true);aE(gm,"scroll",gm)}});bX(gj.scroller,"mousewheel",function(go){b(gm,go)});bX(gj.scroller,"DOMMouseScroll",function(go){b(gm,go)});bX(gj.wrapper,"scroll",function(){gj.wrapper.scrollTop=gj.wrapper.scrollLeft=0});function gl(go){if(!aR(gm,go)){er(go)}}if(gm.options.dragDrop){bX(gj.scroller,"dragstart",function(go){Q(gm,go)});bX(gj.scroller,"dragenter",gl);bX(gj.scroller,"dragover",gl);bX(gj.scroller,"drop",c2(gm,bk))}var gk=gj.input.getField();bX(gk,"keyup",function(go){bi.call(gm,go)});bX(gk,"keydown",c2(gm,p));bX(gk,"keypress",c2(gm,cx));bX(gk,"focus",cv(cB,gm));bX(gk,"blur",cv(aV,gm))}function aT(gf){var gg=gf.display;if(gg.lastWrapHeight==gg.wrapper.clientHeight&&gg.lastWrapWidth==gg.wrapper.clientWidth){return}gg.cachedCharWidth=gg.cachedTextHeight=gg.cachedPaddingH=null;gg.scrollbarsClipped=false;gf.setSize()}function bb(gg,gf){for(var gh=L(gf);gh!=gg.wrapper;gh=gh.parentNode){if(!gh||(gh.nodeType==1&&gh.getAttribute("cm-ignore-events")=="true")||(gh.parentNode==gg.sizer&&gh!=gg.mover)){return true}}}function cn(go,gj,gg,gh){var gk=go.display;if(!gg&&L(gj).getAttribute("cm-not-content")=="true"){return null}var gn,gl,gf=gk.lineSpace.getBoundingClientRect();try{gn=gj.clientX-gf.left;gl=gj.clientY-gf.top}catch(gj){return null}var gm=fO(go,gn,gl),gp;if(gh&&gm.xRel==1&&(gp=ff(go.doc,gm.line).text).length==gm.ch){var gi=bT(gp,gp.length,go.options.tabSize)-gp.length;gm=W(gm.line,Math.max(0,Math.round((gn-e5(go.display).left)/dD(go.display))-gi))}return gm}function eu(gh){var gf=this,gg=gf.display;if(gg.activeTouch&&gg.input.supportsTouch()||aR(gf,gh)){return}gg.shift=gh.shiftKey;if(bb(gg,gh)){if(!c0){gg.scroller.draggable=false;setTimeout(function(){gg.scroller.draggable=true},100)}return}if(l(gf,gh)){return}var gi=cn(gf,gh);window.focus();switch(fN(gh)){case 1:if(gi){ax(gf,gh,gi)}else{if(L(gh)==gg.scroller){cG(gh)}}break;case 2:if(c0){gf.state.lastMiddleDown=+new Date}if(gi){fV(gf.doc,gi)}setTimeout(function(){gg.input.focus()},20);cG(gh);break;case 3:if(f7){ay(gf,gh)}else{al(gf)}break}}var dn,dd;function ax(gg,gl,gm){if(dK){setTimeout(cv(r,gg),0)}else{r(gg)}var gh=+new Date,gj;if(dd&&dd.time>gh-400&&cf(dd.pos,gm)==0){gj="triple"}else{if(dn&&dn.time>gh-400&&cf(dn.pos,gm)==0){gj="double";dd={time:gh,pos:gm}}else{gj="single";dn={time:gh,pos:gm}}}var gk=gg.doc.sel,gf=b7?gl.metaKey:gl.ctrlKey,gi;if(gg.options.dragDrop&&eL&&!aj(gg)&&gj=="single"&&(gi=gk.contains(gm))>-1&&!gk.ranges[gi].empty()){a4(gg,gl,gm,gf)}else{m(gg,gl,gm,gj,gf)}}function a4(gh,gj,gk,gg){var gi=gh.display;var gf=c2(gh,function(gl){if(c0){gi.scroller.draggable=false}gh.state.draggingText=false;ed(document,"mouseup",gf);ed(gi.scroller,"drop",gf);if(Math.abs(gj.clientX-gl.clientX)+Math.abs(gj.clientY-gl.clientY)<10){cG(gl);if(!gg){fV(gh.doc,gk)}if(c0||dK&&k==9){setTimeout(function(){document.body.focus();gi.input.focus()},20)}else{gi.input.focus()}}});if(c0){gi.scroller.draggable=true}gh.state.draggingText=gf;if(gi.scroller.dragDrop){gi.scroller.dragDrop()}bX(document,"mouseup",gf);bX(gi.scroller,"drop",gf)}function m(gj,gx,gi,gg,gl){var gu=gj.display,gz=gj.doc;cG(gx);var gh,gy,gk=gz.sel,gf=gk.ranges;if(gl&&!gx.shiftKey){gy=gz.sel.contains(gi);if(gy>-1){gh=gf[gy]}else{gh=new dY(gi,gi)}}else{gh=gz.sel.primary();gy=gz.sel.primIndex}if(gx.altKey){gg="rect";if(!gl){gh=new dY(gi,gi)}gi=cn(gj,gx,true,true);gy=-1}else{if(gg=="double"){var gv=gj.findWordAt(gi);if(gj.display.shift||gz.extend){gh=fv(gz,gh,gv.anchor,gv.head)}else{gh=gv}}else{if(gg=="triple"){var go=new dY(W(gi.line,0),fJ(gz,W(gi.line+1,0)));if(gj.display.shift||gz.extend){gh=fv(gz,gh,go.anchor,go.head)}else{gh=go}}else{gh=fv(gz,gh,gi)}}}if(!gl){gy=0;bU(gz,new f1([gh],0),M);gk=gz.sel}else{if(gy==-1){gy=gf.length;bU(gz,cw(gf.concat([gh]),gy),{scroll:false,origin:"*mouse"})}else{if(gf.length>1&&gf[gy].empty()&&gg=="single"&&!gx.shiftKey){bU(gz,cw(gf.slice(0,gy).concat(gf.slice(gy+1)),0));gk=gz.sel}else{e(gz,gy,gh,M)}}}var gt=gi;function gs(gK){if(cf(gt,gK)==0){return}gt=gK;if(gg=="rect"){var gB=[],gH=gj.options.tabSize;var gA=bT(ff(gz,gi.line).text,gi.ch,gH);var gN=bT(ff(gz,gK.line).text,gK.ch,gH);var gC=Math.min(gA,gN),gL=Math.max(gA,gN);for(var gO=Math.min(gi.line,gK.line),gE=Math.min(gj.lastLine(),Math.max(gi.line,gK.line));gO<=gE;gO++){var gM=ff(gz,gO).text,gD=eq(gM,gC,gH);if(gC==gL){gB.push(new dY(W(gO,gD),W(gO,gD)))}else{if(gM.length>gD){gB.push(new dY(W(gO,gD),W(gO,eq(gM,gL,gH))))}}}if(!gB.length){gB.push(new dY(gi,gi))}bU(gz,cw(gk.ranges.slice(0,gy).concat(gB),gy),{origin:"*mouse",scroll:false});gj.scrollIntoView(gK)}else{var gI=gh;var gF=gI.anchor,gJ=gK;if(gg!="single"){if(gg=="double"){var gG=gj.findWordAt(gK)}else{var gG=new dY(W(gK.line,0),fJ(gz,W(gK.line+1,0)))}if(cf(gG.anchor,gF)>0){gJ=gG.head;gF=ar(gI.from(),gG.anchor)}else{gJ=gG.anchor;gF=bx(gI.to(),gG.head)}}var gB=gk.ranges.slice(0);gB[gy]=new dY(fJ(gz,gF),gJ);bU(gz,cw(gB,gy),M)}}var gq=gu.wrapper.getBoundingClientRect();var gm=0;function gw(gC){var gA=++gm;var gE=cn(gj,gC,true,gg=="rect");if(!gE){return}if(cf(gE,gt)!=0){r(gj);gs(gE);var gD=b6(gu,gz);if(gE.line>=gD.to||gE.line<gD.from){setTimeout(c2(gj,function(){if(gm==gA){gw(gC)}}),150)}}else{var gB=gC.clientY<gq.top?-20:gC.clientY>gq.bottom?20:0;if(gB){setTimeout(c2(gj,function(){if(gm!=gA){return}gu.scroller.scrollTop+=gB;gw(gC)}),50)}}}function gp(gA){gm=Infinity;cG(gA);gu.input.focus();ed(document,"mousemove",gr);ed(document,"mouseup",gn);gz.history.lastSelOrigin=null}var gr=c2(gj,function(gA){if(!fN(gA)){gp(gA)}else{gw(gA)}});var gn=c2(gj,gp);bX(document,"mousemove",gr);bX(document,"mouseup",gn)}function gd(gq,gm,go,gp,gi){try{var gg=gm.clientX,gf=gm.clientY}catch(gm){return false}if(gg>=Math.floor(gq.display.gutters.getBoundingClientRect().right)){return false}if(gp){cG(gm)}var gn=gq.display;var gl=gn.lineDiv.getBoundingClientRect();if(gf>gl.bottom||!fi(gq,go)){return bL(gm)}gf-=gl.top-gn.viewOffset;for(var gj=0;gj<gq.options.gutters.length;++gj){var gk=gn.gutters.childNodes[gj];if(gk&&gk.getBoundingClientRect().right>=gg){var gr=bG(gq.doc,gf);var gh=gq.options.gutters[gj];gi(gq,go,gq,gr,gh,gm);return bL(gm)}}}function l(gf,gg){return gd(gf,gg,"gutterClick",true,ae)}var ag=0;function bk(gl){var gn=this;if(aR(gn,gl)||bb(gn.display,gl)){return}cG(gl);if(dK){ag=+new Date}var gm=cn(gn,gl,true),gf=gl.dataTransfer.files;if(!gm||aj(gn)){return}if(gf&&gf.length&&window.FileReader&&window.File){var gh=gf.length,go=Array(gh),gg=0;var gj=function(gr,gq){var gp=new FileReader;gp.onload=c2(gn,function(){go[gq]=gp.result;if(++gg==gh){gm=fJ(gn.doc,gm);var gs={from:gm,to:gm,text:a1(go.join("\n")),origin:"paste"};bg(gn.doc,gs);e7(gn.doc,eS(gm,cX(gs)))}});gp.readAsText(gr)};for(var gk=0;gk<gh;++gk){gj(gf[gk],gk)}}else{if(gn.state.draggingText&&gn.doc.sel.contains(gm)>-1){gn.state.draggingText(gl);setTimeout(function(){gn.display.input.focus()},20);return}try{var go=gl.dataTransfer.getData("Text");if(go){if(gn.state.draggingText&&!(b7?gl.metaKey:gl.ctrlKey)){var gi=gn.listSelections()}ep(gn.doc,eS(gm,gm));if(gi){for(var gk=0;gk<gi.length;++gk){a2(gn.doc,"",gi[gk].anchor,gi[gk].head,"drag")}}gn.replaceSelection(go,"around","paste");gn.display.input.focus()}}catch(gl){}}}function Q(gf,gh){if(dK&&(!gf.state.draggingText||+new Date-ag<100)){er(gh);return}if(aR(gf,gh)||bb(gf.display,gh)){return}gh.dataTransfer.setData("Text",gf.getSelection());if(gh.dataTransfer.setDragImage&&!aC){var gg=f0("img",null,null,"position: fixed; left: 0; top: 0;");gg.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(d2){gg.width=gg.height=1;gf.display.wrapper.appendChild(gg);gg._top=gg.offsetTop}gh.dataTransfer.setDragImage(gg,0,0);if(d2){gg.parentNode.removeChild(gg)}}}function N(gf,gg){if(Math.abs(gf.doc.scrollTop-gg)<2){return}gf.doc.scrollTop=gg;if(!co){dT(gf,{top:gg})}if(gf.display.scroller.scrollTop!=gg){gf.display.scroller.scrollTop=gg}gf.display.scrollbars.setScrollTop(gg);if(co){dT(gf)}ef(gf,100)}function bE(gf,gh,gg){if(gg?gh==gf.doc.scrollLeft:Math.abs(gf.doc.scrollLeft-gh)<2){return}gh=Math.min(gh,gf.display.scroller.scrollWidth-gf.display.scroller.clientWidth);gf.doc.scrollLeft=gh;eE(gf);if(gf.display.scroller.scrollLeft!=gh){gf.display.scroller.scrollLeft=gh}gf.display.scrollbars.setScrollLeft(gh)}var fm=0,cg=null;if(dK){cg=-0.53}else{if(co){cg=15}else{if(dc){cg=-0.7}else{if(aC){cg=-1/3}}}}var cQ=function(gh){var gg=gh.wheelDeltaX,gf=gh.wheelDeltaY;if(gg==null&&gh.detail&&gh.axis==gh.HORIZONTAL_AXIS){gg=gh.detail}if(gf==null&&gh.detail&&gh.axis==gh.VERTICAL_AXIS){gf=gh.detail}else{if(gf==null){gf=gh.wheelDelta}}return{x:gg,y:gf}};H.wheelEventPixels=function(gf){var gg=cQ(gf);gg.x*=cg;gg.y*=cg;return gg};function b(gn,gh){var go=cQ(gh),gr=go.x,gq=go.y;var gj=gn.display,gm=gj.scroller;if(!(gr&&gm.scrollWidth>gm.clientWidth||gq&&gm.scrollHeight>gm.clientHeight)){return}if(gq&&b7&&c0){outer:for(var gp=gh.target,gl=gj.view;gp!=gm;gp=gp.parentNode){for(var gg=0;gg<gl.length;gg++){if(gl[gg].node==gp){gn.display.currentWheelTarget=gp;break outer}}}}if(gr&&!co&&!d2&&cg!=null){if(gq){N(gn,Math.max(0,Math.min(gm.scrollTop+gq*cg,gm.scrollHeight-gm.clientHeight)))}bE(gn,Math.max(0,Math.min(gm.scrollLeft+gr*cg,gm.scrollWidth-gm.clientWidth)));cG(gh);gj.wheelStartX=null;return}if(gq&&cg!=null){var gf=gq*cg;var gk=gn.doc.scrollTop,gi=gk+gj.wrapper.clientHeight;if(gf<0){gk=Math.max(0,gk+gf-50)}else{gi=Math.min(gn.doc.height,gi+gf+50)}dT(gn,{top:gk,bottom:gi})}if(fm<20){if(gj.wheelStartX==null){gj.wheelStartX=gm.scrollLeft;gj.wheelStartY=gm.scrollTop;gj.wheelDX=gr;gj.wheelDY=gq;setTimeout(function(){if(gj.wheelStartX==null){return}var gs=gm.scrollLeft-gj.wheelStartX;var gu=gm.scrollTop-gj.wheelStartY;var gt=(gu&&gj.wheelDY&&gu/gj.wheelDY)||(gs&&gj.wheelDX&&gs/gj.wheelDX);gj.wheelStartX=gj.wheelStartY=null;if(!gt){return}cg=(cg*fm+gt)/(fm+1);++fm},200)}else{gj.wheelDX+=gr;gj.wheelDY+=gq}}}function fR(gg,gj,gf){if(typeof gj=="string"){gj=eD[gj];if(!gj){return false}}gg.display.input.ensurePolled();var gi=gg.display.shift,gh=false;try{if(aj(gg)){gg.state.suppressEdits=true}if(gf){gg.display.shift=false}gh=gj(gg)!=ca}finally{gg.display.shift=gi;gg.state.suppressEdits=false}return gh}function ea(gg,gh,gj){for(var gi=0;gi<gg.state.keyMaps.length;gi++){var gf=i(gh,gg.state.keyMaps[gi],gj,gg);if(gf){return gf}}return(gg.options.extraKeys&&i(gh,gg.options.extraKeys,gj,gg))||i(gh,gg.options.keyMap,gj,gg)}var dM=new ge;function bd(gg,gi,gk,gj){var gh=gg.state.keySeq;if(gh){if(eC(gi)){return"handled"}dM.set(50,function(){if(gg.state.keySeq==gh){gg.state.keySeq=null;gg.display.input.reset()}});gi=gh+" "+gi}var gf=ea(gg,gi,gj);if(gf=="multi"){gg.state.keySeq=gi}if(gf=="handled"){ae(gg,"keyHandled",gg,gi,gk)}if(gf=="handled"||gf=="multi"){cG(gk);o(gg)}if(gh&&!gf&&/\'$/.test(gi)){cG(gk);return true}return !!gf}function fj(gf,gh){var gg=fr(gh,true);if(!gg){return false}if(gh.shiftKey&&!gf.state.keySeq){return bd(gf,"Shift-"+gg,gh,function(gi){return fR(gf,gi,true)})||bd(gf,gg,gh,function(gi){if(typeof gi=="string"?/^go[A-Z]/.test(gi):gi.motion){return fR(gf,gi)}})}else{return bd(gf,gg,gh,function(gi){return fR(gf,gi)})}}function ej(gf,gh,gg){return bd(gf,"'"+gg+"'",gh,function(gi){return fR(gf,gi,true)})}var dm=null;function p(gi){var gf=this;r(gf);if(aR(gf,gi)){return}if(dK&&k<11&&gi.keyCode==27){gi.returnValue=false}var gg=gi.keyCode;gf.display.shift=gg==16||gi.shiftKey;var gh=fj(gf,gi);if(d2){dm=gh?gg:null;if(!gh&&gg==88&&!da&&(b7?gi.metaKey:gi.ctrlKey)){gf.replaceSelection("",null,"cut")}}if(gg==18&&!/\bCodeMirror-crosshair\b/.test(gf.display.lineDiv.className)){av(gf)}}function av(gg){var gh=gg.display.lineDiv;fA(gh,"CodeMirror-crosshair");function gf(gi){if(gi.keyCode==18||!gi.altKey){f(gh,"CodeMirror-crosshair");ed(document,"keyup",gf);ed(document,"mouseover",gf)}}bX(document,"keyup",gf);bX(document,"mouseover",gf)}function bi(gf){if(gf.keyCode==16){this.doc.sel.shift=false}aR(this,gf)}function cx(gj){var gf=this;if(bb(gf.display,gj)||aR(gf,gj)||gj.ctrlKey&&!gj.altKey||b7&&gj.metaKey){return}var gi=gj.keyCode,gg=gj.charCode;if(d2&&gi==dm){dm=null;cG(gj);return}if((d2&&(!gj.which||gj.which<10))&&fj(gf,gj)){return}var gh=String.fromCharCode(gg==null?gi:gg);if(ej(gf,gj,gh)){return}gf.display.input.onKeyPress(gj)}function al(gf){gf.state.delayingBlurEvent=true;setTimeout(function(){if(gf.state.delayingBlurEvent){gf.state.delayingBlurEvent=false;aV(gf)}},100)}function cB(gf){if(gf.state.delayingBlurEvent){gf.state.delayingBlurEvent=false}if(gf.options.readOnly=="nocursor"){return}if(!gf.state.focused){aE(gf,"focus",gf);gf.state.focused=true;fA(gf.display.wrapper,"CodeMirror-focused");if(!gf.curOp&&gf.display.selForContextMenu!=gf.doc.sel){gf.display.input.reset();if(c0){setTimeout(function(){gf.display.input.reset(true)},20)}}gf.display.input.receivedFocus()}o(gf)}function aV(gf){if(gf.state.delayingBlurEvent){return}if(gf.state.focused){aE(gf,"blur",gf);gf.state.focused=false;f(gf.display.wrapper,"CodeMirror-focused")}clearInterval(gf.display.blinker);setTimeout(function(){if(!gf.state.focused){gf.display.shift=false}},150)}function ay(gf,gg){if(bb(gf.display,gg)||dg(gf,gg)){return}gf.display.input.onContextMenu(gg)}function dg(gf,gg){if(!fi(gf,"gutterContextMenu")){return false}return gd(gf,gg,"gutterContextMenu",false,aE)}var cX=H.changeEnd=function(gf){if(!gf.text){return gf.to}return W(gf.from.line+gf.text.length-1,fG(gf.text).length+(gf.text.length==1?gf.from.ch:0))};function bZ(gi,gh){if(cf(gi,gh.from)<0){return gi}if(cf(gi,gh.to)<=0){return cX(gh)}var gf=gi.line+gh.text.length-(gh.to.line-gh.from.line)-1,gg=gi.ch;if(gi.line==gh.to.line){gg+=cX(gh).ch-gh.to.ch}return W(gf,gg)}function fk(gi,gj){var gg=[];for(var gh=0;gh<gi.sel.ranges.length;gh++){var gf=gi.sel.ranges[gh];gg.push(new dY(bZ(gf.anchor,gj),bZ(gf.head,gj)))}return cw(gg,gi.sel.primIndex)}function bu(gh,gg,gf){if(gh.line==gg.line){return W(gf.line,gh.ch-gg.ch+gf.ch)}else{return W(gf.line+(gh.line-gg.line),gh.ch)}}function af(gp,gm,gg){var gh=[];var gf=W(gp.first,0),gq=gf;for(var gj=0;gj<gm.length;gj++){var gl=gm[gj];var go=bu(gl.from,gf,gq);var gn=bu(cX(gl),gf,gq);gf=gl.to;gq=gn;if(gg=="around"){var gk=gp.sel.ranges[gj],gi=cf(gk.head,gk.anchor)<0;gh[gj]=new dY(gi?gn:go,gi?go:gn)}else{gh[gj]=new dY(go,go)}}return new f1(gh,gp.sel.primIndex)}function dR(gg,gi,gh){var gf={canceled:false,from:gi.from,to:gi.to,text:gi.text,origin:gi.origin,cancel:function(){this.canceled=true}};if(gh){gf.update=function(gm,gl,gk,gj){if(gm){this.from=fJ(gg,gm)}if(gl){this.to=fJ(gg,gl)}if(gk){this.text=gk}if(gj!==undefined){this.origin=gj}}}aE(gg,"beforeChange",gg,gf);if(gg.cm){aE(gg.cm,"beforeChange",gg.cm,gf)}if(gf.canceled){return null}return{from:gf.from,to:gf.to,text:gf.text,origin:gf.origin}}function bg(gi,gj,gh){if(gi.cm){if(!gi.cm.curOp){return c2(gi.cm,bg)(gi,gj,gh)}if(gi.cm.state.suppressEdits){return}}if(fi(gi,"beforeChange")||gi.cm&&fi(gi.cm,"beforeChange")){gj=dR(gi,gj,true);if(!gj){return}}var gg=ga&&!gh&&cH(gi,gj.from,gj.to);if(gg){for(var gf=gg.length-1;gf>=0;--gf){K(gi,{from:gg[gf].from,to:gg[gf].to,text:gf?[""]:gj.text})}}else{K(gi,gj)}}function K(gh,gi){if(gi.text.length==1&&gi.text[0]==""&&cf(gi.from,gi.to)==0){return}var gg=fk(gh,gi);fM(gh,gi,gg,gh.cm?gh.cm.curOp.id:NaN);ee(gh,gi,gg,ek(gh,gi));var gf=[];d7(gh,function(gk,gj){if(!gj&&dh(gf,gk.history)==-1){dE(gk.history,gi);gf.push(gk.history)}ee(gk,gi,null,ek(gk,gi))})}function b8(gq,go,gs){if(gq.cm&&gq.cm.state.suppressEdits){return}var gn=gq.history,gh,gj=gq.sel;var gf=go=="undo"?gn.done:gn.undone,gr=go=="undo"?gn.undone:gn.done;for(var gk=0;gk<gf.length;gk++){gh=gf[gk];if(gs?gh.ranges&&!gh.equals(gq.sel):!gh.ranges){break}}if(gk==gf.length){return}gn.lastOrigin=gn.lastSelOrigin=null;for(;;){gh=gf.pop();if(gh.ranges){cN(gh,gr);if(gs&&!gh.equals(gq.sel)){bU(gq,gh,{clearRedo:false});return}gj=gh}else{break}}var gm=[];cN(gj,gr);gr.push({changes:gm,generation:gn.generation});gn.generation=gh.generation||++gn.maxGeneration;var gi=fi(gq,"beforeChange")||gq.cm&&fi(gq.cm,"beforeChange");for(var gk=gh.changes.length-1;gk>=0;--gk){var gp=gh.changes[gk];gp.origin=go;if(gi&&!dR(gq,gp,false)){gf.length=0;return}gm.push(du(gq,gp));var gg=gk?fk(gq,gp):fG(gf);ee(gq,gp,gg,d9(gq,gp));if(!gk&&gq.cm){gq.cm.scrollIntoView({from:gp.from,to:cX(gp)})}var gl=[];d7(gq,function(gu,gt){if(!gt&&dh(gl,gu.history)==-1){dE(gu.history,gp);gl.push(gu.history)}ee(gu,gp,null,d9(gu,gp))})}}function fn(gg,gi){if(gi==0){return}gg.first+=gi;gg.sel=new f1(bS(gg.sel.ranges,function(gj){return new dY(W(gj.anchor.line+gi,gj.anchor.ch),W(gj.head.line+gi,gj.head.ch))}),gg.sel.primIndex);if(gg.cm){ah(gg.cm,gg.first,gg.first-gi,gi);for(var gh=gg.cm.display,gf=gh.viewFrom;gf<gh.viewTo;gf++){R(gg.cm,gf,"gutter")}}}function ee(gj,gk,gi,gg){if(gj.cm&&!gj.cm.curOp){return c2(gj.cm,ee)(gj,gk,gi,gg)}if(gk.to.line<gj.first){fn(gj,gk.text.length-1-(gk.to.line-gk.from.line));return}if(gk.from.line>gj.lastLine()){return}if(gk.from.line<gj.first){var gf=gk.text.length-1-(gj.first-gk.from.line);fn(gj,gf);gk={from:W(gj.first,0),to:W(gk.to.line+gf,gk.to.ch),text:[fG(gk.text)],origin:gk.origin}}var gh=gj.lastLine();if(gk.to.line>gh){gk={from:gk.from,to:W(gh,ff(gj,gh).text.length),text:[gk.text[0]],origin:gk.origin}}gk.removed=f2(gj,gk.from,gk.to);if(!gi){gi=fk(gj,gk)}if(gj.cm){aJ(gj.cm,gk,gg)}else{fy(gj,gk,gg)}ep(gj,gi,Z)}function aJ(gq,gm,gk){var gp=gq.doc,gl=gq.display,gn=gm.from,go=gm.to;var gf=false,gj=gn.line;if(!gq.options.lineWrapping){gj=bN(y(ff(gp,gn.line)));gp.iter(gj,go.line+1,function(gs){if(gs==gl.maxLine){gf=true;return true}})}if(gp.sel.contains(gm.from,gm.to)>-1){V(gq)}fy(gp,gm,gk,be(gq));if(!gq.options.lineWrapping){gp.iter(gj,gn.line+gm.text.length,function(gt){var gs=en(gt);if(gs>gl.maxLineLength){gl.maxLine=gt;gl.maxLineLength=gs;gl.maxLineChanged=true;gf=false}});if(gf){gq.curOp.updateMaxLine=true}}gp.frontier=Math.min(gp.frontier,gn.line);ef(gq,400);var gr=gm.text.length-(go.line-gn.line)-1;if(gm.full){ah(gq)}else{if(gn.line==go.line&&gm.text.length==1&&!dS(gq.doc,gm)){R(gq,gn.line,"text")}else{ah(gq,gn.line,go.line+1,gr)}}var gh=fi(gq,"changes"),gi=fi(gq,"change");if(gi||gh){var gg={from:gn,to:go,text:gm.text,removed:gm.removed,origin:gm.origin};if(gi){ae(gq,"change",gq,gg)}if(gh){(gq.curOp.changeObjs||(gq.curOp.changeObjs=[])).push(gg)}}gq.display.selForContextMenu=null}function a2(gi,gh,gk,gj,gf){if(!gj){gj=gk}if(cf(gj,gk)<0){var gg=gj;gj=gk;gk=gg}if(typeof gh=="string"){gh=a1(gh)}bg(gi,{from:gk,to:gj,text:gh,origin:gf})}function d6(gg,gj){if(aR(gg,"scrollCursorIntoView")){return}var gk=gg.display,gh=gk.sizer.getBoundingClientRect(),gf=null;if(gj.top+gh.top<0){gf=true}else{if(gj.bottom+gh.top>(window.innerHeight||document.documentElement.clientHeight)){gf=false}}if(gf!=null&&!fu){var gi=f0("div","\u200b",null,"position: absolute; top: "+(gj.top-gk.viewOffset-e8(gg.display))+"px; height: "+(gj.bottom-gj.top+cT(gg)+gk.barHeight)+"px; left: "+gj.left+"px; width: 2px;");gg.display.lineSpace.appendChild(gi);gi.scrollIntoView(gf);gg.display.lineSpace.removeChild(gi)}}function D(gp,gn,gj,gi){if(gi==null){gi=0}for(var gk=0;gk<5;gk++){var gl=false,go=dU(gp,gn);var gf=!gj||gj==gn?go:dU(gp,gj);var gh=G(gp,Math.min(go.left,gf.left),Math.min(go.top,gf.top)-gi,Math.max(go.left,gf.left),Math.max(go.bottom,gf.bottom)+gi);var gm=gp.doc.scrollTop,gg=gp.doc.scrollLeft;if(gh.scrollTop!=null){N(gp,gh.scrollTop);if(Math.abs(gp.doc.scrollTop-gm)>1){gl=true}}if(gh.scrollLeft!=null){bE(gp,gh.scrollLeft);if(Math.abs(gp.doc.scrollLeft-gg)>1){gl=true}}if(!gl){break}}return go}function E(gf,gh,gj,gg,gi){var gk=G(gf,gh,gj,gg,gi);if(gk.scrollTop!=null){N(gf,gk.scrollTop)}if(gk.scrollLeft!=null){bE(gf,gk.scrollLeft)}}function G(gr,gi,gq,gg,gp){var gn=gr.display,gl=aY(gr.display);if(gq<0){gq=0}var gj=gr.curOp&&gr.curOp.scrollTop!=null?gr.curOp.scrollTop:gn.scroller.scrollTop;var gt=cV(gr),gv={};if(gp-gq>gt){gp=gq+gt}var gh=gr.doc.height+bI(gn);var gf=gq<gl,gm=gp>gh-gl;if(gq<gj){gv.scrollTop=gf?0:gq}else{if(gp>gj+gt){var go=Math.min(gq,(gm?gh:gp)-gt);if(go!=gj){gv.scrollTop=go}}}var gu=gr.curOp&&gr.curOp.scrollLeft!=null?gr.curOp.scrollLeft:gn.scroller.scrollLeft;var gs=dl(gr)-(gr.options.fixedGutter?gn.gutters.offsetWidth:0);var gk=gg-gi>gs;if(gk){gg=gi+gs}if(gi<10){gv.scrollLeft=0}else{if(gi<gu){gv.scrollLeft=Math.max(0,gi-(gk?0:10))}else{if(gg>gs+gu-3){gv.scrollLeft=gg+(gk?0:10)-gs}}}return gv}function cL(gf,gh,gg){if(gh!=null||gg!=null){fC(gf)}if(gh!=null){gf.curOp.scrollLeft=(gf.curOp.scrollLeft==null?gf.doc.scrollLeft:gf.curOp.scrollLeft)+gh}if(gg!=null){gf.curOp.scrollTop=(gf.curOp.scrollTop==null?gf.doc.scrollTop:gf.curOp.scrollTop)+gg}}function fF(gf){fC(gf);var gg=gf.getCursor(),gi=gg,gh=gg;if(!gf.options.lineWrapping){gi=gg.ch?W(gg.line,gg.ch-1):gg;gh=W(gg.line,gg.ch+1)}gf.curOp.scrollToPos={from:gi,to:gh,margin:gf.options.cursorScrollMargin,isCursor:true}}function fC(gf){var gh=gf.curOp.scrollToPos;if(gh){gf.curOp.scrollToPos=null;var gj=dH(gf,gh.from),gi=dH(gf,gh.to);var gg=G(gf,Math.min(gj.left,gi.left),Math.min(gj.top,gi.top)-gh.margin,Math.max(gj.right,gi.right),Math.max(gj.bottom,gi.bottom)+gh.margin);gf.scrollTo(gg.scrollLeft,gg.scrollTop)}}function ad(gs,gi,gr,gh){var gq=gs.doc,gg;if(gr==null){gr="add"}if(gr=="smart"){if(!gq.mode.indent){gr="prev"}else{gg=dC(gs,gi)}}var gm=gs.options.tabSize;var gt=ff(gq,gi),gl=bT(gt.text,null,gm);if(gt.stateAfter){gt.stateAfter=null}var gf=gt.text.match(/^\s*/)[0],go;if(!gh&&!/\S/.test(gt.text)){go=0;gr="not"}else{if(gr=="smart"){go=gq.mode.indent(gg,gt.text.slice(gf.length),gt.text);if(go==ca||go>150){if(!gh){return}gr="prev"}}}if(gr=="prev"){if(gi>gq.first){go=bT(ff(gq,gi-1).text,null,gm)}else{go=0}}else{if(gr=="add"){go=gl+gs.options.indentUnit}else{if(gr=="subtract"){go=gl-gs.options.indentUnit}else{if(typeof gr=="number"){go=gl+gr}}}}go=Math.max(0,go);var gp="",gn=0;if(gs.options.indentWithTabs){for(var gj=Math.floor(go/gm);gj;--gj){gn+=gm;gp+="\t"}}if(gn<go){gp+=cp(go-gn)}if(gp!=gf){a2(gq,gp,W(gi,0),W(gi,gf.length),"+input")}else{for(var gj=0;gj<gq.sel.ranges.length;gj++){var gk=gq.sel.ranges[gj];if(gk.head.line==gi&&gk.head.ch<gf.length){var gn=W(gi,gf.length);e(gq,gj,new dY(gn,gn));break}}}gt.stateAfter=null}function ez(gi,gh,gf,gk){var gj=gh,gg=gh;if(typeof gh=="number"){gg=ff(gi,c5(gi,gh))}else{gj=bN(gh)}if(gj==null){return null}if(gk(gg,gj)&&gi.cm){R(gi.cm,gj,gf)}return gg}function eX(gf,gl){var gg=gf.doc.sel.ranges,gj=[];for(var gi=0;gi<gg.length;gi++){var gh=gl(gg[gi]);while(gj.length&&cf(gh.from,fG(gj).to)<=0){var gk=gj.pop();if(cf(gk.from,gh.from)<0){gh.from=gk.from;break}}gj.push(gh)}cM(gf,function(){for(var gm=gj.length-1;gm>=0;gm--){a2(gf.doc,"",gj[gm].from,gj[gm].to,"+delete")}fF(gf)})}function bw(gx,gj,gr,gq,gl){var go=gj.line,gp=gj.ch,gw=gr;var gg=ff(gx,go);var gu=true;function gv(){var gy=go+gr;if(gy<gx.first||gy>=gx.first+gx.size){return(gu=false)}go=gy;return gg=ff(gx,gy)}function gt(gz){var gy=(gl?u:ai)(gg,gp,gr,true);if(gy==null){if(!gz&&gv()){if(gl){gp=(gr<0?cS:cE)(gg)}else{gp=gr<0?gg.text.length:0}}else{return(gu=false)}}else{gp=gy}return true}if(gq=="char"){gt()}else{if(gq=="column"){gt(true)}else{if(gq=="word"||gq=="group"){var gs=null,gm=gq=="group";var gf=gx.cm&&gx.cm.getHelper(gj,"wordChars");for(var gk=true;;gk=false){if(gr<0&&!gt(!gk)){break}var gh=gg.text.charAt(gp)||"\n";var gi=cA(gh,gf)?"w":gm&&gh=="\n"?"n":!gm||/\s/.test(gh)?null:"p";if(gm&&!gk&&!gi){gi="s"}if(gs&&gs!=gi){if(gr<0){gr=1;gt()}break}if(gi){gs=gi}if(gr>0&&!gt(!gk)){break}}}}}var gn=bV(gx,W(go,gp),gw,true);if(!gu){gn.hitSide=true}return gn}function bq(gn,gi,gf,gm){var gl=gn.doc,gk=gi.left,gj;if(gm=="page"){var gh=Math.min(gn.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);gj=gi.top+gf*(gh-(gf<0?1.5:0.5)*aY(gn.display))}else{if(gm=="line"){gj=gf>0?gi.bottom+3:gi.top-3}}for(;;){var gg=fO(gn,gk,gj);if(!gg.outside){break}if(gf<0?gj<=0:gj>=gl.height){gg.hitSide=true;break}gj+=gf*5}return gg}H.prototype={constructor:H,focus:function(){window.focus();this.display.input.focus()},setOption:function(gh,gi){var gg=this.options,gf=gg[gh];if(gg[gh]==gi&&gh!="mode"){return}gg[gh]=gi;if(bf.hasOwnProperty(gh)){c2(this,bf[gh])(this,gi,gf)}},getOption:function(gf){return this.options[gf]},getDoc:function(){return this.doc},addKeyMap:function(gg,gf){this.state.keyMaps[gf?"push":"unshift"](fW(gg))},removeKeyMap:function(gg){var gh=this.state.keyMaps;for(var gf=0;gf<gh.length;++gf){if(gh[gf]==gg||gh[gf].name==gg){gh.splice(gf,1);return true}}},addOverlay:c8(function(gf,gg){var gh=gf.token?gf:H.getMode(this.options,gf);if(gh.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:gh,modeSpec:gf,opaque:gg&&gg.opaque});this.state.modeGen++;ah(this)}),removeOverlay:c8(function(gf){var gh=this.state.overlays;for(var gg=0;gg<gh.length;++gg){var gi=gh[gg].modeSpec;if(gi==gf||typeof gf=="string"&&gi.name==gf){gh.splice(gg,1);this.state.modeGen++;ah(this);return}}}),indentLine:c8(function(gh,gf,gg){if(typeof gf!="string"&&typeof gf!="number"){if(gf==null){gf=this.options.smartIndent?"smart":"prev"}else{gf=gf?"add":"subtract"}}if(b9(this.doc,gh)){ad(this,gh,gf,gg)}}),indentSelection:c8(function(go){var gf=this.doc.sel.ranges,gi=-1;for(var gk=0;gk<gf.length;gk++){var gl=gf[gk];if(!gl.empty()){var gm=gl.from(),gn=gl.to();var gg=Math.max(gi,gm.line);gi=Math.min(this.lastLine(),gn.line-(gn.ch?0:1))+1;for(var gj=gg;gj<gi;++gj){ad(this,gj,go)}var gh=this.doc.sel.ranges;if(gm.ch==0&&gf.length==gh.length&&gh[gk].from().ch>0){e(this.doc,gk,new dY(gm,gh[gk].to()),Z)}}else{if(gl.head.line>gi){ad(this,gl.head.line,go,true);gi=gl.head.line;if(gk==this.doc.sel.primIndex){fF(this)}}}}}),getTokenAt:function(gg,gf){return cq(this,gg,gf)},getLineTokens:function(gg,gf){return cq(this,W(gg),gf,true)},getTokenTypeAt:function(gm){gm=fJ(this.doc,gm);var gi=c6(this,ff(this.doc,gm.line));var gk=0,gl=(gi.length-1)/2,gh=gm.ch;var gg;if(gh==0){gg=gi[2]}else{for(;;){var gf=(gk+gl)>>1;if((gf?gi[gf*2-1]:0)>=gh){gl=gf}else{if(gi[gf*2+1]<gh){gk=gf+1}else{gg=gi[gf*2+2];break}}}}var gj=gg?gg.indexOf("cm-overlay "):-1;return gj<0?gg:gj==0?null:gg.slice(0,gj-1)},getModeAt:function(gg){var gf=this.doc.mode;if(!gf.innerMode){return gf}return H.innerMode(gf,this.getTokenAt(gg).state).mode},getHelper:function(gg,gf){return this.getHelpers(gg,gf)[0]},getHelpers:function(gm,gh){var gi=[];if(!fo.hasOwnProperty(gh)){return gi}var gf=fo[gh],gl=this.getModeAt(gm);if(typeof gl[gh]=="string"){if(gf[gl[gh]]){gi.push(gf[gl[gh]])}}else{if(gl[gh]){for(var gg=0;gg<gl[gh].length;gg++){var gk=gf[gl[gh][gg]];if(gk){gi.push(gk)}}}else{if(gl.helperType&&gf[gl.helperType]){gi.push(gf[gl.helperType])}else{if(gf[gl.name]){gi.push(gf[gl.name])}}}}for(var gg=0;gg<gf._global.length;gg++){var gj=gf._global[gg];if(gj.pred(gl,this)&&dh(gi,gj.val)==-1){gi.push(gj.val)}}return gi},getStateAfter:function(gg,gf){var gh=this.doc;gg=c5(gh,gg==null?gh.first+gh.size-1:gg);return dC(this,gg+1,gf)},cursorCoords:function(gi,gg){var gh,gf=this.doc.sel.primary();if(gi==null){gh=gf.head}else{if(typeof gi=="object"){gh=fJ(this.doc,gi)}else{gh=gi?gf.from():gf.to()}}return dU(this,gh,gg||"page")},charCoords:function(gg,gf){return cJ(this,fJ(this.doc,gg),gf||"page")},coordsChar:function(gf,gg){gf=gc(this,gf,gg||"page");return fO(this,gf.left,gf.top)},lineAtHeight:function(gf,gg){gf=gc(this,{top:gf,left:0},gg||"page").top;return bG(this.doc,gf+this.display.viewOffset)},heightAtLine:function(gg,gj){var gf=false,gi=this.doc.first+this.doc.size-1;if(gg<this.doc.first){gg=this.doc.first}else{if(gg>gi){gg=gi;gf=true}}var gh=ff(this.doc,gg);return eQ(this,gh,{top:0,left:0},gj||"page").top+(gf?this.doc.height-bM(gh):0)},defaultTextHeight:function(){return aY(this.display)},defaultCharWidth:function(){return dD(this.display)},setGutterMarker:c8(function(gf,gg,gh){return ez(this.doc,gf,"gutter",function(gi){var gj=gi.gutterMarkers||(gi.gutterMarkers={});gj[gg]=gh;if(!gh&&eU(gj)){gi.gutterMarkers=null}return true})}),clearGutter:c8(function(gh){var gf=this,gi=gf.doc,gg=gi.first;gi.iter(function(gj){if(gj.gutterMarkers&&gj.gutterMarkers[gh]){gj.gutterMarkers[gh]=null;R(gf,gg,"gutter");if(eU(gj.gutterMarkers)){gj.gutterMarkers=null}}++gg})}),lineInfo:function(gf){if(typeof gf=="number"){if(!b9(this.doc,gf)){return null}var gg=gf;gf=ff(this.doc,gf);if(!gf){return null}}else{var gg=bN(gf);if(gg==null){return null}}return{line:gg,handle:gf,text:gf.text,gutterMarkers:gf.gutterMarkers,textClass:gf.textClass,bgClass:gf.bgClass,wrapClass:gf.wrapClass,widgets:gf.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(gk,gh,gm,gi,go){var gj=this.display;gk=dU(this,fJ(this.doc,gk));var gl=gk.bottom,gg=gk.left;gh.style.position="absolute";gh.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(gh);gj.sizer.appendChild(gh);if(gi=="over"){gl=gk.top}else{if(gi=="above"||gi=="near"){var gf=Math.max(gj.wrapper.clientHeight,this.doc.height),gn=Math.max(gj.sizer.clientWidth,gj.lineSpace.clientWidth);if((gi=="above"||gk.bottom+gh.offsetHeight>gf)&&gk.top>gh.offsetHeight){gl=gk.top-gh.offsetHeight}else{if(gk.bottom+gh.offsetHeight<=gf){gl=gk.bottom}}if(gg+gh.offsetWidth>gn){gg=gn-gh.offsetWidth}}}gh.style.top=gl+"px";gh.style.left=gh.style.right="";if(go=="right"){gg=gj.sizer.clientWidth-gh.offsetWidth;gh.style.right="0px"}else{if(go=="left"){gg=0}else{if(go=="middle"){gg=(gj.sizer.clientWidth-gh.offsetWidth)/2}}gh.style.left=gg+"px"}if(gm){E(this,gg,gl,gg+gh.offsetWidth,gl+gh.offsetHeight)}},triggerOnKeyDown:c8(p),triggerOnKeyPress:c8(cx),triggerOnKeyUp:bi,execCommand:function(gf){if(eD.hasOwnProperty(gf)){return eD[gf](this)}},findPosH:function(gl,gi,gj,gg){var gf=1;if(gi<0){gf=-1;gi=-gi}for(var gh=0,gk=fJ(this.doc,gl);gh<gi;++gh){gk=bw(this.doc,gk,gf,gj,gg);if(gk.hitSide){break}}return gk},moveH:c8(function(gg,gh){var gf=this;gf.extendSelectionsBy(function(gi){if(gf.display.shift||gf.doc.extend||gi.empty()){return bw(gf.doc,gi.head,gg,gh,gf.options.rtlMoveVisually)}else{return gg<0?gi.from():gi.to()}},cW)}),deleteH:c8(function(gf,gg){var gh=this.doc.sel,gi=this.doc;if(gh.somethingSelected()){gi.replaceSelection("",null,"+delete")}else{eX(this,function(gk){var gj=bw(gi,gk.head,gf,gg,false);return gf<0?{from:gj,to:gk.head}:{from:gk.head,to:gj}})}}),findPosV:function(gk,gh,gl,gn){var gf=1,gj=gn;if(gh<0){gf=-1;gh=-gh}for(var gg=0,gm=fJ(this.doc,gk);gg<gh;++gg){var gi=dU(this,gm,"div");if(gj==null){gj=gi.left}else{gi.left=gj}gm=bq(this,gi,gf,gl);if(gm.hitSide){break}}return gm},moveV:c8(function(gg,gi){var gf=this,gk=this.doc,gj=[];var gl=!gf.display.shift&&!gk.extend&&gk.sel.somethingSelected();gk.extendSelectionsBy(function(gm){if(gl){return gg<0?gm.from():gm.to()}var go=dU(gf,gm.head,"div");if(gm.goalColumn!=null){go.left=gm.goalColumn}gj.push(go.left);var gn=bq(gf,go,gg,gi);if(gi=="page"&&gm==gk.sel.primary()){cL(gf,null,cJ(gf,gn,"div").top-go.top)}return gn},cW);if(gj.length){for(var gh=0;gh<gk.sel.ranges.length;gh++){gk.sel.ranges[gh].goalColumn=gj[gh]}}}),findWordAt:function(gm){var gk=this.doc,gi=ff(gk,gm.line).text;var gl=gm.ch,gh=gm.ch;if(gi){var gj=this.getHelper(gm,"wordChars");if((gm.xRel<0||gh==gi.length)&&gl){--gl}else{++gh}var gg=gi.charAt(gl);var gf=cA(gg,gj)?function(gn){return cA(gn,gj)}:/\s/.test(gg)?function(gn){return/\s/.test(gn)}:function(gn){return !/\s/.test(gn)&&!cA(gn)};while(gl>0&&gf(gi.charAt(gl-1))){--gl}while(gh<gi.length&&gf(gi.charAt(gh))){++gh}}return new dY(W(gm.line,gl),W(gm.line,gh))},toggleOverwrite:function(gf){if(gf!=null&&gf==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){fA(this.display.cursorDiv,"CodeMirror-overwrite")}else{f(this.display.cursorDiv,"CodeMirror-overwrite")}aE(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==dO()},scrollTo:c8(function(gf,gg){if(gf!=null||gg!=null){fC(this)}if(gf!=null){this.curOp.scrollLeft=gf}if(gg!=null){this.curOp.scrollTop=gg}}),getScrollInfo:function(){var gf=this.display.scroller;return{left:gf.scrollLeft,top:gf.scrollTop,height:gf.scrollHeight-cT(this)-this.display.barHeight,width:gf.scrollWidth-cT(this)-this.display.barWidth,clientHeight:cV(this),clientWidth:dl(this)}},scrollIntoView:c8(function(gg,gh){if(gg==null){gg={from:this.doc.sel.primary().head,to:null};if(gh==null){gh=this.options.cursorScrollMargin}}else{if(typeof gg=="number"){gg={from:W(gg,0),to:null}}else{if(gg.from==null){gg={from:gg,to:null}}}}if(!gg.to){gg.to=gg.from}gg.margin=gh||0;if(gg.from.line!=null){fC(this);this.curOp.scrollToPos=gg}else{var gf=G(this,Math.min(gg.from.left,gg.to.left),Math.min(gg.from.top,gg.to.top)-gg.margin,Math.max(gg.from.right,gg.to.right),Math.max(gg.from.bottom,gg.to.bottom)+gg.margin);this.scrollTo(gf.scrollLeft,gf.scrollTop)}}),setSize:c8(function(gi,gg){var gf=this;function gh(gk){return typeof gk=="number"||/^\d+$/.test(String(gk))?gk+"px":gk}if(gi!=null){gf.display.wrapper.style.width=gh(gi)}if(gg!=null){gf.display.wrapper.style.height=gh(gg)}if(gf.options.lineWrapping){aO(this)}var gj=gf.display.viewFrom;gf.doc.iter(gj,gf.display.viewTo,function(gk){if(gk.widgets){for(var gl=0;gl<gk.widgets.length;gl++){if(gk.widgets[gl].noHScroll){R(gf,gj,"widget");break}}}++gj});gf.curOp.forceUpdate=true;aE(gf,"refresh",this)}),operation:function(gf){return cM(this,gf)},refresh:c8(function(){var gf=this.display.cachedTextHeight;ah(this);this.curOp.forceUpdate=true;ak(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);c4(this);if(gf==null||Math.abs(gf-aY(this.display))>0.5){X(this)}aE(this,"refresh",this)}),swapDoc:c8(function(gg){var gf=this.doc;gf.cm=null;eb(this,gg);ak(this);this.display.input.reset();this.scrollTo(gg.scrollLeft,gg.scrollTop);this.curOp.forceScroll=true;ae(this,"swapDoc",this,gf);return gf}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};by(H);var e3=H.defaults={};var bf=H.optionHandlers={};function s(gf,gi,gh,gg){H.defaults[gf]=gi;if(gh){bf[gf]=gg?function(gj,gl,gk){if(gk!=cc){gh(gj,gl,gk)}}:gh}}var cc=H.Init={toString:function(){return"CodeMirror.Init"}};s("value","",function(gf,gg){gf.setValue(gg)},true);s("mode",null,function(gf,gg){gf.doc.modeOption=gg;br(gf)},true);s("indentUnit",2,br,true);s("indentWithTabs",false);s("smartIndent",true);s("tabSize",4,function(gf){el(gf);ak(gf);ah(gf)},true);s("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(gf,gh,gg){gf.state.specialChars=new RegExp(gh.source+(gh.test("\t")?"":"|\t"),"g");if(gg!=H.Init){gf.refresh()}});s("specialCharPlaceholder",fc,function(gf){gf.refresh()},true);s("electricChars",true);s("inputStyle",eg?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);s("rtlMoveVisually",!aP);s("wholeLineUpdateBefore",true);s("theme","default",function(gf){cO(gf);dw(gf)},true);s("keyMap","default",function(gf,gj,gg){var gh=fW(gj);var gi=gg!=H.Init&&fW(gg);if(gi&&gi.detach){gi.detach(gf,gh)}if(gh.attach){gh.attach(gf,gi||null)}});s("extraKeys",null);s("lineWrapping",false,eG,true);s("gutters",[],function(gf){ce(gf.options);dw(gf)},true);s("fixedGutter",true,function(gf,gg){gf.display.gutters.style.left=gg?dX(gf.display)+"px":"0";gf.refresh()},true);s("coverGutterNextToScrollbar",false,function(gf){eY(gf)},true);s("scrollbarStyle","native",function(gf){aD(gf);eY(gf);gf.display.scrollbars.setScrollTop(gf.doc.scrollTop);gf.display.scrollbars.setScrollLeft(gf.doc.scrollLeft)},true);s("lineNumbers",false,function(gf){ce(gf.options);dw(gf)},true);s("firstLineNumber",1,dw,true);s("lineNumberFormatter",function(gf){return gf},dw,true);s("showCursorWhenSelecting",false,bC,true);s("resetSelectionOnContextMenu",true);s("readOnly",false,function(gf,gg){if(gg=="nocursor"){aV(gf);gf.display.input.blur();gf.display.disabled=true}else{gf.display.disabled=false;if(!gg){gf.display.input.reset()}}});s("disableInput",false,function(gf,gg){if(!gg){gf.display.input.reset()}},true);s("dragDrop",true);s("cursorBlinkRate",530);s("cursorScrollMargin",0);s("cursorHeight",1,bC,true);s("singleCursorHeightPerLine",true,bC,true);s("workTime",100);s("workDelay",100);s("flattenSpans",true,el,true);s("addModeClass",false,el,true);s("pollInterval",100);s("undoDepth",200,function(gf,gg){gf.doc.history.undoDepth=gg});s("historyEventDelay",1250);s("viewportMargin",10,function(gf){gf.refresh()},true);s("maxHighlightLength",10000,el,true);s("moveInputWithCursor",true,function(gf,gg){if(!gg){gf.display.input.resetPosition()}});s("tabindex",null,function(gf,gg){gf.display.input.getField().tabIndex=gg||""});s("autofocus",null);var ds=H.modes={},aS=H.mimeModes={};H.defineMode=function(gf,gg){if(!H.defaults.mode&&gf!="null"){H.defaults.mode=gf}if(arguments.length>2){gg.dependencies=Array.prototype.slice.call(arguments,2)}ds[gf]=gg};H.defineMIME=function(gg,gf){aS[gg]=gf};H.resolveMode=function(gf){if(typeof gf=="string"&&aS.hasOwnProperty(gf)){gf=aS[gf]}else{if(gf&&typeof gf.name=="string"&&aS.hasOwnProperty(gf.name)){var gg=aS[gf.name];if(typeof gg=="string"){gg={name:gg}}gf=ck(gg,gf);gf.name=gg.name}else{if(typeof gf=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(gf)){return H.resolveMode("application/xml")}}}if(typeof gf=="string"){return{name:gf}}else{return gf||{name:"null"}}};H.getMode=function(gg,gf){var gf=H.resolveMode(gf);var gi=ds[gf.name];if(!gi){return H.getMode(gg,"text/plain")}var gj=gi(gg,gf);if(dp.hasOwnProperty(gf.name)){var gh=dp[gf.name];for(var gk in gh){if(!gh.hasOwnProperty(gk)){continue}if(gj.hasOwnProperty(gk)){gj["_"+gk]=gj[gk]}gj[gk]=gh[gk]}}gj.name=gf.name;if(gf.helperType){gj.helperType=gf.helperType}if(gf.modeProps){for(var gk in gf.modeProps){gj[gk]=gf.modeProps[gk]}}return gj};H.defineMode("null",function(){return{token:function(gf){gf.skipToEnd()}}});H.defineMIME("text/plain","null");var dp=H.modeExtensions={};H.extendMode=function(gh,gg){var gf=dp.hasOwnProperty(gh)?dp[gh]:(dp[gh]={});aN(gg,gf)};H.defineExtension=function(gf,gg){H.prototype[gf]=gg};H.defineDocExtension=function(gf,gg){at.prototype[gf]=gg};H.defineOption=s;var a9=[];H.defineInitHook=function(gf){a9.push(gf)};var fo=H.helpers={};H.registerHelper=function(gg,gf,gh){if(!fo.hasOwnProperty(gg)){fo[gg]=H[gg]={_global:[]}}fo[gg][gf]=gh};H.registerGlobalHelper=function(gh,gg,gf,gi){H.registerHelper(gh,gg,gi);fo[gh]._global.push({pred:gf,val:gi})};var b3=H.copyState=function(gi,gf){if(gf===true){return gf}if(gi.copyState){return gi.copyState(gf)}var gh={};for(var gj in gf){var gg=gf[gj];if(gg instanceof Array){gg=gg.concat([])}gh[gj]=gg}return gh};var b0=H.startState=function(gh,gg,gf){return gh.startState?gh.startState(gg,gf):true};H.innerMode=function(gh,gf){while(gh.innerMode){var gg=gh.innerMode(gf);if(!gg||gg.mode==gh){break}gf=gg.state;gh=gg.mode}return gg||{mode:gh,state:gf}};var eD=H.commands={selectAll:function(gf){gf.setSelection(W(gf.firstLine(),0),W(gf.lastLine()),Z)},singleSelection:function(gf){gf.setSelection(gf.getCursor("anchor"),gf.getCursor("head"),Z)},killLine:function(gf){eX(gf,function(gh){if(gh.empty()){var gg=ff(gf.doc,gh.head.line).text.length;if(gh.head.ch==gg&&gh.head.line<gf.lastLine()){return{from:gh.head,to:W(gh.head.line+1,0)}}else{return{from:gh.head,to:W(gh.head.line,gg)}}}else{return{from:gh.from(),to:gh.to()}}})},deleteLine:function(gf){eX(gf,function(gg){return{from:W(gg.from().line,0),to:fJ(gf.doc,W(gg.to().line+1,0))}})},delLineLeft:function(gf){eX(gf,function(gg){return{from:W(gg.from().line,0),to:gg.from()}})},delWrappedLineLeft:function(gf){eX(gf,function(gg){var gi=gf.charCoords(gg.head,"div").top+5;var gh=gf.coordsChar({left:0,top:gi},"div");return{from:gh,to:gg.from()}})},delWrappedLineRight:function(gf){eX(gf,function(gg){var gi=gf.charCoords(gg.head,"div").top+5;var gh=gf.coordsChar({left:gf.display.lineDiv.offsetWidth+100,top:gi},"div");return{from:gg.from(),to:gh}})},undo:function(gf){gf.undo()},redo:function(gf){gf.redo()},undoSelection:function(gf){gf.undoSelection()},redoSelection:function(gf){gf.redoSelection()},goDocStart:function(gf){gf.extendSelection(W(gf.firstLine(),0))},goDocEnd:function(gf){gf.extendSelection(W(gf.lastLine()))},goLineStart:function(gf){gf.extendSelectionsBy(function(gg){return bt(gf,gg.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(gf){gf.extendSelectionsBy(function(gg){return dI(gf,gg.head)},{origin:"+move",bias:1})},goLineEnd:function(gf){gf.extendSelectionsBy(function(gg){return dP(gf,gg.head.line)},{origin:"+move",bias:-1})},goLineRight:function(gf){gf.extendSelectionsBy(function(gg){var gh=gf.charCoords(gg.head,"div").top+5;return gf.coordsChar({left:gf.display.lineDiv.offsetWidth+100,top:gh},"div")},cW)},goLineLeft:function(gf){gf.extendSelectionsBy(function(gg){var gh=gf.charCoords(gg.head,"div").top+5;return gf.coordsChar({left:0,top:gh},"div")},cW)},goLineLeftSmart:function(gf){gf.extendSelectionsBy(function(gg){var gh=gf.charCoords(gg.head,"div").top+5;var gi=gf.coordsChar({left:0,top:gh},"div");if(gi.ch<gf.getLine(gi.line).search(/\S/)){return dI(gf,gg.head)}return gi},cW)},goLineUp:function(gf){gf.moveV(-1,"line")},goLineDown:function(gf){gf.moveV(1,"line")},goPageUp:function(gf){gf.moveV(-1,"page")},goPageDown:function(gf){gf.moveV(1,"page")},goCharLeft:function(gf){gf.moveH(-1,"char")},goCharRight:function(gf){gf.moveH(1,"char")},goColumnLeft:function(gf){gf.moveH(-1,"column")},goColumnRight:function(gf){gf.moveH(1,"column")},goWordLeft:function(gf){gf.moveH(-1,"word")},goGroupRight:function(gf){gf.moveH(1,"group")},goGroupLeft:function(gf){gf.moveH(-1,"group")},goWordRight:function(gf){gf.moveH(1,"word")},delCharBefore:function(gf){gf.deleteH(-1,"char")},delCharAfter:function(gf){gf.deleteH(1,"char")},delWordBefore:function(gf){gf.deleteH(-1,"word")},delWordAfter:function(gf){gf.deleteH(1,"word")},delGroupBefore:function(gf){gf.deleteH(-1,"group")},delGroupAfter:function(gf){gf.deleteH(1,"group")},indentAuto:function(gf){gf.indentSelection("smart")},indentMore:function(gf){gf.indentSelection("add")},indentLess:function(gf){gf.indentSelection("subtract")},insertTab:function(gf){gf.replaceSelection("\t")},insertSoftTab:function(gf){var gh=[],gg=gf.listSelections(),gk=gf.options.tabSize;for(var gj=0;gj<gg.length;gj++){var gl=gg[gj].from();var gi=bT(gf.getLine(gl.line),gl.ch,gk);gh.push(new Array(gk-gi%gk+1).join(" "))}gf.replaceSelections(gh)},defaultTab:function(gf){if(gf.somethingSelected()){gf.indentSelection("add")}else{gf.execCommand("insertTab")}},transposeChars:function(gf){cM(gf,function(){var gi=gf.listSelections(),gh=[];for(var gj=0;gj<gi.length;gj++){var gl=gi[gj].head,gg=ff(gf.doc,gl.line).text;if(gg){if(gl.ch==gg.length){gl=new W(gl.line,gl.ch-1)}if(gl.ch>0){gl=new W(gl.line,gl.ch+1);gf.replaceRange(gg.charAt(gl.ch-1)+gg.charAt(gl.ch-2),W(gl.line,gl.ch-2),gl,"+transpose")}else{if(gl.line>gf.doc.first){var gk=ff(gf.doc,gl.line-1).text;if(gk){gf.replaceRange(gg.charAt(0)+"\n"+gk.charAt(gk.length-1),W(gl.line-1,gk.length-1),W(gl.line,1),"+transpose")}}}}gh.push(new dY(gl,gl))}gf.setSelections(gh)})},newlineAndIndent:function(gf){cM(gf,function(){var gg=gf.listSelections().length;for(var gi=0;gi<gg;gi++){var gh=gf.listSelections()[gi];gf.replaceRange("\n",gh.anchor,gh.head,"+input");gf.indentLine(gh.from().line+1,null,true);fF(gf)}})},toggleOverwrite:function(gf){gf.toggleOverwrite()}};var fa=H.keyMap={};fa.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};fa.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};fa.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};fa.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};fa["default"]=b7?fa.macDefault:fa.pcDefault;function dt(gg){var gm=gg.split(/-(?!$)/),gg=gm[gm.length-1];var gl,gk,gf,gj;for(var gi=0;gi<gm.length-1;gi++){var gh=gm[gi];if(/^(cmd|meta|m)$/i.test(gh)){gj=true}else{if(/^a(lt)?$/i.test(gh)){gl=true}else{if(/^(c|ctrl|control)$/i.test(gh)){gk=true}else{if(/^s(hift)$/i.test(gh)){gf=true}else{throw new Error("Unrecognized modifier name: "+gh)}}}}}if(gl){gg="Alt-"+gg}if(gk){gg="Ctrl-"+gg}if(gj){gg="Cmd-"+gg}if(gf){gg="Shift-"+gg}return gg}H.normalizeKeyMap=function(gm){var gg={};for(var gl in gm){if(gm.hasOwnProperty(gl)){var gn=gm[gl];if(/^(name|fallthrough|(de|at)tach)$/.test(gl)){continue}if(gn=="..."){delete gm[gl];continue}var go=bS(gl.split(" "),dt);for(var gk=0;gk<go.length;gk++){var gi,gh;if(gk==go.length-1){gh=gl;gi=gn}else{gh=go.slice(0,gk+1).join(" ");gi="..."}var gj=gg[gh];if(!gj){gg[gh]=gi}else{if(gj!=gi){throw new Error("Inconsistent bindings for "+gh)}}}delete gm[gl]}}for(var gf in gg){gm[gf]=gg[gf]}return gm};var i=H.lookupKey=function(gi,gl,gk,gh){gl=fW(gl);var gj=gl.call?gl.call(gi,gh):gl[gi];if(gj===false){return"nothing"}if(gj==="..."){return"multi"}if(gj!=null&&gk(gj)){return"handled"}if(gl.fallthrough){if(Object.prototype.toString.call(gl.fallthrough)!="[object Array]"){return i(gi,gl.fallthrough,gk,gh)}for(var gg=0;gg<gl.fallthrough.length;gg++){var gf=i(gi,gl.fallthrough[gg],gk,gh);if(gf){return gf}}}};var eC=H.isModifierKey=function(gg){var gf=typeof gg=="string"?gg:fg[gg.keyCode];return gf=="Ctrl"||gf=="Alt"||gf=="Shift"||gf=="Mod"};var fr=H.keyName=function(gg,gi){if(d2&&gg.keyCode==34&&gg["char"]){return false}var gh=fg[gg.keyCode],gf=gh;if(gf==null||gg.altGraphKey){return false}if(gg.altKey&&gh!="Alt"){gf="Alt-"+gf}if((bQ?gg.metaKey:gg.ctrlKey)&&gh!="Ctrl"){gf="Ctrl-"+gf}if((bQ?gg.ctrlKey:gg.metaKey)&&gh!="Cmd"){gf="Cmd-"+gf}if(!gi&&gg.shiftKey&&gh!="Shift"){gf="Shift-"+gf}return gf};function fW(gf){return typeof gf=="string"?fa[gf]:gf}H.fromTextArea=function(gm,gn){gn=gn?aN(gn):{};gn.value=gm.value;if(!gn.tabindex&&gm.tabIndex){gn.tabindex=gm.tabIndex}if(!gn.placeholder&&gm.placeholder){gn.placeholder=gm.placeholder}if(gn.autofocus==null){var gf=dO();gn.autofocus=gf==gm||gm.getAttribute("autofocus")!=null&&gf==document.body}function gj(){gm.value=gl.getValue()}if(gm.form){bX(gm.form,"submit",gj);if(!gn.leaveSubmitMethodAlone){var gg=gm.form,gk=gg.submit;try{var gi=gg.submit=function(){gj();gg.submit=gk;gg.submit();gg.submit=gi}}catch(gh){}}}gn.finishInit=function(go){go.save=gj;go.getTextArea=function(){return gm};go.toTextArea=function(){go.toTextArea=isNaN;gj();gm.parentNode.removeChild(go.getWrapperElement());gm.style.display="";if(gm.form){ed(gm.form,"submit",gj);if(typeof gm.form.submit=="function"){gm.form.submit=gk}}}};gm.style.display="none";var gl=H(function(go){gm.parentNode.insertBefore(go,gm.nextSibling)},gn);return gl};var eT=H.StringStream=function(gf,gg){this.pos=this.start=0;this.string=gf;this.tabSize=gg||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};eT.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(gf){var gh=this.string.charAt(this.pos);if(typeof gf=="string"){var gg=gh==gf}else{var gg=gh&&(gf.test?gf.test(gh):gf(gh))}if(gg){++this.pos;return gh}},eatWhile:function(gf){var gg=this.pos;while(this.eat(gf)){}return this.pos>gg},eatSpace:function(){var gf=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>gf},skipToEnd:function(){this.pos=this.string.length},skipTo:function(gf){var gg=this.string.indexOf(gf,this.pos);if(gg>-1){this.pos=gg;return true}},backUp:function(gf){this.pos-=gf},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=bT(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?bT(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return bT(this.string,null,this.tabSize)-(this.lineStart?bT(this.string,this.lineStart,this.tabSize):0)},match:function(gj,gg,gf){if(typeof gj=="string"){var gk=function(gl){return gf?gl.toLowerCase():gl};var gi=this.string.substr(this.pos,gj.length);if(gk(gi)==gk(gj)){if(gg!==false){this.pos+=gj.length}return true}}else{var gh=this.string.slice(this.pos).match(gj);if(gh&&gh.index>0){return null}if(gh&&gg!==false){this.pos+=gh[0].length}return gh}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(gg,gf){this.lineStart+=gg;try{return gf()}finally{this.lineStart-=gg}}};var a6=0;var P=H.TextMarker=function(gg,gf){this.lines=[];this.type=gf;this.doc=gg;this.id=++a6};by(P);P.prototype.clear=function(){if(this.explicitlyCleared){return}var gm=this.doc.cm,gg=gm&&!gm.curOp;if(gg){cI(gm)}if(fi(this,"clear")){var gn=this.find();if(gn){ae(this,"clear",gn.from,gn.to)}}var gh=null,gk=null;for(var gi=0;gi<this.lines.length;++gi){var go=this.lines[gi];var gl=e9(go.markedSpans,this);if(gm&&!this.collapsed){R(gm,bN(go),"text")}else{if(gm){if(gl.to!=null){gk=bN(go)}if(gl.from!=null){gh=bN(go)}}}go.markedSpans=eH(go.markedSpans,gl);if(gl.from==null&&this.collapsed&&!fw(this.doc,go)&&gm){f3(go,aY(gm.display))}}if(gm&&this.collapsed&&!gm.options.lineWrapping){for(var gi=0;gi<this.lines.length;++gi){var gf=y(this.lines[gi]),gj=en(gf);if(gj>gm.display.maxLineLength){gm.display.maxLine=gf;gm.display.maxLineLength=gj;gm.display.maxLineChanged=true}}}if(gh!=null&&gm&&this.collapsed){ah(gm,gh,gk+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(gm){ey(gm.doc)}}if(gm){ae(gm,"markerCleared",gm,this)}if(gg){am(gm)}if(this.parent){this.parent.clear()}};P.prototype.find=function(gi,gg){if(gi==null&&this.type=="bookmark"){gi=1}var gl,gk;for(var gh=0;gh<this.lines.length;++gh){var gf=this.lines[gh];var gj=e9(gf.markedSpans,this);if(gj.from!=null){gl=W(gg?gf:bN(gf),gj.from);if(gi==-1){return gl}}if(gj.to!=null){gk=W(gg?gf:bN(gf),gj.to);if(gi==1){return gk}}}return gl&&{from:gl,to:gk}};P.prototype.changed=function(){var gh=this.find(-1,true),gg=this,gf=this.doc.cm;if(!gh||!gf){return}cM(gf,function(){var gj=gh.line,gk=bN(gh.line);var gi=fb(gf,gk);if(gi){au(gi);gf.curOp.selectionChanged=gf.curOp.forceUpdate=true}gf.curOp.updateMaxLine=true;if(!fw(gg.doc,gj)&&gg.height!=null){var gm=gg.height;gg.height=null;var gl=cY(gg)-gm;if(gl){f3(gj,gj.height+gl)}}})};P.prototype.attachLine=function(gf){if(!this.lines.length&&this.doc.cm){var gg=this.doc.cm.curOp;if(!gg.maybeHiddenMarkers||dh(gg.maybeHiddenMarkers,this)==-1){(gg.maybeUnhiddenMarkers||(gg.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(gf)};P.prototype.detachLine=function(gf){this.lines.splice(dh(this.lines,gf),1);if(!this.lines.length&&this.doc.cm){var gg=this.doc.cm.curOp;(gg.maybeHiddenMarkers||(gg.maybeHiddenMarkers=[])).push(this)}};var a6=0;function eF(gn,gl,gm,gp,gj){if(gp&&gp.shared){return O(gn,gl,gm,gp,gj)}if(gn.cm&&!gn.cm.curOp){return c2(gn.cm,eF)(gn,gl,gm,gp,gj)}var gi=new P(gn,gj),go=cf(gl,gm);if(gp){aN(gp,gi,false)}if(go>0||go==0&&gi.clearWhenEmpty!==false){return gi}if(gi.replacedWith){gi.collapsed=true;gi.widgetNode=f0("span",[gi.replacedWith],"CodeMirror-widget");if(!gp.handleMouseEvents){gi.widgetNode.setAttribute("cm-ignore-events","true")}if(gp.insertLeft){gi.widgetNode.insertLeft=true}}if(gi.collapsed){if(z(gn,gl.line,gl,gm,gi)||gl.line!=gm.line&&z(gn,gm.line,gl,gm,gi)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}a8=true}if(gi.addToHistory){fM(gn,{from:gl,to:gm,origin:"markText"},gn.sel,NaN)}var gg=gl.line,gk=gn.cm,gf;gn.iter(gg,gm.line+1,function(gq){if(gk&&gi.collapsed&&!gk.options.lineWrapping&&y(gq)==gk.display.maxLine){gf=true}if(gi.collapsed&&gg!=gl.line){f3(gq,0)}cd(gq,new ei(gi,gg==gl.line?gl.ch:null,gg==gm.line?gm.ch:null));++gg});if(gi.collapsed){gn.iter(gl.line,gm.line+1,function(gq){if(fw(gn,gq)){f3(gq,0)}})}if(gi.clearOnEnter){bX(gi,"beforeCursorEnter",function(){gi.clear()})}if(gi.readOnly){ga=true;if(gn.history.done.length||gn.history.undone.length){gn.clearHistory()}}if(gi.collapsed){gi.id=++a6;gi.atomic=true}if(gk){if(gf){gk.curOp.updateMaxLine=true}if(gi.collapsed){ah(gk,gl.line,gm.line+1)}else{if(gi.className||gi.title||gi.startStyle||gi.endStyle||gi.css){for(var gh=gl.line;gh<=gm.line;gh++){R(gk,gh,"text")}}}if(gi.atomic){ey(gk.doc)}ae(gk,"markerAdded",gk,gi)}return gi}var x=H.SharedTextMarker=function(gh,gg){this.markers=gh;this.primary=gg;for(var gf=0;gf<gh.length;++gf){gh[gf].parent=this}};by(x);x.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var gf=0;gf<this.markers.length;++gf){this.markers[gf].clear()}ae(this,"clear")};x.prototype.find=function(gg,gf){return this.primary.find(gg,gf)};function O(gj,gm,gl,gf,gh){gf=aN(gf);gf.shared=false;var gk=[eF(gj,gm,gl,gf,gh)],gg=gk[0];var gi=gf.widgetNode;d7(gj,function(go){if(gi){gf.widgetNode=gi.cloneNode(true)}gk.push(eF(go,fJ(go,gm),fJ(go,gl),gf,gh));for(var gn=0;gn<go.linked.length;++gn){if(go.linked[gn].isParent){return}}gg=fG(gk)});return new x(gk,gg)}function eP(gf){return gf.findMarks(W(gf.first,0),gf.clipPos(W(gf.lastLine())),function(gg){return gg.parent})}function dF(gk,gl){for(var gi=0;gi<gl.length;gi++){var gg=gl[gi],gm=gg.find();var gf=gk.clipPos(gm.from),gj=gk.clipPos(gm.to);if(cf(gf,gj)){var gh=eF(gk,gf,gj,gg.primary,gg.primary.type);gg.markers.push(gh);gh.parent=gg}}}function eo(gi){for(var gh=0;gh<gi.length;gh++){var gf=gi[gh],gk=[gf.primary.doc];d7(gf.primary.doc,function(gl){gk.push(gl)});for(var gg=0;gg<gf.markers.length;gg++){var gj=gf.markers[gg];if(dh(gk,gj.doc)==-1){gj.parent=null;gf.markers.splice(gg--,1)}}}}function ei(gf,gh,gg){this.marker=gf;this.from=gh;this.to=gg}function e9(gh,gf){if(gh){for(var gg=0;gg<gh.length;++gg){var gi=gh[gg];if(gi.marker==gf){return gi}}}}function eH(gg,gh){for(var gi,gf=0;gf<gg.length;++gf){if(gg[gf]!=gh){(gi||(gi=[])).push(gg[gf])}}return gi}function cd(gf,gg){gf.markedSpans=gf.markedSpans?gf.markedSpans.concat([gg]):[gg];gg.marker.attachLine(gf)}function aQ(gg,gh,gl){if(gg){for(var gj=0,gm;gj<gg.length;++gj){var gn=gg[gj],gk=gn.marker;var gf=gn.from==null||(gk.inclusiveLeft?gn.from<=gh:gn.from<gh);if(gf||gn.from==gh&&gk.type=="bookmark"&&(!gl||!gn.marker.insertLeft)){var gi=gn.to==null||(gk.inclusiveRight?gn.to>=gh:gn.to>gh);(gm||(gm=[])).push(new ei(gk,gn.from,gi?null:gn.to))}}}return gm}function aB(gg,gi,gl){if(gg){for(var gj=0,gm;gj<gg.length;++gj){var gn=gg[gj],gk=gn.marker;var gh=gn.to==null||(gk.inclusiveRight?gn.to>=gi:gn.to>gi);if(gh||gn.from==gi&&gk.type=="bookmark"&&(!gl||gn.marker.insertLeft)){var gf=gn.from==null||(gk.inclusiveLeft?gn.from<=gi:gn.from<gi);(gm||(gm=[])).push(new ei(gk,gf?null:gn.from-gi,gn.to==null?null:gn.to-gi))}}}return gm}function ek(gr,go){if(go.full){return null}var gn=b9(gr,go.from.line)&&ff(gr,go.from.line).markedSpans;var gu=b9(gr,go.to.line)&&ff(gr,go.to.line).markedSpans;if(!gn&&!gu){return null}var gg=go.from.ch,gj=go.to.ch,gm=cf(go.from,go.to)==0;var gl=aQ(gn,gg,gm);var gt=aB(gu,gj,gm);var gs=go.text.length==1,gh=fG(go.text).length+(gs?gg:0);if(gl){for(var gi=0;gi<gl.length;++gi){var gq=gl[gi];if(gq.to==null){var gv=e9(gt,gq.marker);if(!gv){gq.to=gg}else{if(gs){gq.to=gv.to==null?null:gv.to+gh}}}}}if(gt){for(var gi=0;gi<gt.length;++gi){var gq=gt[gi];if(gq.to!=null){gq.to+=gh}if(gq.from==null){var gv=e9(gl,gq.marker);if(!gv){gq.from=gh;if(gs){(gl||(gl=[])).push(gq)}}}else{gq.from+=gh;if(gs){(gl||(gl=[])).push(gq)}}}}if(gl){gl=q(gl)}if(gt&&gt!=gl){gt=q(gt)}var gk=[gl];if(!gs){var gp=go.text.length-2,gf;if(gp>0&&gl){for(var gi=0;gi<gl.length;++gi){if(gl[gi].to==null){(gf||(gf=[])).push(new ei(gl[gi].marker,null,null))}}}for(var gi=0;gi<gp;++gi){gk.push(gf)}gk.push(gt)}return gk}function q(gg){for(var gf=0;gf<gg.length;++gf){var gh=gg[gf];if(gh.from!=null&&gh.from==gh.to&&gh.marker.clearWhenEmpty!==false){gg.splice(gf--,1)}}if(!gg.length){return null}return gg}function d9(gn,gl){var gf=b4(gn,gl);var go=ek(gn,gl);if(!gf){return go}if(!go){return gf}for(var gi=0;gi<gf.length;++gi){var gj=gf[gi],gk=go[gi];if(gj&&gk){spans:for(var gh=0;gh<gk.length;++gh){var gm=gk[gh];for(var gg=0;gg<gj.length;++gg){if(gj[gg].marker==gm.marker){continue spans}}gj.push(gm)}}else{if(gk){gf[gi]=gk}}}return gf}function cH(gr,gp,gq){var gj=null;gr.iter(gp.line,gq.line+1,function(gs){if(gs.markedSpans){for(var gt=0;gt<gs.markedSpans.length;++gt){var gu=gs.markedSpans[gt].marker;if(gu.readOnly&&(!gj||dh(gj,gu)==-1)){(gj||(gj=[])).push(gu)}}}});if(!gj){return null}var gk=[{from:gp,to:gq}];for(var gl=0;gl<gj.length;++gl){var gm=gj[gl],gh=gm.find(0);for(var gi=0;gi<gk.length;++gi){var gg=gk[gi];if(cf(gg.to,gh.from)<0||cf(gg.from,gh.to)>0){continue}var go=[gi,1],gf=cf(gg.from,gh.from),gn=cf(gg.to,gh.to);if(gf<0||!gm.inclusiveLeft&&!gf){go.push({from:gg.from,to:gh.from})}if(gn>0||!gm.inclusiveRight&&!gn){go.push({from:gh.to,to:gg.to})}gk.splice.apply(gk,go);gi+=go.length-1}}return gk}function f6(gf){var gh=gf.markedSpans;if(!gh){return}for(var gg=0;gg<gh.length;++gg){gh[gg].marker.detachLine(gf)}gf.markedSpans=null}function c3(gf,gh){if(!gh){return}for(var gg=0;gg<gh.length;++gg){gh[gg].marker.attachLine(gf)}gf.markedSpans=gh}function v(gf){return gf.inclusiveLeft?-1:0}function bW(gf){return gf.inclusiveRight?1:0}function dQ(gi,gg){var gk=gi.lines.length-gg.lines.length;if(gk!=0){return gk}var gh=gi.find(),gl=gg.find();var gf=cf(gh.from,gl.from)||v(gi)-v(gg);if(gf){return -gf}var gj=cf(gh.to,gl.to)||bW(gi)-bW(gg);if(gj){return gj}return gg.id-gi.id}function a7(gg,gk){var gf=a8&&gg.markedSpans,gj;if(gf){for(var gi,gh=0;gh<gf.length;++gh){gi=gf[gh];if(gi.marker.collapsed&&(gk?gi.from:gi.to)==null&&(!gj||dQ(gj,gi.marker)<0)){gj=gi.marker}}}return gj}function eO(gf){return a7(gf,true)}function ew(gf){return a7(gf,false)}function z(gn,gh,gl,gm,gj){var gq=ff(gn,gh);var gf=a8&&gq.markedSpans;if(gf){for(var gi=0;gi<gf.length;++gi){var gg=gf[gi];if(!gg.marker.collapsed){continue}var gp=gg.marker.find(0);var go=cf(gp.from,gl)||v(gg.marker)-v(gj);var gk=cf(gp.to,gm)||bW(gg.marker)-bW(gj);if(go>=0&&gk<=0||go<=0&&gk>=0){continue}if(go<=0&&(cf(gp.to,gl)>0||(gg.marker.inclusiveRight&&gj.inclusiveLeft))||go>=0&&(cf(gp.from,gm)<0||(gg.marker.inclusiveLeft&&gj.inclusiveRight))){return true}}}}function y(gg){var gf;while(gf=eO(gg)){gg=gf.find(-1,true).line}return gg}function h(gh){var gf,gg;while(gf=ew(gh)){gh=gf.find(1,true).line;(gg||(gg=[])).push(gh)}return gg}function aW(gi,gg){var gf=ff(gi,gg),gh=y(gf);if(gf==gh){return gg}return bN(gh)}function d3(gi,gh){if(gh>gi.lastLine()){return gh}var gg=ff(gi,gh),gf;if(!fw(gi,gg)){return gh}while(gf=ew(gg)){gg=gf.find(1,true).line}return bN(gg)+1}function fw(gj,gg){var gf=a8&&gg.markedSpans;if(gf){for(var gi,gh=0;gh<gf.length;++gh){gi=gf[gh];if(!gi.marker.collapsed){continue}if(gi.from==null){return true}if(gi.marker.widgetNode){continue}if(gi.from==0&&gi.marker.inclusiveLeft&&T(gj,gg,gi)){return true}}}}function T(gk,gg,gi){if(gi.to==null){var gf=gi.marker.find(1,true);return T(gk,gf.line,e9(gf.line.markedSpans,gi.marker))}if(gi.marker.inclusiveRight&&gi.to==gg.text.length){return true}for(var gj,gh=0;gh<gg.markedSpans.length;++gh){gj=gg.markedSpans[gh];if(gj.marker.collapsed&&!gj.marker.widgetNode&&gj.from==gi.to&&(gj.to==null||gj.to!=gi.from)&&(gj.marker.inclusiveLeft||gi.marker.inclusiveRight)&&T(gk,gg,gj)){return true}}}var dB=H.LineWidget=function(gi,gh,gf){if(gf){for(var gg in gf){if(gf.hasOwnProperty(gg)){this[gg]=gf[gg]}}}this.doc=gi;this.node=gh};by(dB);function dZ(gf,gg,gh){if(bM(gg)<((gf.curOp&&gf.curOp.scrollTop)||gf.doc.scrollTop)){cL(gf,null,gh)}}dB.prototype.clear=function(){var gg=this.doc.cm,gi=this.line.widgets,gh=this.line,gk=bN(gh);if(gk==null||!gi){return}for(var gj=0;gj<gi.length;++gj){if(gi[gj]==this){gi.splice(gj--,1)}}if(!gi.length){gh.widgets=null}var gf=cY(this);f3(gh,Math.max(0,gh.height-gf));if(gg){cM(gg,function(){dZ(gg,gh,-gf);R(gg,gk,"widget")})}};dB.prototype.changed=function(){var gg=this.height,gf=this.doc.cm,gh=this.line;this.height=null;var gi=cY(this)-gg;if(!gi){return}f3(gh,gh.height+gi);if(gf){cM(gf,function(){gf.curOp.forceUpdate=true;dZ(gf,gh,gi)})}};function cY(gh){if(gh.height!=null){return gh.height}var gf=gh.doc.cm;if(!gf){return 0}if(!f8(document.body,gh.node)){var gg="position: relative;";if(gh.coverGutter){gg+="margin-left: -"+gf.display.gutters.offsetWidth+"px;"}if(gh.noHScroll){gg+="width: "+gf.display.wrapper.clientWidth+"px;"}bR(gf.display.measure,f0("div",[gh.node],null,gg))}return gh.height=gh.node.offsetHeight}function bH(gk,gj,gh,gg){var gi=new dB(gk,gh,gg);var gf=gk.cm;if(gf&&gi.noHScroll){gf.display.alignWidgets=true}ez(gk,gj,"widget",function(gm){var gn=gm.widgets||(gm.widgets=[]);if(gi.insertAt==null){gn.push(gi)}else{gn.splice(Math.min(gn.length-1,Math.max(0,gi.insertAt)),0,gi)}gi.line=gm;if(gf&&!fw(gk,gm)){var gl=bM(gm)<gk.scrollTop;f3(gm,gm.height+cY(gi));if(gl){cL(gf,null,gi.height)}gf.curOp.forceUpdate=true}return true});return gi}var f4=H.Line=function(gh,gg,gf){this.text=gh;c3(this,gg);this.height=gf?gf(this):1};by(f4);f4.prototype.lineNo=function(){return bN(this)};function em(gg,gj,gh,gf){gg.text=gj;if(gg.stateAfter){gg.stateAfter=null}if(gg.styles){gg.styles=null}if(gg.order!=null){gg.order=null}f6(gg);c3(gg,gh);var gi=gf?gf(gg):1;if(gi!=gg.height){f3(gg,gi)}}function bB(gf){gf.parent=null;f6(gf)}function di(gh,gg){if(gh){for(;;){var gf=gh.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!gf){break}gh=gh.slice(0,gf.index)+gh.slice(gf.index+gf[0].length);var gi=gf[1]?"bgClass":"textClass";if(gg[gi]==null){gg[gi]=gf[2]}else{if(!(new RegExp("(?:^|s)"+gf[2]+"(?:$|s)")).test(gg[gi])){gg[gi]+=" "+gf[2]}}}}return gh}function fq(gh,gg){if(gh.blankLine){return gh.blankLine(gg)}if(!gh.innerMode){return}var gf=H.innerMode(gh,gg);if(gf.mode.blankLine){return gf.mode.blankLine(gf.state)}}function eA(gk,gj,gi,gf){for(var gg=0;gg<10;gg++){if(gf){gf[0]=H.innerMode(gk,gi).mode}var gh=gk.token(gj,gi);if(gj.pos>gj.start){return gh}}throw new Error("Mode "+gk.name+" failed to advance stream.")}function cq(go,gm,gj,gi){function gf(gr){return{start:gp.start,end:gp.pos,string:gp.current(),type:gh||null,state:gr?b3(gn.mode,gg):gg}}var gn=go.doc,gk=gn.mode,gh;gm=fJ(gn,gm);var gq=ff(gn,gm.line),gg=dC(go,gm.line,gj);var gp=new eT(gq.text,go.options.tabSize),gl;if(gi){gl=[]}while((gi||gp.pos<gm.ch)&&!gp.eol()){gp.start=gp.pos;gh=eA(gk,gp,gg);if(gi){gl.push(gf(true))}}return gi?gl:gf()}function w(gp,gr,gk,gg,gl,gi,gj){var gh=gk.flattenSpans;if(gh==null){gh=gp.options.flattenSpans}var gn=0,gm=null;var gq=new eT(gr,gp.options.tabSize),gf;var gt=gp.options.addModeClass&&[null];if(gr==""){di(fq(gk,gg),gi)}while(!gq.eol()){if(gq.pos>gp.options.maxHighlightLength){gh=false;if(gj){dx(gp,gr,gg,gq.pos)}gq.pos=gr.length;gf=null}else{gf=di(eA(gk,gq,gg,gt),gi)}if(gt){var gs=gt[0].name;if(gs){gf="m-"+(gf?gs+" "+gf:gs)}}if(!gh||gm!=gf){while(gn<gq.start){gn=Math.min(gq.start,gn+50000);gl(gn,gm)}gm=gf}gq.start=gq.pos}while(gn<gq.pos){var go=Math.min(gq.pos,gn+50000);gl(go,gm);gn=go}}function fz(gm,go,gf,gj){var gn=[gm.state.modeGen],gi={};w(gm,go.text,gm.doc.mode,gf,function(gp,gq){gn.push(gp,gq)},gi,gj);for(var gg=0;gg<gm.state.overlays.length;++gg){var gk=gm.state.overlays[gg],gl=1,gh=0;w(gm,go.text,gk.mode,true,function(gp,gr){var gt=gl;while(gh<gp){var gq=gn[gl];if(gq>gp){gn.splice(gl,1,gp,gn[gl+1],gq)}gl+=2;gh=Math.min(gp,gq)}if(!gr){return}if(gk.opaque){gn.splice(gt,gl-gt,gp,"cm-overlay "+gr);gl=gt+2}else{for(;gt<gl;gt+=2){var gs=gn[gt+1];gn[gt+1]=(gs?gs+" ":"")+"cm-overlay "+gr}}},gi)}return{styles:gn,classes:gi.bgClass||gi.textClass?gi:null}}function c6(gg,gh,gi){if(!gh.styles||gh.styles[0]!=gg.state.modeGen){var gf=fz(gg,gh,gh.stateAfter=dC(gg,bN(gh)));gh.styles=gf.styles;if(gf.classes){gh.styleClasses=gf.classes}else{if(gh.styleClasses){gh.styleClasses=null}}if(gi===gg.doc.frontier){gg.doc.frontier++}}return gh.styles}function dx(gf,gk,gh,gg){var gj=gf.doc.mode;var gi=new eT(gk,gf.options.tabSize);gi.start=gi.pos=gg||0;if(gk==""){fq(gj,gh)}while(!gi.eol()&&gi.pos<=gf.options.maxHighlightLength){eA(gj,gi,gh);gi.start=gi.pos}}var dW={},b1={};function eW(gh,gg){if(!gh||/^\s*$/.test(gh)){return null}var gf=gg.addModeClass?b1:dW;return gf[gh]||(gf[gh]=gh.replace(/\S+/g,"cm-$&"))}function eR(gg,gk){var gl=f0("span",null,null,c0?"padding-right: .1px":null);var gi={pre:f0("pre",[gl]),content:gl,col:0,pos:0,cm:gg,splitSpaces:(dK||c0)&&gg.getOption("lineWrapping")};gk.measure={};for(var gj=0;gj<=(gk.rest?gk.rest.length:0);gj++){var gh=gj?gk.rest[gj-1]:gk.line,gf;gi.pos=0;gi.addToken=t;if(bO(gg.display.measure)&&(gf=a(gh))){gi.addToken=U(gi.addToken,gf)}gi.map=[];var gm=gk!=gg.display.externalMeasured&&bN(gh);bo(gh,gi,c6(gg,gh,gm));if(gh.styleClasses){if(gh.styleClasses.bgClass){gi.bgClass=fS(gh.styleClasses.bgClass,gi.bgClass||"")}if(gh.styleClasses.textClass){gi.textClass=fS(gh.styleClasses.textClass,gi.textClass||"")}}if(gi.map.length==0){gi.map.push(0,0,gi.content.appendChild(bn(gg.display.measure)))}if(gj==0){gk.measure.map=gi.map;gk.measure.cache={}}else{(gk.measure.maps||(gk.measure.maps=[])).push(gi.map);(gk.measure.caches||(gk.measure.caches=[])).push({})}}if(c0&&/\bcm-tab\b/.test(gi.content.lastChild.className)){gi.content.className="cm-tab-wrap-hack"}aE(gg,"renderLine",gg,gk.line,gi.pre);if(gi.pre.className){gi.textClass=fS(gi.pre.className,gi.textClass||"")}return gi}function fc(gg){var gf=f0("span","\u2022","cm-invalidchar");gf.title="\\u"+gg.charCodeAt(0).toString(16);gf.setAttribute("aria-label",gf.title);return gf}function t(gq,gl,gv,gs,go,gx,gk){if(!gl){return}var gu=gq.splitSpaces?gl.replace(/ {3,}/g,cF):gl;var gf=gq.cm.state.specialChars,gg=false;if(!gf.test(gl)){gq.col+=gl.length;var gt=document.createTextNode(gu);gq.map.push(gq.pos,gq.pos+gl.length,gt);if(dK&&k<9){gg=true}gq.pos+=gl.length}else{var gt=document.createDocumentFragment(),gi=0;while(true){gf.lastIndex=gi;var gr=gf.exec(gl);var gw=gr?gr.index-gi:gl.length-gi;if(gw){var gn=document.createTextNode(gu.slice(gi,gi+gw));if(dK&&k<9){gt.appendChild(f0("span",[gn]))}else{gt.appendChild(gn)}gq.map.push(gq.pos,gq.pos+gw,gn);gq.col+=gw;gq.pos+=gw}if(!gr){break}gi+=gw+1;if(gr[0]=="\t"){var gp=gq.cm.options.tabSize,gm=gp-gq.col%gp;var gn=gt.appendChild(f0("span",cp(gm),"cm-tab"));gn.setAttribute("role","presentation");gn.setAttribute("cm-text","\t");gq.col+=gm}else{var gn=gq.cm.options.specialCharPlaceholder(gr[0]);gn.setAttribute("cm-text",gr[0]);if(dK&&k<9){gt.appendChild(f0("span",[gn]))}else{gt.appendChild(gn)}gq.col+=1}gq.map.push(gq.pos,gq.pos+1,gn);gq.pos++}}if(gv||gs||go||gg||gk){var gh=gv||"";if(gs){gh+=gs}if(go){gh+=go}var gj=f0("span",[gt],gh,gk);if(gx){gj.title=gx}return gq.content.appendChild(gj)}gq.content.appendChild(gt)}function cF(gf){var gg=" ";for(var gh=0;gh<gf.length-2;++gh){gg+=gh%2?" ":"\u00a0"}gg+=" ";return gg}function U(gg,gf){return function(go,gq,gh,gl,gr,gp,gn){gh=gh?gh+" cm-force-border":"cm-force-border";var gi=go.pos,gk=gi+gq.length;for(;;){for(var gm=0;gm<gf.length;gm++){var gj=gf[gm];if(gj.to>gi&&gj.from<=gi){break}}if(gj.to>=gk){return gg(go,gq,gh,gl,gr,gp,gn)}gg(go,gq.slice(0,gj.to-gi),gh,gl,null,gp,gn);gl=null;gq=gq.slice(gj.to-gi);gi=gj.to}}}function ac(gg,gi,gf,gh){var gj=!gh&&gf.widgetNode;if(gj){gg.map.push(gg.pos,gg.pos+gi,gj)}if(!gh&&gg.cm.display.input.needsContentAttribute){if(!gj){gj=gg.content.appendChild(document.createElement("span"))}gj.setAttribute("cm-marker",gf.id)}if(gj){gg.cm.display.input.setUneditable(gj);gg.content.appendChild(gj)}gg.pos+=gi}function bo(go,gv,gn){var gk=go.markedSpans,gm=go.text,gt=0;if(!gk){for(var gy=1;gy<gn.length;gy+=2){gv.addToken(gv,gm.slice(gt,gt=gn[gy]),eW(gn[gy+1],gv.cm.options))}return}var gz=gm.length,gj=0,gy=1,gr="",gA,gp;var gC=0,gf,gB,gs,gD,gh;for(;;){if(gC==gj){gf=gB=gs=gD=gp="";gh=null;gC=Infinity;var gl=[];for(var gw=0;gw<gk.length;++gw){var gx=gk[gw],gu=gx.marker;if(gx.from<=gj&&(gx.to==null||gx.to>gj)){if(gx.to!=null&&gC>gx.to){gC=gx.to;gB=""}if(gu.className){gf+=" "+gu.className}if(gu.css){gp=gu.css}if(gu.startStyle&&gx.from==gj){gs+=" "+gu.startStyle}if(gu.endStyle&&gx.to==gC){gB+=" "+gu.endStyle}if(gu.title&&!gD){gD=gu.title}if(gu.collapsed&&(!gh||dQ(gh.marker,gu)<0)){gh=gx}}else{if(gx.from>gj&&gC>gx.from){gC=gx.from}}if(gu.type=="bookmark"&&gx.from==gj&&gu.widgetNode){gl.push(gu)}}if(gh&&(gh.from||0)==gj){ac(gv,(gh.to==null?gz+1:gh.to)-gj,gh.marker,gh.from==null);if(gh.to==null){return}}if(!gh&&gl.length){for(var gw=0;gw<gl.length;++gw){ac(gv,0,gl[gw])}}}if(gj>=gz){break}var gq=Math.min(gz,gC);while(true){if(gr){var gg=gj+gr.length;if(!gh){var gi=gg>gq?gr.slice(0,gq-gj):gr;gv.addToken(gv,gi,gA?gA+gf:gf,gs,gj+gi.length==gC?gB:"",gD,gp)}if(gg>=gq){gr=gr.slice(gq-gj);gj=gq;break}gj=gg;gs=""}gr=gm.slice(gt,gt=gn[gy++]);gA=eW(gn[gy++],gv.cm.options)}}}function dS(gf,gg){return gg.from.ch==0&&gg.to.ch==0&&fG(gg.text)==""&&(!gf.cm||gf.cm.options.wholeLineUpdateBefore)}function fy(gs,gn,gg,gj){function gt(gv){return gg?gg[gv]:null}function gh(gv,gx,gw){em(gv,gx,gw,gj);ae(gv,"change",gv,gn)}function gf(gy,gw){for(var gx=gy,gv=[];gx<gw;++gx){gv.push(new f4(gu[gx],gt(gx),gj))}return gv}var gr=gn.from,gq=gn.to,gu=gn.text;var go=ff(gs,gr.line),gp=ff(gs,gq.line);var gm=fG(gu),gi=gt(gu.length-1),gl=gq.line-gr.line;if(gn.full){gs.insert(0,gf(0,gu.length));gs.remove(gu.length,gs.size-gu.length)}else{if(dS(gs,gn)){var gk=gf(0,gu.length-1);gh(gp,gp.text,gi);if(gl){gs.remove(gr.line,gl)}if(gk.length){gs.insert(gr.line,gk)}}else{if(go==gp){if(gu.length==1){gh(go,go.text.slice(0,gr.ch)+gm+go.text.slice(gq.ch),gi)}else{var gk=gf(1,gu.length-1);gk.push(new f4(gm+go.text.slice(gq.ch),gi,gj));gh(go,go.text.slice(0,gr.ch)+gu[0],gt(0));gs.insert(gr.line+1,gk)}}else{if(gu.length==1){gh(go,go.text.slice(0,gr.ch)+gu[0]+gp.text.slice(gq.ch),gt(0));gs.remove(gr.line+1,gl)}else{gh(go,go.text.slice(0,gr.ch)+gu[0],gt(0));gh(gp,gm+gp.text.slice(gq.ch),gi);var gk=gf(1,gu.length-1);if(gl>1){gs.remove(gr.line+1,gl-1)}gs.insert(gr.line+1,gk)}}}}ae(gs,"change",gs,gn)}function eZ(gg){this.lines=gg;this.parent=null;for(var gh=0,gf=0;gh<gg.length;++gh){gg[gh].parent=this;gf+=gg[gh].height}this.height=gf}eZ.prototype={chunkSize:function(){return this.lines.length},removeInner:function(gf,gj){for(var gh=gf,gi=gf+gj;gh<gi;++gh){var gg=this.lines[gh];this.height-=gg.height;bB(gg);ae(gg,"delete")}this.lines.splice(gf,gj)},collapse:function(gf){gf.push.apply(gf,this.lines)},insertInner:function(gg,gh,gf){this.height+=gf;this.lines=this.lines.slice(0,gg).concat(gh).concat(this.lines.slice(gg));for(var gi=0;gi<gh.length;++gi){gh[gi].parent=this}},iterN:function(gf,gi,gh){for(var gg=gf+gi;gf<gg;++gf){if(gh(this.lines[gf])){return true}}}};function fx(gi){this.children=gi;var gh=0,gf=0;for(var gg=0;gg<gi.length;++gg){var gj=gi[gg];gh+=gj.chunkSize();gf+=gj.height;gj.parent=this}this.size=gh;this.height=gf;this.parent=null}fx.prototype={chunkSize:function(){return this.size},removeInner:function(gf,gm){this.size-=gm;for(var gh=0;gh<this.children.length;++gh){var gl=this.children[gh],gj=gl.chunkSize();if(gf<gj){var gi=Math.min(gm,gj-gf),gk=gl.height;gl.removeInner(gf,gi);this.height-=gk-gl.height;if(gj==gi){this.children.splice(gh--,1);gl.parent=null}if((gm-=gi)==0){break}gf=0}else{gf-=gj}}if(this.size-gm<25&&(this.children.length>1||!(this.children[0] instanceof eZ))){var gg=[];this.collapse(gg);this.children=[new eZ(gg)];this.children[0].parent=this}},collapse:function(gf){for(var gg=0;gg<this.children.length;++gg){this.children[gg].collapse(gf)}},insertInner:function(gg,gh,gf){this.size+=gh.length;this.height+=gf;for(var gk=0;gk<this.children.length;++gk){var gm=this.children[gk],gl=gm.chunkSize();if(gg<=gl){gm.insertInner(gg,gh,gf);if(gm.lines&&gm.lines.length>50){while(gm.lines.length>50){var gj=gm.lines.splice(gm.lines.length-25,25);var gi=new eZ(gj);gm.height-=gi.height;this.children.splice(gk+1,0,gi);gi.parent=this}this.maybeSpill()}break}gg-=gl}},maybeSpill:function(){if(this.children.length<=10){return}var gi=this;do{var gg=gi.children.splice(gi.children.length-5,5);var gh=new fx(gg);if(!gi.parent){var gj=new fx(gi.children);gj.parent=gi;gi.children=[gj,gh];gi=gj}else{gi.size-=gh.size;gi.height-=gh.height;var gf=dh(gi.parent.children,gi);gi.parent.children.splice(gf+1,0,gh)}gh.parent=gi.parent}while(gi.children.length>10);gi.parent.maybeSpill()},iterN:function(gf,gl,gk){for(var gg=0;gg<this.children.length;++gg){var gj=this.children[gg],gi=gj.chunkSize();if(gf<gi){var gh=Math.min(gl,gi-gf);if(gj.iterN(gf,gh,gk)){return true}if((gl-=gh)==0){break}gf=0}else{gf-=gi}}}};var cr=0;var at=H.Doc=function(gh,gg,gf){if(!(this instanceof at)){return new at(gh,gg,gf)}if(gf==null){gf=0}fx.call(this,[new eZ([new f4("",null)])]);this.first=gf;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=gf;var gi=W(gf,0);this.sel=eS(gi);this.history=new fT(null);this.id=++cr;this.modeOption=gg;if(typeof gh=="string"){gh=a1(gh)}fy(this,{from:gi,to:gi,text:gh});bU(this,eS(gi),Z)};at.prototype=ck(fx.prototype,{constructor:at,iter:function(gh,gg,gf){if(gf){this.iterN(gh-this.first,gg-gh,gf)}else{this.iterN(this.first,this.first+this.size,gh)}},insert:function(gg,gh){var gf=0;for(var gi=0;gi<gh.length;++gi){gf+=gh[gi].height}this.insertInner(gg-this.first,gh,gf)},remove:function(gf,gg){this.removeInner(gf-this.first,gg)},getValue:function(gg){var gf=a3(this,this.first,this.first+this.size);if(gg===false){return gf}return gf.join(gg||"\n")},setValue:cD(function(gg){var gh=W(this.first,0),gf=this.first+this.size-1;bg(this,{from:gh,to:W(gf,ff(this,gf).text.length),text:a1(gg),origin:"setValue",full:true},true);bU(this,eS(gh))}),replaceRange:function(gg,gi,gh,gf){gi=fJ(this,gi);gh=gh?fJ(this,gh):gi;a2(this,gg,gi,gh,gf)},getRange:function(gi,gh,gg){var gf=f2(this,fJ(this,gi),fJ(this,gh));if(gg===false){return gf}return gf.join(gg||"\n")},getLine:function(gg){var gf=this.getLineHandle(gg);return gf&&gf.text},getLineHandle:function(gf){if(b9(this,gf)){return ff(this,gf)}},getLineNumber:function(gf){return bN(gf)},getLineHandleVisualStart:function(gf){if(typeof gf=="number"){gf=ff(this,gf)}return y(gf)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(gf){return fJ(this,gf)},getCursor:function(gh){var gf=this.sel.primary(),gg;if(gh==null||gh=="head"){gg=gf.head}else{if(gh=="anchor"){gg=gf.anchor}else{if(gh=="end"||gh=="to"||gh===false){gg=gf.to()}else{gg=gf.from()}}}return gg},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cD(function(gf,gh,gg){F(this,fJ(this,typeof gf=="number"?W(gf,gh||0):gf),null,gg)}),setSelection:cD(function(gg,gh,gf){F(this,fJ(this,gg),fJ(this,gh||gg),gf)}),extendSelection:cD(function(gh,gf,gg){fV(this,fJ(this,gh),gf&&fJ(this,gf),gg)}),extendSelections:cD(function(gg,gf){aw(this,d0(this,gg,gf))}),extendSelectionsBy:cD(function(gg,gf){aw(this,bS(this.sel.ranges,gg),gf)}),setSelections:cD(function(gf,gj,gh){if(!gf.length){return}for(var gi=0,gg=[];gi<gf.length;gi++){gg[gi]=new dY(fJ(this,gf[gi].anchor),fJ(this,gf[gi].head))}if(gj==null){gj=Math.min(gf.length-1,this.sel.primIndex)}bU(this,cw(gg,gj),gh)}),addSelection:cD(function(gh,gi,gg){var gf=this.sel.ranges.slice(0);gf.push(new dY(fJ(this,gh),fJ(this,gi||gh)));bU(this,cw(gf,gf.length-1),gg)}),getSelection:function(gj){var gg=this.sel.ranges,gf;for(var gh=0;gh<gg.length;gh++){var gi=f2(this,gg[gh].from(),gg[gh].to());gf=gf?gf.concat(gi):gi}if(gj===false){return gf}else{return gf.join(gj||"\n")}},getSelections:function(gj){var gi=[],gf=this.sel.ranges;for(var gg=0;gg<gf.length;gg++){var gh=f2(this,gf[gg].from(),gf[gg].to());if(gj!==false){gh=gh.join(gj||"\n")}gi[gg]=gh}return gi},replaceSelection:function(gh,gj,gf){var gi=[];for(var gg=0;gg<this.sel.ranges.length;gg++){gi[gg]=gh}this.replaceSelections(gi,gj,gf||"+input")},replaceSelections:cD(function(gk,gm,gh){var gj=[],gl=this.sel;for(var gi=0;gi<gl.ranges.length;gi++){var gg=gl.ranges[gi];gj[gi]={from:gg.from(),to:gg.to(),text:a1(gk[gi]),origin:gh}}var gf=gm&&gm!="end"&&af(this,gj,gm);for(var gi=gj.length-1;gi>=0;gi--){bg(this,gj[gi])}if(gf){e7(this,gf)}else{if(this.cm){fF(this.cm)}}}),undo:cD(function(){b8(this,"undo")}),redo:cD(function(){b8(this,"redo")}),undoSelection:cD(function(){b8(this,"undo",true)}),redoSelection:cD(function(){b8(this,"redo",true)}),setExtending:function(gf){this.extend=gf},getExtending:function(){return this.extend},historySize:function(){var gi=this.history,gf=0,gh=0;for(var gg=0;gg<gi.done.length;gg++){if(!gi.done[gg].ranges){++gf}}for(var gg=0;gg<gi.undone.length;gg++){if(!gi.undone[gg].ranges){++gh}}return{undo:gf,redo:gh}},clearHistory:function(){this.history=new fT(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(gf){if(gf){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(gf){return this.history.generation==(gf||this.cleanGeneration)},getHistory:function(){return{done:bP(this.history.done),undone:bP(this.history.undone)}},setHistory:function(gg){var gf=this.history=new fT(this.history.maxGeneration);gf.done=bP(gg.done.slice(0),null,true);gf.undone=bP(gg.undone.slice(0),null,true)},addLineClass:cD(function(gh,gg,gf){return ez(this,gh,gg=="gutter"?"gutter":"class",function(gi){var gj=gg=="text"?"textClass":gg=="background"?"bgClass":gg=="gutter"?"gutterClass":"wrapClass";if(!gi[gj]){gi[gj]=gf}else{if(S(gf).test(gi[gj])){return false}else{gi[gj]+=" "+gf}}return true})}),removeLineClass:cD(function(gh,gg,gf){return ez(this,gh,gg=="gutter"?"gutter":"class",function(gj){var gm=gg=="text"?"textClass":gg=="background"?"bgClass":gg=="gutter"?"gutterClass":"wrapClass";var gl=gj[gm];if(!gl){return false}else{if(gf==null){gj[gm]=null}else{var gk=gl.match(S(gf));if(!gk){return false}var gi=gk.index+gk[0].length;gj[gm]=gl.slice(0,gk.index)+(!gk.index||gi==gl.length?"":" ")+gl.slice(gi)||null}}return true})}),addLineWidget:cD(function(gh,gg,gf){return bH(this,gh,gg,gf)}),removeLineWidget:function(gf){gf.clear()},markText:function(gh,gg,gf){return eF(this,fJ(this,gh),fJ(this,gg),gf,"range")},setBookmark:function(gh,gf){var gg={replacedWith:gf&&(gf.nodeType==null?gf.widget:gf),insertLeft:gf&&gf.insertLeft,clearWhenEmpty:false,shared:gf&&gf.shared,handleMouseEvents:gf&&gf.handleMouseEvents};gh=fJ(this,gh);return eF(this,gh,gh,gg,"bookmark")},findMarksAt:function(gj){gj=fJ(this,gj);var gi=[],gg=ff(this,gj.line).markedSpans;if(gg){for(var gf=0;gf<gg.length;++gf){var gh=gg[gf];if((gh.from==null||gh.from<=gj.ch)&&(gh.to==null||gh.to>=gj.ch)){gi.push(gh.marker.parent||gh.marker)}}}return gi},findMarks:function(gj,gi,gf){gj=fJ(this,gj);gi=fJ(this,gi);var gg=[],gh=gj.line;this.iter(gj.line,gi.line+1,function(gk){var gm=gk.markedSpans;if(gm){for(var gl=0;gl<gm.length;gl++){var gn=gm[gl];if(!(gh==gj.line&&gj.ch>gn.to||gn.from==null&&gh!=gj.line||gh==gi.line&&gn.from>gi.ch)&&(!gf||gf(gn.marker))){gg.push(gn.marker.parent||gn.marker)}}}++gh});return gg},getAllMarks:function(){var gf=[];this.iter(function(gh){var gg=gh.markedSpans;if(gg){for(var gi=0;gi<gg.length;++gi){if(gg[gi].from!=null){gf.push(gg[gi].marker)}}}});return gf},posFromIndex:function(gg){var gf,gh=this.first;this.iter(function(gi){var gj=gi.text.length+1;if(gj>gg){gf=gg;return true}gg-=gj;++gh});return fJ(this,W(gh,gf))},indexFromPos:function(gg){gg=fJ(this,gg);var gf=gg.ch;if(gg.line<this.first||gg.ch<0){return 0}this.iter(this.first,gg.line,function(gh){gf+=gh.text.length+1});return gf},copy:function(gf){var gg=new at(a3(this,this.first,this.first+this.size),this.modeOption,this.first);gg.scrollTop=this.scrollTop;gg.scrollLeft=this.scrollLeft;gg.sel=this.sel;gg.extend=false;if(gf){gg.history.undoDepth=this.history.undoDepth;gg.setHistory(this.getHistory())}return gg},linkedDoc:function(gf){if(!gf){gf={}}var gi=this.first,gh=this.first+this.size;if(gf.from!=null&&gf.from>gi){gi=gf.from}if(gf.to!=null&&gf.to<gh){gh=gf.to}var gg=new at(a3(this,gi,gh),gf.mode||this.modeOption,gi);if(gf.sharedHist){gg.history=this.history}(this.linked||(this.linked=[])).push({doc:gg,sharedHist:gf.sharedHist});gg.linked=[{doc:this,isParent:true,sharedHist:gf.sharedHist}];dF(gg,eP(this));return gg},unlinkDoc:function(gg){if(gg instanceof H){gg=gg.doc}if(this.linked){for(var gh=0;gh<this.linked.length;++gh){var gi=this.linked[gh];if(gi.doc!=gg){continue}this.linked.splice(gh,1);gg.unlinkDoc(this);eo(eP(this));break}}if(gg.history==this.history){var gf=[gg.id];d7(gg,function(gj){gf.push(gj.id)},true);gg.history=new fT(null);gg.history.done=bP(this.history.done,gf);gg.history.undone=bP(this.history.undone,gf)}},iterLinkedDocs:function(gf){d7(this,gf)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});at.prototype.eachLine=at.prototype.iter;var d="iter insert remove copy getEditor".split(" ");for(var bK in at.prototype){if(at.prototype.hasOwnProperty(bK)&&dh(d,bK)<0){H.prototype[bK]=(function(gf){return function(){return gf.apply(this.doc,arguments)}})(at.prototype[bK])}}by(at);function d7(gi,gh,gg){function gf(go,gm,gk){if(go.linked){for(var gl=0;gl<go.linked.length;++gl){var gj=go.linked[gl];if(gj.doc==gm){continue}var gn=gk&&gj.sharedHist;if(gg&&!gn){continue}gh(gj.doc,gn);gf(gj.doc,go,gn)}}}gf(gi,null,true)}function eb(gf,gg){if(gg.cm){throw new Error("This document is already in use.")}gf.doc=gg;gg.cm=gf;X(gf);br(gf);if(!gf.options.lineWrapping){g(gf)}gf.options.mode=gg.modeOption;ah(gf)}function ff(gi,gk){gk-=gi.first;if(gk<0||gk>=gi.size){throw new Error("There is no line "+(gk+gi.first)+" in the document.")}for(var gf=gi;!gf.lines;){for(var gg=0;;++gg){var gj=gf.children[gg],gh=gj.chunkSize();if(gk<gh){gf=gj;break}gk-=gh}}return gf.lines[gk]}function f2(gh,gj,gf){var gg=[],gi=gj.line;gh.iter(gj.line,gf.line+1,function(gk){var gl=gk.text;if(gi==gf.line){gl=gl.slice(0,gf.ch)}if(gi==gj.line){gl=gl.slice(gj.ch)}gg.push(gl);++gi});return gg}function a3(gg,gi,gh){var gf=[];gg.iter(gi,gh,function(gj){gf.push(gj.text)});return gf}function f3(gg,gf){var gh=gf-gg.height;if(gh){for(var gi=gg;gi;gi=gi.parent){gi.height+=gh}}}function bN(gf){if(gf.parent==null){return null}var gj=gf.parent,gi=dh(gj.lines,gf);for(var gg=gj.parent;gg;gj=gg,gg=gg.parent){for(var gh=0;;++gh){if(gg.children[gh]==gj){break}gi+=gg.children[gh].chunkSize()}}return gi+gj.first}function bG(gh,gk){var gm=gh.first;outer:do{for(var gi=0;gi<gh.children.length;++gi){var gl=gh.children[gi],gj=gl.height;if(gk<gj){gh=gl;continue outer}gk-=gj;gm+=gl.chunkSize()}return gm}while(!gh.lines);for(var gi=0;gi<gh.lines.length;++gi){var gg=gh.lines[gi],gf=gg.height;if(gk<gf){break}gk-=gf}return gm+gi}function bM(gh){gh=y(gh);var gj=0,gg=gh.parent;for(var gi=0;gi<gg.lines.length;++gi){var gf=gg.lines[gi];if(gf==gh){break}else{gj+=gf.height}}for(var gk=gg.parent;gk;gg=gk,gk=gg.parent){for(var gi=0;gi<gk.children.length;++gi){var gl=gk.children[gi];if(gl==gg){break}else{gj+=gl.height}}}return gj}function a(gg){var gf=gg.order;if(gf==null){gf=gg.order=bh(gg.text)}return gf}function fT(gf){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=gf||1}function du(gf,gh){var gg={from:ci(gh.from),to:cX(gh),text:f2(gf,gh.from,gh.to)};bY(gf,gg,gh.from.line,gh.to.line+1);d7(gf,function(gi){bY(gi,gg,gh.from.line,gh.to.line+1)},true);return gg}function fB(gg){while(gg.length){var gf=fG(gg);if(gf.ranges){gg.pop()}else{break}}}function eM(gg,gf){if(gf){fB(gg.done);return fG(gg.done)}else{if(gg.done.length&&!fG(gg.done).ranges){return fG(gg.done)}else{if(gg.done.length>1&&!gg.done[gg.done.length-2].ranges){gg.done.pop();return fG(gg.done)}}}}function fM(gl,gj,gf,gi){var gh=gl.history;gh.undone.length=0;var gg=+new Date,gm;if((gh.lastOp==gi||gh.lastOrigin==gj.origin&&gj.origin&&((gj.origin.charAt(0)=="+"&&gl.cm&&gh.lastModTime>gg-gl.cm.options.historyEventDelay)||gj.origin.charAt(0)=="*"))&&(gm=eM(gh,gh.lastOp==gi))){var gn=fG(gm.changes);if(cf(gj.from,gj.to)==0&&cf(gj.from,gn.to)==0){gn.to=cX(gj)}else{gm.changes.push(du(gl,gj))}}else{var gk=fG(gh.done);if(!gk||!gk.ranges){cN(gl.sel,gh.done)}gm={changes:[du(gl,gj)],generation:gh.generation};gh.done.push(gm);while(gh.done.length>gh.undoDepth){gh.done.shift();if(!gh.done[0].ranges){gh.done.shift()}}}gh.done.push(gf);gh.generation=++gh.maxGeneration;gh.lastModTime=gh.lastSelTime=gg;gh.lastOp=gh.lastSelOp=gi;gh.lastOrigin=gh.lastSelOrigin=gj.origin;if(!gn){aE(gl,"historyAdded")}}function bA(gj,gf,gh,gi){var gg=gf.charAt(0);return gg=="*"||gg=="+"&&gh.ranges.length==gi.ranges.length&&gh.somethingSelected()==gi.somethingSelected()&&new Date-gj.history.lastSelTime<=(gj.cm?gj.cm.options.historyEventDelay:500)}function f9(gk,gi,gf,gh){var gj=gk.history,gg=gh&&gh.origin;if(gf==gj.lastSelOp||(gg&&gj.lastSelOrigin==gg&&(gj.lastModTime==gj.lastSelTime&&gj.lastOrigin==gg||bA(gk,gg,fG(gj.done),gi)))){gj.done[gj.done.length-1]=gi}else{cN(gi,gj.done)}gj.lastSelTime=+new Date;gj.lastSelOrigin=gg;gj.lastSelOp=gf;if(gh&&gh.clearRedo!==false){fB(gj.undone)}}function cN(gg,gf){var gh=fG(gf);if(!(gh&&gh.ranges&&gh.equals(gg))){gf.push(gg)}}function bY(gg,gk,gj,gi){var gf=gk["spans_"+gg.id],gh=0;gg.iter(Math.max(gg.first,gj),Math.min(gg.first+gg.size,gi),function(gl){if(gl.markedSpans){(gf||(gf=gk["spans_"+gg.id]={}))[gh]=gl.markedSpans}++gh})}function bl(gh){if(!gh){return null}for(var gg=0,gf;gg<gh.length;++gg){if(gh[gg].marker.explicitlyCleared){if(!gf){gf=gh.slice(0,gg)}}else{if(gf){gf.push(gh[gg])}}}return !gf?gh:gf.length?gf:null}function b4(gi,gj){var gh=gj["spans_"+gi.id];if(!gh){return null}for(var gg=0,gf=[];gg<gj.text.length;++gg){gf.push(bl(gh[gg]))}return gf}function bP(gq,gi,gp){for(var gl=0,gg=[];gl<gq.length;++gl){var gh=gq[gl];if(gh.ranges){gg.push(gp?f1.prototype.deepCopy.call(gh):gh);continue}var gn=gh.changes,go=[];gg.push({changes:go});for(var gk=0;gk<gn.length;++gk){var gm=gn[gk],gj;go.push({from:gm.from,to:gm.to,text:gm.text});if(gi){for(var gf in gm){if(gj=gf.match(/^spans_(\d+)$/)){if(dh(gi,Number(gj[1]))>-1){fG(go)[gf]=gm[gf];delete gm[gf]}}}}}}return gg}function I(gi,gh,gg,gf){if(gg<gi.line){gi.line+=gf}else{if(gh<gi.line){gi.line=gh;gi.ch=0}}}function fh(gi,gk,gl,gm){for(var gh=0;gh<gi.length;++gh){var gf=gi[gh],gj=true;if(gf.ranges){if(!gf.copied){gf=gi[gh]=gf.deepCopy();gf.copied=true}for(var gg=0;gg<gf.ranges.length;gg++){I(gf.ranges[gg].anchor,gk,gl,gm);I(gf.ranges[gg].head,gk,gl,gm)}continue}for(var gg=0;gg<gf.changes.length;++gg){var gn=gf.changes[gg];if(gl<gn.from.line){gn.from=W(gn.from.line+gm,gn.from.ch);gn.to=W(gn.to.line+gm,gn.to.ch)}else{if(gk<=gn.to.line){gj=false;break}}}if(!gj){gi.splice(0,gh+1);gh=0}}}function dE(gg,gj){var gi=gj.from.line,gh=gj.to.line,gf=gj.text.length-(gh-gi)-1;fh(gg.done,gi,gh,gf);fh(gg.undone,gi,gh,gf)}var cG=H.e_preventDefault=function(gf){if(gf.preventDefault){gf.preventDefault()}else{gf.returnValue=false}};var dq=H.e_stopPropagation=function(gf){if(gf.stopPropagation){gf.stopPropagation()}else{gf.cancelBubble=true}};function bL(gf){return gf.defaultPrevented!=null?gf.defaultPrevented:gf.returnValue==false}var er=H.e_stop=function(gf){cG(gf);dq(gf)};function L(gf){return gf.target||gf.srcElement}function fN(gg){var gf=gg.which;if(gf==null){if(gg.button&1){gf=1}else{if(gg.button&2){gf=3}else{if(gg.button&4){gf=2}}}}if(b7&&gg.ctrlKey&&gf==1){gf=3}return gf}var bX=H.on=function(gi,gg,gh){if(gi.addEventListener){gi.addEventListener(gg,gh,false)}else{if(gi.attachEvent){gi.attachEvent("on"+gg,gh)}else{var gj=gi._handlers||(gi._handlers={});var gf=gj[gg]||(gj[gg]=[]);gf.push(gh)}}};var ed=H.off=function(gj,gh,gi){if(gj.removeEventListener){gj.removeEventListener(gh,gi,false)}else{if(gj.detachEvent){gj.detachEvent("on"+gh,gi)}else{var gf=gj._handlers&&gj._handlers[gh];if(!gf){return}for(var gg=0;gg<gf.length;++gg){if(gf[gg]==gi){gf.splice(gg,1);break}}}}};var aE=H.signal=function(gj,gi){var gf=gj._handlers&&gj._handlers[gi];if(!gf){return}var gg=Array.prototype.slice.call(arguments,2);for(var gh=0;gh<gf.length;++gh){gf[gh].apply(null,gg)}};var bz=null;function ae(gl,gj){var gf=gl._handlers&&gl._handlers[gj];if(!gf){return}var gh=Array.prototype.slice.call(arguments,2),gk;if(bp){gk=bp.delayedCallbacks}else{if(bz){gk=bz}else{gk=bz=[];setTimeout(aM,0)}}function gg(gm){return function(){gm.apply(null,gh)}}for(var gi=0;gi<gf.length;++gi){gk.push(gg(gf[gi]))}}function aM(){var gf=bz;bz=null;for(var gg=0;gg<gf.length;++gg){gf[gg]()}}function aR(gf,gh,gg){if(typeof gh=="string"){gh={type:gh,preventDefault:function(){this.defaultPrevented=true}}}aE(gf,gg||gh.type,gf,gh);return bL(gh)||gh.codemirrorIgnore}function V(gg){var gf=gg._handlers&&gg._handlers.cursorActivity;if(!gf){return}var gi=gg.curOp.cursorActivityHandlers||(gg.curOp.cursorActivityHandlers=[]);for(var gh=0;gh<gf.length;++gh){if(dh(gi,gf[gh])==-1){gi.push(gf[gh])}}}function fi(gh,gg){var gf=gh._handlers&&gh._handlers[gg];return gf&&gf.length>0}function by(gf){gf.prototype.on=function(gg,gh){bX(this,gg,gh)};gf.prototype.off=function(gg,gh){ed(this,gg,gh)}}var dJ=30;var ca=H.Pass={toString:function(){return"CodeMirror.Pass"}};var Z={scroll:false},M={origin:"*mouse"},cW={origin:"+move"};function ge(){this.id=null}ge.prototype.set=function(gf,gg){clearTimeout(this.id);this.id=setTimeout(gg,gf)};var bT=H.countColumn=function(gi,gg,gk,gl,gh){if(gg==null){gg=gi.search(/[^\s\u00a0]/);if(gg==-1){gg=gi.length}}for(var gj=gl||0,gm=gh||0;;){var gf=gi.indexOf("\t",gj);if(gf<0||gf>=gg){return gm+(gg-gj)}gm+=gf-gj;gm+=gk-(gm%gk);gj=gf+1}};function eq(gj,gi,gk){for(var gl=0,gh=0;;){var gg=gj.indexOf("\t",gl);if(gg==-1){gg=gj.length}var gf=gg-gl;if(gg==gj.length||gh+gf>=gi){return gl+Math.min(gf,gi-gh)}gh+=gg-gl;gh+=gk-(gh%gk);gl=gg+1;if(gh>=gi){return gl}}}var a0=[""];function cp(gf){while(a0.length<=gf){a0.push(fG(a0)+" ")}return a0[gf]}function fG(gf){return gf[gf.length-1]}var dL=function(gf){gf.select()};if(e1){dL=function(gf){gf.selectionStart=0;gf.selectionEnd=gf.value.length}}else{if(dK){dL=function(gg){try{gg.select()}catch(gf){}}}}function dh(gh,gf){for(var gg=0;gg<gh.length;++gg){if(gh[gg]==gf){return gg}}return -1}function bS(gi,gh){var gf=[];for(var gg=0;gg<gi.length;gg++){gf[gg]=gh(gi[gg],gg)}return gf}function fU(){}function ck(gh,gf){var gg;if(Object.create){gg=Object.create(gh)}else{fU.prototype=gh;gg=new fU()}if(gf){aN(gf,gg)}return gg}function aN(gh,gg,gf){if(!gg){gg={}}for(var gi in gh){if(gh.hasOwnProperty(gi)&&(gf!==false||!gg.hasOwnProperty(gi))){gg[gi]=gh[gi]}}return gg}function cv(gg){var gf=Array.prototype.slice.call(arguments,1);return function(){return gg.apply(null,gf)}}var bc=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var fD=H.isWordChar=function(gf){return/\w/.test(gf)||gf>"\x80"&&(gf.toUpperCase()!=gf.toLowerCase()||bc.test(gf))};function cA(gf,gg){if(!gg){return fD(gf)}if(gg.source.indexOf("\\w")>-1&&fD(gf)){return true}return gg.test(gf)}function eU(gf){for(var gg in gf){if(gf.hasOwnProperty(gg)&&gf[gg]){return false}}return true}var eJ=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fp(gf){return gf.charCodeAt(0)>=768&&eJ.test(gf)}function f0(gf,gj,gi,gh){var gk=document.createElement(gf);if(gi){gk.className=gi}if(gh){gk.style.cssText=gh}if(typeof gj=="string"){gk.appendChild(document.createTextNode(gj))}else{if(gj){for(var gg=0;gg<gj.length;++gg){gk.appendChild(gj[gg])}}}return gk}var cl;if(document.createRange){cl=function(gi,gj,gg,gf){var gh=document.createRange();gh.setEnd(gf||gi,gg);gh.setStart(gi,gj);return gh}}else{cl=function(gh,gj,gf){var gg=document.body.createTextRange();try{gg.moveToElementText(gh.parentNode)}catch(gi){return gg}gg.collapse(true);gg.moveEnd("character",gf);gg.moveStart("character",gj);return gg}}function d1(gg){for(var gf=gg.childNodes.length;gf>0;--gf){gg.removeChild(gg.firstChild)}return gg}function bR(gf,gg){return d1(gf).appendChild(gg)}var f8=H.contains=function(gf,gg){if(gg.nodeType==3){gg=gg.parentNode}if(gf.contains){return gf.contains(gg)}do{if(gg.nodeType==11){gg=gg.host}if(gg==gf){return true}}while(gg=gg.parentNode)};function dO(){return document.activeElement}if(dK&&k<11){dO=function(){try{return document.activeElement}catch(gf){return document.body}}}function S(gf){return new RegExp("(^|\\s)"+gf+"(?:$|\\s)\\s*")}var f=H.rmClass=function(gh,gf){var gi=gh.className;var gg=S(gf).exec(gi);if(gg){var gj=gi.slice(gg.index+gg[0].length);gh.className=gi.slice(0,gg.index)+(gj?gg[1]+gj:"")}};var fA=H.addClass=function(gg,gf){var gh=gg.className;if(!S(gf).test(gh)){gg.className+=(gh?" ":"")+gf}};function fS(gh,gf){var gg=gh.split(" ");for(var gi=0;gi<gg.length;gi++){if(gg[gi]&&!S(gg[gi]).test(gf)){gf+=" "+gg[gi]}}return gf}function aA(gi){if(!document.body.getElementsByClassName){return}var gh=document.body.getElementsByClassName("CodeMirror");for(var gg=0;gg<gh.length;gg++){var gf=gh[gg].CodeMirror;if(gf){gi(gf)}}}var cC=false;function bj(){if(cC){return}fE();cC=true}function fE(){var gf;bX(window,"resize",function(){if(gf==null){gf=setTimeout(function(){gf=null;aA(aT)},100)}});bX(window,"blur",function(){aA(aV)})}var eL=function(){if(dK&&k<9){return false}var gf=f0("div");return"draggable" in gf||"dragDrop" in gf}();var fL;function bn(gf){if(fL==null){var gh=f0("span","\u200b");bR(gf,f0("span",[gh,document.createTextNode("x")]));if(gf.firstChild.offsetHeight!=0){fL=gh.offsetWidth<=1&&gh.offsetHeight>2&&!(dK&&k<8)}}var gg=fL?f0("span","\u200b"):f0("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");gg.setAttribute("cm-text","");return gg}var fK;function bO(gi){if(fK!=null){return fK}var gf=bR(gi,document.createTextNode("A\u062eA"));var gh=cl(gf,0,1).getBoundingClientRect();if(!gh||gh.left==gh.right){return false}var gg=cl(gf,1,2).getBoundingClientRect();return fK=(gg.right-gh.right<3)}var a1=H.splitLines="\n\nb".split(/\n/).length!=3?function(gk){var gl=0,gf=[],gj=gk.length;while(gl<=gj){var gi=gk.indexOf("\n",gl);if(gi==-1){gi=gk.length}var gh=gk.slice(gl,gk.charAt(gi-1)=="\r"?gi-1:gi);var gg=gh.indexOf("\r");if(gg!=-1){gf.push(gh.slice(0,gg));gl+=gg+1}else{gf.push(gh);gl=gi+1}}return gf}:function(gf){return gf.split(/\r\n?|\n/)};var bs=window.getSelection?function(gg){try{return gg.selectionStart!=gg.selectionEnd}catch(gf){return false}}:function(gh){try{var gf=gh.ownerDocument.selection.createRange()}catch(gg){}if(!gf||gf.parentElement()!=gh){return false}return gf.compareEndPoints("StartToEnd",gf)!=0};var da=(function(){var gf=f0("div");if("oncopy" in gf){return true}gf.setAttribute("oncopy","return;");return typeof gf.oncopy=="function"})();var e6=null;function aK(gg){if(e6!=null){return e6}var gh=bR(gg,f0("span","x"));var gi=gh.getBoundingClientRect();var gf=cl(gh,0,1).getBoundingClientRect();return e6=Math.abs(gi.left-gf.left)>1}var fg={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};H.keyNames=fg;(function(){for(var gf=0;gf<10;gf++){fg[gf+48]=fg[gf+96]=String(gf)}for(var gf=65;gf<=90;gf++){fg[gf]=String.fromCharCode(gf)}for(var gf=1;gf<=12;gf++){fg[gf+111]=fg[gf+63235]="F"+gf}})();function d4(gf,gl,gk,gj){if(!gf){return gj(gl,gk,"ltr")}var gi=false;for(var gh=0;gh<gf.length;++gh){var gg=gf[gh];if(gg.from<gk&&gg.to>gl||gl==gk&&gg.to==gl){gj(Math.max(gg.from,gl),Math.min(gg.to,gk),gg.level==1?"rtl":"ltr");gi=true}}if(!gi){gj(gl,gk,"ltr")}}function dy(gf){return gf.level%2?gf.to:gf.from}function gb(gf){return gf.level%2?gf.from:gf.to}function cE(gg){var gf=a(gg);return gf?dy(gf[0]):0}function cS(gg){var gf=a(gg);if(!gf){return gg.text.length}return gb(fG(gf))}function bt(gg,gj){var gh=ff(gg.doc,gj);var gk=y(gh);if(gk!=gh){gj=bN(gk)}var gf=a(gk);var gi=!gf?0:gf[0].level%2?cS(gk):cE(gk);return W(gj,gi)}function dP(gh,gk){var gg,gi=ff(gh.doc,gk);while(gg=ew(gi)){gi=gg.find(1,true).line;gk=null}var gf=a(gi);var gj=!gf?gi.text.length:gf[0].level%2?cE(gi):cS(gi);return W(gk==null?bN(gi):gk,gj)}function dI(gg,gl){var gk=bt(gg,gl.line);var gh=ff(gg.doc,gk.line);var gf=a(gh);if(!gf||gf[0].level==0){var gj=Math.max(0,gh.text.search(/\S/));var gi=gl.line==gk.line&&gl.ch<=gj&&gl.ch;return W(gk.line,gi?0:gj)}return gk}function an(gg,gh,gf){var gi=gg[0].level;if(gh==gi){return true}if(gf==gi){return false}return gh<gf}var e2;function aG(gf,gj){e2=null;for(var gg=0,gh;gg<gf.length;++gg){var gi=gf[gg];if(gi.from<gj&&gi.to>gj){return gg}if((gi.from==gj||gi.to==gj)){if(gh==null){gh=gg}else{if(an(gf,gi.level,gf[gh].level)){if(gi.from!=gi.to){e2=gh}return gg}else{if(gi.from!=gi.to){e2=gg}return gh}}}}return gh}function fe(gf,gi,gg,gh){if(!gh){return gi+gg}do{gi+=gg}while(gi>0&&fp(gf.text.charAt(gi)));return gi}function u(gf,gm,gh,gi){var gj=a(gf);if(!gj){return ai(gf,gm,gh,gi)}var gl=aG(gj,gm),gg=gj[gl];var gk=fe(gf,gm,gg.level%2?-gh:gh,gi);for(;;){if(gk>gg.from&&gk<gg.to){return gk}if(gk==gg.from||gk==gg.to){if(aG(gj,gk)==gl){return gk}gg=gj[gl+=gh];return(gh>0)==gg.level%2?gg.to:gg.from}else{gg=gj[gl+=gh];if(!gg){return null}if((gh>0)==gg.level%2){gk=fe(gf,gg.to,-1,gi)}else{gk=fe(gf,gg.from,1,gi)}}}}function ai(gf,gj,gg,gh){var gi=gj+gg;if(gh){while(gi>0&&fp(gf.text.charAt(gi))){gi+=gg}}return gi<0||gi>gf.text.length?null:gi}var bh=(function(){var gl="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var gj="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function gi(gp){if(gp<=247){return gl.charAt(gp)}else{if(1424<=gp&&gp<=1524){return"R"}else{if(1536<=gp&&gp<=1773){return gj.charAt(gp-1536)}else{if(1774<=gp&&gp<=2220){return"r"}else{if(8192<=gp&&gp<=8203){return"w"}else{if(gp==8204){return"b"}else{return"L"}}}}}}}var gf=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var go=/[stwN]/,gh=/[LRr]/,gg=/[Lb1n]/,gk=/[1n]/;var gn="L";function gm(gr,gq,gp){this.level=gr;this.from=gq;this.to=gp}return function(gz){if(!gf.test(gz)){return false}var gF=gz.length,gv=[];for(var gE=0,gr;gE<gF;++gE){gv.push(gr=gi(gz.charCodeAt(gE)))}for(var gE=0,gy=gn;gE<gF;++gE){var gr=gv[gE];if(gr=="m"){gv[gE]=gy}else{gy=gr}}for(var gE=0,gp=gn;gE<gF;++gE){var gr=gv[gE];if(gr=="1"&&gp=="r"){gv[gE]="n"}else{if(gh.test(gr)){gp=gr;if(gr=="r"){gv[gE]="R"}}}}for(var gE=1,gy=gv[0];gE<gF-1;++gE){var gr=gv[gE];if(gr=="+"&&gy=="1"&&gv[gE+1]=="1"){gv[gE]="1"}else{if(gr==","&&gy==gv[gE+1]&&(gy=="1"||gy=="n")){gv[gE]=gy}}gy=gr}for(var gE=0;gE<gF;++gE){var gr=gv[gE];if(gr==","){gv[gE]="N"}else{if(gr=="%"){for(var gs=gE+1;gs<gF&&gv[gs]=="%";++gs){}var gG=(gE&&gv[gE-1]=="!")||(gs<gF&&gv[gs]=="1")?"1":"N";for(var gC=gE;gC<gs;++gC){gv[gC]=gG}gE=gs-1}}}for(var gE=0,gp=gn;gE<gF;++gE){var gr=gv[gE];if(gp=="L"&&gr=="1"){gv[gE]="L"}else{if(gh.test(gr)){gp=gr}}}for(var gE=0;gE<gF;++gE){if(go.test(gv[gE])){for(var gs=gE+1;gs<gF&&go.test(gv[gs]);++gs){}var gw=(gE?gv[gE-1]:gn)=="L";var gq=(gs<gF?gv[gs]:gn)=="L";var gG=gw||gq?"L":"R";for(var gC=gE;gC<gs;++gC){gv[gC]=gG}gE=gs-1}}var gD=[],gA;for(var gE=0;gE<gF;){if(gg.test(gv[gE])){var gt=gE;for(++gE;gE<gF&&gg.test(gv[gE]);++gE){}gD.push(new gm(0,gt,gE))}else{var gu=gE,gx=gD.length;for(++gE;gE<gF&&gv[gE]!="L";++gE){}for(var gC=gu;gC<gE;){if(gk.test(gv[gC])){if(gu<gC){gD.splice(gx,0,new gm(1,gu,gC))}var gB=gC;for(++gC;gC<gE&&gk.test(gv[gC]);++gC){}gD.splice(gx,0,new gm(2,gB,gC));gu=gC}else{++gC}}if(gu<gE){gD.splice(gx,0,new gm(1,gu,gE))}}}if(gD[0].level==1&&(gA=gz.match(/^\s+/))){gD[0].from=gA[0].length;gD.unshift(new gm(0,0,gA[0].length))}if(fG(gD).level==1&&(gA=gz.match(/\s+$/))){fG(gD).to-=gA[0].length;gD.push(new gm(0,gF-gA[0].length,gF))}if(gD[0].level!=fG(gD).level){gD.push(new gm(gD[0].level,gF,gF))}return gD}})();H.version="5.1.0";return H});