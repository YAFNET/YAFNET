/* SCEditor v3.2.13 | (C) 2017-2025, Sam Clarke | sceditor.com/license */
(()=>{function i(e,t){return typeof t===e}var ge=i.bind(null,"string"),Ue=i.bind(null,"undefined"),qe=i.bind(null,"function"),a=i.bind(null,"number");function l(e){return!Object.keys(e).length}function Ke(e,t){var n=e===!!e,o=n?2:1,r=n?t:e,i=n&&e;function a(e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}for(;o<arguments.length;o++){var l,s=arguments[o];for(l in s){var c,u,d=r[l],f=s[l];Ue(f)||"__proto__"!==l&&"constructor"!==l&&(u=a(f),c=Array.isArray(f),i&&(u||c)?(u=a(d)===u&&Array.isArray(d)===c,r[l]=Ke(!0,u?d:c?[]:{},f)):r[l]=f)}}return r}function Xe(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)}function ve(t,n){if(Array.isArray(t)||"length"in t&&a(t.length))for(let e=0;e<t.length;e++)n(e,t[e]);else Object.keys(t).forEach(function(e){n(e,t[e])})}var s={},be=1,ye=3,c=8;function r(e){return e=parseFloat(e),isFinite(e)?e:0}function xe(e,t,n){var o=(n||document).createElement(e);return ve(t||{},function(e,t){"style"===e?o.style.cssText=t:e in o?o[e]=t:o.setAttribute(e,t)}),o}function u(e,t){for(var n=e||{};(n=n.parentNode)&&!/(9|11)/.test(n.nodeType);)if(!t||Ne(n,t))return n}function Qe(e,t){return Ne(e,t)?e:u(e,t)}function we(e){e.parentNode&&e.parentNode.removeChild(e)}function ke(e,t){e.appendChild(t)}function Te(e,t){return e.querySelectorAll(t)}function Ee(n,e,o,r,i){e.split(" ").forEach(function(e){var t;ge(o)?(t=r["_sce-event-"+e+o]||function(e){for(var t=e.target;t&&t!==n;){if(Ne(t,o))return void r.call(t,e);t=t.parentNode}},r["_sce-event-"+e+o]=t):(t=o,i=r),n.addEventListener(e,t,i||!1)})}function Ce(n,e,o,r,i){e.split(" ").forEach(function(e){var t;ge(o)?t=r["_sce-event-"+e+o]:(t=o,i=r),n.removeEventListener(e,t,i||!1)})}function Se(e,t,n){if(arguments.length<3)return e.getAttribute(t);null==n?Ae(e,t):e.setAttribute(t,n)}function Ae(e,t){e.removeAttribute(t)}function Je(e){De(e,"display","none")}function Ze(e){De(e,"display","")}function et(e){(rt(e)?Je:Ze)(e)}function De(n,e,t){if(arguments.length<3){if(ge(e))return 1===n.nodeType?getComputedStyle(n)[e]:null;ve(e,function(e,t){De(n,e,t)})}else{var o=(t||0===t)&&!isNaN(t);n.style[e]=o?t+"px":t}}function d(e,t,n){var o=arguments.length,r={};if(e.nodeType===be)return 1===o?(ve(e.attributes,function(e,t){/^data\-/i.test(t.name)&&(r[t.name.substr(5)]=t.value)}),r):2===o?Se(e,"data-"+t):void Se(e,"data-"+t,String(n))}function Ne(e,t){var n=!1;return n=e&&e.nodeType===be?(e.matches||e.msMatchesSelector||e.webkitMatchesSelector).call(e,t):n}function Le(e,t){t.parentNode.insertBefore(e,t)}function f(e){return e.className.trim().split(/\s+/)}function _e(e,t){return Ne(e,"."+t)}function Me(e,t){var n=f(e);n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function tt(e,t){var n=f(e);Xe(n,t),e.className=n.join(" ")}function Ie(e,t,n){((n=Ue(n)?!_e(e,t):n)?Me:tt)(e,t)}function nt(e,t){var n,o;if(Ue(t))return n=r((o=getComputedStyle(e)).paddingLeft)+r(o.paddingRight),o=r(o.borderLeftWidth)+r(o.borderRightWidth),e.offsetWidth-n-o;De(e,"width",t)}function Re(e,t){var n,o;if(Ue(t))return n=r((o=getComputedStyle(e)).paddingTop)+r(o.paddingBottom),o=r(o.borderTopWidth)+r(o.borderBottomWidth),e.offsetHeight-n-o;De(e,"height",t)}function ot(e,t,n){var o;qe(window.CustomEvent)?o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(o=e.ownerDocument.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(o)}function rt(e){return e.getClientRects().length}function m(e,t,n,o,r){for(e=r?e.lastChild:e.firstChild;e;){var i=r?e.previousSibling:e.nextSibling;if(!n&&!1===t(e)||!o&&!1===m(e,t,n,o,r)||n&&!1===t(e))return!1;e=i}}function it(e,t,n,o){m(e,t,n,o,!0)}function at(e,t){var n=(t=t||document).createDocumentFragment(),o=xe("div",{},t);for(o.innerHTML=e;o.firstChild;)ke(n,o.firstChild);return n}function lt(e){return e&&(!Ne(e,"p,div")||e.className||Se(e,"style")||!l(d(e)))}function st(e,t){var n=xe(t,{},e.ownerDocument);for(ve(e.attributes,function(e,t){try{Se(n,t.name,t.value)}catch(e){}});e.firstChild;)ke(n,e.firstChild);return e.parentNode.replaceChild(n,e),n}var p="|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|details|section|article|aside|nav|main|header|hgroup|footer|fieldset|dl|dt|dd|figure|figcaption|";function ct(e){return!!/11?|9/.test(e.nodeType)&&"|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf(`|${e.nodeName.toLowerCase()}|`)<0}function Oe(e,t){var n=(e||{}).nodeType||ye;return n!==be?n===ye:"code"===(n=e.tagName.toLowerCase())?!t:p.indexOf(`|${n}|`)<0}function h(e){return e.lastChild&&h(e.lastChild)&&we(e.lastChild),3===e.nodeType?!e.nodeValue:ct(e)&&!e.childNodes.length}function ut(e){m(e,function(t){var n=!Oe(t,!0)&&t.nodeType!==c,o=t.parentNode;if(n&&(Oe(o,!0)||"P"===o.tagName)){let e=t;for(;Oe(e.parentNode,!0)||"P"===e.parentNode.tagName;)e=e.parentNode;for(var r=v(e,t),i=t;o&&Oe(o,!0);){if(o.nodeType===be){for(var a=o.cloneNode();i.firstChild;)ke(a,i.firstChild);ke(i,a)}o=o.parentNode}Le(i,e),h(r)||Le(r,i),h(e)&&we(e)}if(n&&Ne(t,"ul,ol")&&Ne(t.parentNode,"ul,ol")){r="li",n=(n=t).previousElementSibling;let e=!r||!n||Ne(n,r)?n:null;e||Le(e=xe("li"),t),ke(e,t)}})}function g(e,t){return e?(t?e.previousSibling:e.nextSibling)||g(e.parentNode,t):null}function dt(e){var t,n,o,r,i,a,l=De(e,"whiteSpace"),s=/line$/i.test(l),c=e.firstChild;if(!/pre(\-wrap)?$/i.test(l))for(;c;){if(i=c.nextSibling,t=c.nodeValue,(n=c.nodeType)===be&&c.firstChild&&dt(c),n===ye){for(n=g(c),o=g(c,!0),a=!1;_e(o,"sceditor-ignore");)o=g(o,!0);if(Oe(c)&&o){for(r=o;r.lastChild;)for(r=r.lastChild;_e(r,"sceditor-ignore");)r=g(r,!0);a=r.nodeType===ye?/[\t\n\r ]$/.test(r.nodeValue):!Oe(r)}t=t.replace(/\u200B/g,""),o&&Oe(o)&&!a||(t=t.replace(s?/^[\t ]+/:/^[\t\n\r ]+/,"")),(t=n&&Oe(n)?t:t.replace(s?/[\t ]+$/:/[\t\n\r ]+$/,"")).length?c.nodeValue=t.replace(s?/[\t ]+/g:/[\t\n\r ]+/g," "):we(c)}c=i}}function v(e,t){var n=e.ownerDocument.createRange();return n.setStartBefore(e),n.setEndAfter(t),n.extractContents()}function ft(e){for(var t=0,n=0;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}function b(e,t){var n=e.style;return s[t]||(s[t]=t.replace(/^-ms-/,"ms-").replace(/-(\w)/g,function(e,t){return t.toUpperCase()})),n=n[t=s[t]],"textAlign"===t&&(n=n||De(e,t),De(e.parentNode,t)===n||"block"!==De(e,"display")||Ne(e,"hr,th"))?"":n}function mt(e,t){var n=e.attributes.length;if(n===t.attributes.length){for(;n--;){var o=e.attributes[n];if("style"===o.name?!((e,t)=>{var n=e.style.length;if(n===t.style.length){for(;n--;){var o=e.style[n];if(e.style[o]!==t.style[o])return}return 1}})(e,t):o.value!==Se(t,o.name))return}return 1}}function pt(e){for(;e.firstChild;)Le(e.firstChild,e);we(e)}var ht={toolbar:"bold,italic,underline,strike|font,size,color|mark|email,link,unlink,quote,code|image|note|bulletlist,orderedlist|left,center,right|cut,copy,pastetext,removeformat|undo,redo|youtube,vimeo,instagram,facebook,media,extensions|source|reply",toolbarExclude:null,maxLength:null,styles:[],themeMode:Se(document.documentElement,"data-bs-theme")||"light",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",format:"bbcode",icons:"fontawesome",codeLanguages:[{Value:"markup",Text:"Plain Text"},{Value:"bash",Text:"Bash(shell)"},{Value:"c",Text:"C"},{Value:"cpp",Text:"C++"},{Value:"csharp",Text:"C#"},{Value:"css",Text:"CSS"},{Value:"scss",Text:"SCSS"},{Value:"git",Text:"Git"},{Value:"markup",Text:"HTML"},{Value:"java",Text:"Java"},{Value:"javascript",Text:"JavaScript"},{Value:"json",Text:"JSON"},{Value:"python",Text:"Python"},{Value:"sql",Text:"SQL"},{Value:"markup",Text:"XML"},{Value:"vb",Text:"Visual Basic"},{Value:"stacktrace",Text:"StackTrace"}],noteTypes:"primary,secondary,success,danger,warning,info,light,dark",colors:"#000000,#44B8FF,#1E92F7,#0074D9,#005DC2,#00369B,#b3d5f4|#444444,#C3FFFF,#9DF9FF,#7FDBFF,#68C4E8,#419DC1,#d9f4ff|#666666,#72FF84,#4CEA5E,#2ECC40,#17B529,#008E02,#c0f0c6|#888888,#FFFF44,#FFFA1E,#FFDC00,#E8C500,#C19E00,#fff5b3|#aaaaaa,#FFC95F,#FFA339,#FF851B,#E86E04,#C14700,#ffdbbb|#cccccc,#FF857A,#FF5F54,#FF4136,#E82A1F,#C10300,#ffc6c3|#eeeeee,#FF56FF,#FF30DC,#F012BE,#D900A7,#B20080,#fbb8ec|#ffffff,#F551FF,#CF2BE7,#B10DC9,#9A00B2,#9A00B2,#e8b6ef",locale:Se(document.documentElement,"lang")||"en",charset:"utf-8",width:"100%",height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!0,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,startInSourceMode:!1,id:null,plugins:"undo,dragdrop",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!0,allowedIframeUrls:[],parserOptions:{},dropDownCss:{},allowedTags:[],allowedAttributes:["contenteditable"],extensionsUrl:"",root:"",attachmentsPreviewUrl:"",albumsPreviewUrl:"",mentionsUrl:"",onToggleMode:void 0,basePath:""},y=/^(https?|s?ftp|mailto|spotify|ssh|teamspeak|tel):|(\/\/)|data:image\/(png|bmp|gif|p?jpe?g);/i;function x(e){return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function He(e,t){var n;return e&&(!(n={"&":"&amp;","<":"&lt;",">":"&gt;","  ":"&nbsp; ","\r\n":"<br />","\r":"<br />","\n":"<br />"})!==t&&(n['"']="&#34;",n["'"]="&#39;",n["`"]="&#96;"),e=e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(e){return n[e]||e})),e}var w={html:'<!DOCTYPE html><html data-bs-theme="{themeMode}"><head><meta http-equiv="Content-Type" content="text/html;charset={charset}" />{styles}</head><body style="min-height:265px" contenteditable="true" {spellcheck}><p></p></body></html>',style:'<link rel="stylesheet" type="text/css" href="{style}" />',toolbarButton:'<a class="btn sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><span unselectable="on">  </span></a>',codeOpt:'<a class="sceditor-code-option dropdown-item" href="#" data-language="{language}">{languageName}</a>',noteOpt:'<option value="{type}">{type}</option>',extensionOpt:'<a class="sceditor-extension-option dropdown-item" href="#" data-language="{extension}">{extension}</a>',fontOpt:'<a class="sceditor-font-option dropdown-item" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option dropdown-item" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',albums:'<form class="m-3"><div id="AlbumsListBox" class="content"><div id="AlbumsListPager"></div><div id="PostAlbumsLoader" class="text-center"><div class="fa-3x"><i class="fas fa-spinner fa-pulse"></i></div></div><div id="AlbumsListBox" class="content"><div id="PostAlbumsListPlaceholder" data-url="{root}" style="clear: both; "><div class="container"><div class="AlbumsList row"></div></div></div></div></div></form>',note:'<form class="m-3"><div class="mb-3"><label for="type" class="form-label">{labelType}</label> <select class="form-select" id="type" aria-label="note type">{values}</select> </div> <div class="mb-3"><label for="txt" class="form-label">{labelText}</label> <textarea cols="20" rows="7" id="txt" class="form-control textarea-input"></textarea></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></div></form>',pastetext:'<form class="m-3"><div class="mb-3"><label for="txt" class="form-label">{label}</label> <textarea cols="20" rows="7" id="txt" class="form-control textarea-input"></textarea></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></div></form>',image:'<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><div class="mb-3"><label for="des" class="form-label">{desc}</label> <input type="text" id="des" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',email:'<form class="m-3"><div class="mb-3"><label for="email" class="form-label">{label}</label> <input type="text" id="email" dir="ltr" class="form-control" /></div><div class="mb-3"><label for="des" class="form-label">{desc}</label> <input type="text" id="des" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',link:'<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><div class="mb-3"><label for="des" class="form-label">{desc}</label> <input type="text" id="des" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{ins}" /></form>',mediaMenu:'<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="url" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',youtubeMenu:'<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',instagramMenu:'<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',facebookMenu:'<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',facebook:'<div class="ratio ratio-1x1 border" data-oembed-url="{url}" data-facebook-url="{url}"><iframe src="https://www.facebook.com/plugins/post.php?href={url}"></iframe></div>',instagram:'<div class="ratio ratio-1x1 border" data-oembed-url="https://www.instagram.com/p/{id}" data-instagram-url="{url}"><iframe src="https://www.instagram.com/p/{id}/embed/captioned/"></iframe></div>',youtube:'<div data-oembed-url="https://youtube.com/embed/{id}" data-youtube-url="{url}" class="ratio ratio-16x9 border"><iframe src="https://youtube.com/embed/{id}?hd=1"></iframe></div>',vimeo:'<div data-oembed-url="https://vimeo.com/{vimeoId}" data-vimeo-url="{url}" class="ratio ratio-16x9 border"><iframe src="https://player.vimeo.com/video/{vimeoId}?show_title=1&show_byline=1&show_portrait=1&fullscreen=1"></iframe></div>'};function $e(e,t,n){var o=w[e];return Object.keys(t).forEach(function(e){o=o.replace(new RegExp(x(`{${e}}`),"g"),t[e])}),o=n?at(o):o}function k(n){if("mozHidden"in document){let e=n.getBody(),t;for(;e;){if((t=e).firstChild)t=t.firstChild;else{for(;t&&!t.nextSibling;)t=t.parentNode;t=t&&t.nextSibling}3!==e.nodeType||!/[\n\r\t]+/.test(e.nodeValue)||/^pre/.test(De(e.parentNode,"whiteSpace"))||we(e),e=t}}}var Be={albums:{exec:function(e){var t=xe("div");ke(t,$e("albums",{root:this.opts.root},!0)),this.createDropDown(e,"albums",t);getAlbumImagesData(6,0,!1)},tooltip:"User Albums"},attachments:{exec:function(){var e=new window.bootstrap.Modal("#UploadDialog");e.show(),e._element.addEventListener("shown.bs.modal",e=>{getPaginationData(6,0,!1)})},tooltip:"User Attachments"},bold:{exec:"bold",tooltip:"Bold",shortcut:"Ctrl+B"},italic:{exec:"italic",tooltip:"Italic",shortcut:"Ctrl+I"},underline:{exec:"underline",tooltip:"Underline",shortcut:"Ctrl+U"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},mark:{exec:function(){this.wysiwygEditorInsertHtml("<mark>","</mark>")},tooltip:"Highlight",shortcut:"Ctrl+H"},left:{state:function(e){var t;if(e=e&&3===e.nodeType?e.parentNode:e)return t="ltr"===De(e,"direction"),e=De(e,"textAlign"),/left/.test(e)||e===(t?"start":"end")},exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{state:function(e){var t;if(e=e&&3===e.nodeType?e.parentNode:e)return t="ltr"===De(e,"direction"),e=De(e,"textAlign"),/right/.test(e)||e===(t?"end":"start")},exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(t,e,n){var o=xe("div");Ee(o,"click","a",function(e){n(d(this,"font")),t.closeDropDown(!0),e.preventDefault()}),t.opts.fonts.split(",").forEach(function(e){ke(o,$e("fontOpt",{font:e},!0))}),t.createDropDown(e,"font-picker",o)},exec:function(e){var t=this;Be.font._dropDown(t,e,function(e){t.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(t,e,n){var o=xe("div");Ee(o,"click","a",function(e){n(d(this,"size")),t.closeDropDown(!0),e.preventDefault()});for(let e=1;e<=7;e++)ke(o,$e("sizeOpt",{size:e},!0));t.createDropDown(e,"fontsize-picker",o)},exec:function(e){var t=this;Be.size._dropDown(t,e,function(e){t.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(t,e,n){var o=xe("div"),r="",i=Be.color;i._htmlCache||(t.opts.colors.split("|").forEach(function(e){r+='<div class="sceditor-color-column">',e.split(",").forEach(function(e){r+=`<a href="#" class="sceditor-color-option" style="background-color: ${e}" data-color="${e}"></a>`}),r+="</div>"}),i._htmlCache=r),ke(o,at(i._htmlCache)),Ee(o,"click","a",function(e){n(d(this,"color")),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"color-picker",o)},exec:function(e){var t=this;Be.color._dropDown(t,e,function(e){t.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=xe("div"),o=this;ke(n,$e("pastetext",{label:o._("Paste your text inside the following box:"),insert:o._("Insert")},!0)),Ee(n,"click",".button",function(e){(t=Te(n,"#txt")[0].value)&&o.wysiwygEditorInsertText(t),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"pastetext",n)},tooltip:"Paste Text"},bulletlist:{exec:function(){k(this),this.execCommand("insertunorderedlist")},tooltip:"Bullet list"},orderedlist:{exec:function(){k(this),this.execCommand("insertorderedlist")},tooltip:"Numbered list"},table:{exec:function(e){var r=this,i=xe("div");ke(i,$e("table",{rows:r._("Rows:"),cols:r._("Cols:"),insert:r._("Insert")},!0)),Ee(i,"click",".button",function(e){var t=Number(Te(i,"#rows")[0].value),n=Number(Te(i,"#cols")[0].value),o='<table class="table">';0<t&&0<n&&(o+=Array(t+1).join("<tr>"+Array(n+1).join('<td class="border"><br /></td>')+"</tr>"),r.wysiwygEditorInsertHtml(o+="</table>"),r.closeDropDown(!0),e.preventDefault())}),r.createDropDown(e,"inserttable",i)},tooltip:"Insert a table"},code:{_dropDown:function(t,e,n){var o=xe("div");Ee(o,"click","a",function(e){n(d(this,"language")),t.closeDropDown(!0),e.preventDefault()}),t.opts.codeLanguages.forEach(function(e){ke(o,$e("codeOpt",{language:e.Value,languageName:e.Text},!0))}),t.createDropDown(e,"codeLanguage-picker",o)},exec:function(e){var t=this;Be.code._dropDown(t,e,function(e){t.wysiwygEditorInsertHtml(`<pre class="border border-danger rounded m-2 p-2"><code class="lang-${e}">`,"</code></pre>")})},tooltip:"Code"},note:{exec:function(e){var t,n,o=xe("div"),r=this,i="";r.opts.noteTypes.split(",").forEach(function(e){i+=$e("noteOpt",{type:e},!1)}),ke(o,$e("note",{labelType:r._("Select the note type:"),labelText:r._("Enter the note inside the following box:"),insert:r._("Insert"),values:i},!0)),Ee(o,"click",".button",function(e){n=Te(o,"#txt")[0].value,t=Te(o,"#type")[0].value,n&&r.wysiwygEditorInsertHtml(`<div class="alert alert-${t}" role="alert">${n}</div>`),r.closeDropDown(!0),e.preventDefault()}),r.createDropDown(e,"pastetext",o)},tooltip:"Note"},extensions:{_dropDown:function(t,e,n){var o=xe("div");Ee(o,"click","a",function(e){n(d(this,"language")),t.closeDropDown(!0),e.preventDefault()}),fetch(t.opts.extensionsUrl,{method:"GET"}).then(e=>e.json()).then(e=>{e.forEach(function(e){e.useToolbar||ke(o,$e("extensionOpt",{extension:e.name},!0))})}),t.createDropDown(e,"extensions-picker",o)},exec:function(e){var t=this;Be.extensions._dropDown(t,e,function(e){t.wysiwygEditorInsertText(`[${e}]`,`[/${e}]`)})},tooltip:"More BBCode"},image:{_dropDown:function(n,e,o){var r=xe("div"),i=(ke(r,$e("image",{url:n._("URL:"),desc:n._("Description (optional):"),insert:n._("Insert")},!0)),Te(r,"#link")[0]);function t(e){var t=Te(r,"#des")[0].value;i.value&&o(i.value,t),n.closeDropDown(!0),e.preventDefault()}Ee(r,"click",".button",t),Ee(r,"keypress",function(e){13===e.which&&i.value&&t(e)},!0),n.createDropDown(e,"insertimage",r)},exec:function(e){var o=this;Be.image._dropDown(o,e,function(e,t){var n="";t&&(n+=` alt="${He(t)}"`),n+=` src="${He(e)}"`,o.wysiwygEditorInsertHtml(`<img${n} class="img-user-posted img-thumbnail" />`)})},tooltip:"Insert an image"},email:{_dropDown:function(n,e,o){var r=xe("div");ke(r,$e("email",{label:n._("E-mail:"),desc:n._("Description (optional):"),insert:n._("Insert")},!0)),Ee(r,"click",".button",function(e){var t=Te(r,"#email")[0].value;t&&o(t,Te(r,"#des")[0].value),n.closeDropDown(!0),e.preventDefault()}),n.createDropDown(e,"insertemail",r)},exec:function(e){var n=this;Be.email._dropDown(n,e,function(e,t){!n.getRangeHelper().selectedHtml()||t?n.wysiwygEditorInsertHtml(`<a href="mailto:${He(e)}">${He(t||e)}</a>`):n.execCommand("createlink","mailto:"+e)})},tooltip:"Insert an email"},link:{_dropDown:function(t,e,n){var o=xe("div"),r=(ke(o,$e("link",{url:t._("URL:"),desc:t._("Description (optional):"),ins:t._("Insert")},!0)),Te(o,"#link")[0]);function i(e){r.value&&n(r.value,Te(o,"#des")[0].value),t.closeDropDown(!0),e.preventDefault()}Ee(o,"click",".button",i),Ee(o,"keypress",function(e){13===e.which&&r.value&&i(e)},!0),t.createDropDown(e,"insertlink",o)},exec:function(e){var n=this;Be.link._dropDown(n,e,function(e,t){t||!n.getRangeHelper().selectedHtml()?n.wysiwygEditorInsertHtml(`<a href="${He(e)}">${He(t||e)}</a>`):n.execCommand("createlink",e)})},tooltip:"Insert a link"},unlink:{state:function(){return Qe(this.currentNode(),"a")?0:-1},exec:function(){var e=Qe(this.currentNode(),"a");if(e){for(;e.firstChild;)Le(e.firstChild,e);we(e)}},tooltip:"Unlink"},quote:{exec:function(e,t,n){var o='<div class="border rounded mx-3 mb-3 p-3 border-secondary shadow-sm"><span contenteditable="false"><i class="fa fa-quote-left text-primary fs-4 me-2"></i></span>',r="</div>";t?(o=o+t+(n=n?`<cite class="card-text text-end d-block text-body-secondary small">${He(n)}</cite>`:"")+r,r=null):this.getRangeHelper().selectedHtml(),this.wysiwygEditorInsertHtml(o,r)},tooltip:"Insert a Quote"},media:{_dropDown:function(n,e,o){var r=xe("div");ke(r,$e("mediaMenu",{label:n._("Media URL:"),insert:n._("Insert")},!0)),Ee(r,"click",".button",function(e){var t=Te(r,"#link")[0].value;t.startsWith("http")?(o(t),n.closeDropDown(!0),e.preventDefault()):alert("Not a valid URL!")}),n.createDropDown(e,"insertmedia",r)},exec:function(e){var t=this;Be.media._dropDown(t,e,function(e){t.wysiwygEditorInsertHtml(`[media]${e}[/media]`)})},tooltip:"Insert an embed media like a YouTube video, facebook post or twitter status."},vimeo:{_dropDown:function(o,e,r){var i=xe("div");ke(i,$e("youtubeMenu",{label:o._("Video URL:"),insert:o._("Insert")},!0)),Ee(i,"click",".button",function(e){var t,n=Te(i,"#link")[0].value;""!==n&&(t=n.match(/vimeo\..*\/(\d+)(?:$|\/)/),r(n,t[1])),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"insertlink",i)},exec:function(e){var n=this;Be.vimeo._dropDown(n,e,function(e,t){n.wysiwygEditorInsertHtml($e("vimeo",{url:e,vimeoId:t}))})},tooltip:"Insert a Vimeo video"},instagram:{_dropDown:function(o,e,r){var i=xe("div");ke(i,$e("instagramMenu",{label:o._("Instagram Post URL:"),insert:o._("Insert")},!0)),Ee(i,"click",".button",function(e){var t,n=Te(i,"#link")[0].value;""!==n&&(t=n.match(/\/(p|tv|reel)\/(.*?)\//))&&(t=t[2],r(n,t)),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"insertlink",i)},exec:function(e){var n=this;Be.instagram._dropDown(n,e,function(e,t){n.wysiwygEditorInsertHtml($e("instagram",{url:e,id:t}))})},tooltip:"Insert an Instagram Post"},facebook:{_dropDown:function(n,e,o){var r=xe("div");ke(r,$e("facebookMenu",{label:n._("Facebook post URL:"),insert:n._("Insert")},!0)),Ee(r,"click",".button",function(e){var t=Te(r,"#link")[0].value;o(t),n.closeDropDown(!0),e.preventDefault()}),n.createDropDown(e,"insertlink",r)},exec:function(e){var t=this;Be.facebook._dropDown(t,e,function(e){t.wysiwygEditorInsertHtml($e("facebook",{url:e}))})},tooltip:"Insert an Facebook Post"},youtube:{_dropDown:function(o,e,r){var i=xe("div");ke(i,$e("youtubeMenu",{label:o._("Video URL:"),insert:o._("Insert")},!0)),Ee(i,"click",".button",function(e){var t=Te(i,"#link")[0].value,n=t.match(/(?:v=|v\/|embed\/|youtu.be\/)?([a-zA-Z0-9_-]{11})/);n&&/^[a-zA-Z0-9_\-]{11}$/.test(n[1])&&r(t,n[1]),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"insertlink",i)},exec:function(e){var n=this;Be.youtube._dropDown(n,e,function(e,t){n.wysiwygEditorInsertHtml($e("youtube",{url:e,id:t}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),o=t.getMonth()+1,t=t.getDate();return o<10&&(o="0"+o),t<10&&(t="0"+t),e.opts.dateFormat.replace(/year/i,n=n<2e3?1900+n:n).replace(/month/i,o).replace(/day/i,t)},exec:function(){this.insertText(Be.date._date(this))},txtExec:function(){this.insertText(Be.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),e=e.getSeconds();return(t=t<10?"0"+t:t)+":"+(n=n<10?"0"+n:n)+":"+(e=e<10?"0"+e:e)},exec:function(){this.insertText(Be.time._time())},txtExec:function(){this.insertText(Be.time._time())},tooltip:"Insert current time"},undo:{exec:"undo",tooltip:"Undo",shortcut:"Ctrl+Z"},redo:{exec:"redo",tooltip:"Redo",shortcut:"Ctrl+Y"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize()),this.focus()},txtExec:function(){this.maximize(!this.maximize()),this.focus()},tooltip:"Maximize",shortcut:"Ctrl+Shift+M"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode(),this.focus()},txtExec:function(){this.toggleSourceMode(),this.focus()},tooltip:"View source",shortcut:"Ctrl+Shift+S"},reply:{exec:function(){null!==document.getElementById("QuickReplyDialog")?document.querySelector('[data-bs-save*="modal"]').click():null!==document.querySelector('[formaction*="PostReply"]')?document.querySelector('[formaction*="PostReply"]').click():null!==document.querySelector('[id*="QuickReply"]')?document.querySelector('[id*="QuickReply"]').click():null!==document.querySelector('[id*="PostReply"]')&&(window.location.href=document.querySelector('[id*="PostReply"]').href)},tooltip:"Post Reply",shortcut:"Ctrl+Enter"},ignore:{}},T={};function gt(i){function a(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)}function e(e,t){e=[].slice.call(e);for(var n,o=a(e.shift()),r=0;r<l.length;r++)if(o in l[r]&&(n=l[r][o].apply(i,e),t))return n}var r=this,l=[];r.call=function(){e(arguments,!1)},r.callOnlyFirst=function(){return e(arguments,!0)},r.hasHandler=function(e){var t=l.length;for(e=a(e);t--;)if(e in l[t])return!0;return!1},r.exists=function(e){return e in T&&"function"==typeof(e=T[e])&&"object"==typeof e.prototype},r.isRegistered=function(t){if(r.exists(t)){let e=l.length;for(;e--;)if(l[e]instanceof T[t])return!0}return!1},r.register=function(e){return!(!r.exists(e)||r.isRegistered(e)||(e=new T[e],l.push(e),"init"in e&&e.init.call(i),0))},r.deregister=function(e){var t,n=l.length,o=!1;if(r.isRegistered(e))for(;n--;)l[n]instanceof T[e]&&(o=!0,"destroy"in(t=l.splice(n,1)[0]))&&t.destroy.call(i);return o},r.destroy=function(){for(var e=l.length;e--;)"destroy"in l[e]&&l[e].destroy.call(i);l=[],i=null}}gt.plugins=T;var E=function(e,t,n){var o,r,i,a,l,s="",c=e.startContainer,u=e.startOffset;for(c&&3!==c.nodeType&&(c=c.childNodes[u],u=0),i=a=u;n>s.length&&c&&3===c.nodeType;)o=c.nodeValue,r=n-s.length,l&&(a=o.length,i=0),l=c,c=t?(u=i=Math.max(a-r,0),s=o.substr(i,a-i)+s,l.previousSibling):(u=i+(a=Math.min(r,o.length)),s+=o.substr(i,a),l.nextSibling);return{node:l||c,offset:u,text:s}};function vt(r,e,i){var a,l,s=e||r.contentDocument||r.document,c="sceditor-start-marker",u="sceditor-end-marker",g=this;g.insertHTML=function(e,t){if(!g.selectedRange())return!1;t&&(e+=g.selectedHtml()+t);var n=xe("p",{},s),o=s.createDocumentFragment();for(n.innerHTML=i(e);n.firstChild;)ke(o,n.firstChild);g.insertNode(o)},l=function(e,t,n){var o,r=s.createDocumentFragment();if("string"==typeof e?(t&&(e+=g.selectedHtml()+t),r=at(e)):(ke(r,e),t&&(ke(r,g.selectedRange().extractContents()),ke(r,t))),o=r.lastChild){for(;!Oe(o.lastChild,!0);)o=o.lastChild;return ct(o)?o.lastChild||ke(o,document.createTextNode("​")):o=r,g.removeMarkers(),ke(o,a(c)),ke(o,a(u)),n?(ke(e=xe("div"),r),e.innerHTML):r}},g.insertNode=function(e,t){var n,o,e=l(e,t),t=g.selectedRange(),r=t.commonAncestorContainer,i=[];if(!e)return!1;function a(e){e&&h(e)&&i.indexOf(e)<0&&we(e)}t.startContainer!==t.endContainer&&(ve(r.childNodes,function(e,t){h(t)&&i.push(t)}),n=e.firstChild,o=e.lastChild),t.deleteContents(),r&&3!==r.nodeType&&!ct(r)?Le(e,r):(t.insertNode(e),a(n&&n.previousSibling),a(o&&o.nextSibling)),g.restoreRange()},g.cloneSelected=function(){var e=g.selectedRange();if(e)return e.cloneRange()},g.selectedRange=function(){var e,t,n=r.getSelection();if(n){if(n.rangeCount<=0){for(t=s.body;t.firstChild;)t=t.firstChild;(e=s.createRange()).setStartBefore(t),n.addRange(e)}return e=0<n.rangeCount?n.getRangeAt(0):e}},g.hasSelection=function(){var e=r.getSelection();return e&&0<e.rangeCount},g.selectedHtml=function(){var e,t=g.selectedRange();return t?(ke(e=xe("p",{},s),t.cloneContents()),e.innerHTML):""},g.parentNode=function(){var e=g.selectedRange();if(e)return e.commonAncestorContainer},g.getFirstBlockParent=function(e){var t=function(e){return Oe(e,!0)?(e=e?e.parentNode:null)&&t(e):e};return t(e||g.parentNode())},g.insertNodeAt=function(e,t){var n=g.selectedRange(),o=g.cloneSelected();if(!o)return!1;o.collapse(e),o.insertNode(t),g.selectRange(n)},a=function(e){g.removeMarker(e);e=xe("span",{id:e,className:"sceditor-selection sceditor-ignore",style:"display:none;line-height:0"},s);return e.innerHTML=" ",e},g.insertMarkers=function(){var e=g.selectedRange(),t=a(c);g.removeMarkers(),g.insertNodeAt(!0,t),e&&e.collapsed?t.parentNode.insertBefore(a(u),t.nextSibling):g.insertNodeAt(!1,a(u))},g.getMarker=function(e){return s.getElementById(e)},g.removeMarker=function(e){e=g.getMarker(e);e&&we(e)},g.removeMarkers=function(){g.removeMarker(c),g.removeMarker(u)},g.saveRange=function(){g.insertMarkers()},g.selectRange=function(e){var t,n=r.getSelection(),o=e.endContainer;if(e.collapsed&&o&&!Oe(o,!0)){for(t=o.lastChild;t&&Ne(t,".sceditor-ignore");)t=t.previousSibling;Ne(t,"br")&&((o=s.createRange()).setEndAfter(t),o.collapse(!1),g.compare(e,o))&&(e.setStartBefore(t),e.collapse(!0))}n&&(g.clear(),n.addRange(e))},g.restoreRange=function(){var e,t=g.selectedRange(),n=g.getMarker(c),o=g.getMarker(u);if(!n||!o||!t)return!1;e=n.nextSibling===o,(t=s.createRange()).setStartBefore(n),t.setEndAfter(o),e&&t.collapse(!0),g.selectRange(t),g.removeMarkers()},g.selectOuterText=function(e,t){var n=g.cloneSelected();if(!n)return!1;n.collapse(!1),e=E(n,!0,e),t=E(n,!1,t),n.setStart(e.node,e.offset),n.setEnd(t.node,t.offset),g.selectRange(n)},g.getOuterText=function(e,t){var n=g.cloneSelected();return n?(n.collapse(!e),E(n,e,t).text):""},g.replaceKeyword=function(e,t,n,o,r,i){n||e.sort(function(e,t){return e[0].length-t[0].length});var a,l,s,c,u,d,f,m="(^|[\\s    ])",p=e.length,h=r?1:0,n=o||e[p-1][0].length;for(r&&n++,i=i||"",c=(a=g.getOuterText(!0,n)).length,a+=i,t&&(a+=g.getOuterText(!1,n));p--;)if(f=(d=e[p][0]).length,s=Math.max(0,c-f-h),l=-1,r?(u=a.substr(s).match(new RegExp(m+x(d)+m)))&&(l=u.index+s+u[1].length):l=a.indexOf(d,s),-1<l&&l<=c&&c<=l+f+h)return g.selectOuterText(u=c-l,f-u-(/^\S/.test(i)?1:0)),g.insertHTML(e[p][1]),!0;return!1},g.compare=function(e,t){return t=t||g.selectedRange(),e&&t?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):!e&&!t},g.clear=function(){var e=r.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())}}var C,e=navigator.userAgent,bt=/iPhone|iPod|iPad| wosbrowser\//i.test(e),yt=(I=!!window.document.documentMode,R="-ms-ime-align"in document.documentElement.style,(n=document.createElement("div")).contentEditable=!0,"contentEditable"in document.documentElement&&"true"===n.contentEditable&&(n=/Opera Mobi|Opera Mini/i.test(e),/Android/i.test(e)&&(n=!0,/Safari/.test(e))&&(n=!(M=/Safari\/(\d+)/.exec(e))||!M[1]||M[1]<534),/ Silk\//i.test(e)&&(n=!(M=/AppleWebKit\/(\d+)/.exec(e))||!M[1]||M[1]<534),bt&&(n=/OS [0-4](_\d)+ like Mac/i.test(e)),/Firefox/i.test(e)&&(n=!1),/OneBrowser/i.test(e)&&(n=!1),"UCWEB"===navigator.vendor&&(n=!1),!(n=I||R?!0:n)));let{entries:xt,setPrototypeOf:S,isFrozen:A,getPrototypeOf:D,getOwnPropertyDescriptor:N}=Object,{freeze:je,seal:t,create:wt}=Object,{apply:L,construct:_}="undefined"!=typeof Reflect&&Reflect,kt=(je=je||function(e){return e},t=t||function(e){return e},L=L||function(e,t,n){return e.apply(t,n)},_=_||function(e,t){return new e(...t)},o(Array.prototype.forEach)),Tt=o(Array.prototype.lastIndexOf),Et=o(Array.prototype.pop),Ct=o(Array.prototype.push),St=o(Array.prototype.splice),At=o(String.prototype.toLowerCase),Dt=o(String.prototype.toString),Nt=o(String.prototype.match),Lt=o(String.prototype.replace),_t=o(String.prototype.indexOf),Mt=o(String.prototype.trim),We=o(Object.prototype.hasOwnProperty),Ve=o(RegExp.prototype.test),It=(C=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _(C,t)});function o(r){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return L(r,e,n)}}function Ye(t,n,e){var o,r=2<arguments.length&&void 0!==e?e:At;S&&S(t,null);let i=n.length;for(;i--;){let e=n[i];"string"==typeof e&&(o=r(e))!==e&&(A(n)||(n[i]=o),e=o),t[e]=!0}return t}function Ge(e){var t,n,o=wt(null);for([t,n]of xt(e))We(e,t)&&(Array.isArray(n)?o[t]=(t=>{for(let e=0;e<t.length;e++)We(t,e)||(t[e]=null);return t})(n):n&&"object"==typeof n&&n.constructor===Object?o[t]=Ge(n):o[t]=n);return o}function Rt(e,t){for(;null!==e;){var n=N(e,t);if(n){if(n.get)return o(n.get);if("function"==typeof n.value)return o(n.value)}e=D(e)}return function(){return null}}let Ot=je(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ht=je(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$t=je(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Bt=je(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),zt=je(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Pt=je(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ft=je(["#text"]),Ut=je(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),qt=je(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),jt=je(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Wt=je(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);var M=t(/\{\{[\w\W]*|[\w\W]*\}\}/gm),e=t(/<%[\w\W]*|[\w\W]*%>/gm),I=t(/\$\{[\w\W]*/gm),R=t(/^data-[\-\w.\u00B7-\uFFFF]+$/),n=t(/^aria-[\-\w]+$/);let Vt=t(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i);var O=t(/^(?:\w+script|data):/i),H=t(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);let Yt=t(/^html$/i);var $=t(/^[a-z][.\w]*(-[.\w]+)+$/i),Gt=Object.freeze({__proto__:null,ARIA_ATTR:n,ATTR_WHITESPACE:H,CUSTOM_ELEMENT:$,DATA_ATTR:R,DOCTYPE_NAME:Yt,ERB_EXPR:e,IS_ALLOWED_URI:Vt,IS_SCRIPT_OR_DATA:O,MUSTACHE_EXPR:M,TMPLIT_EXPR:I});function Kt(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}}let Xt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12};var Qt=function i(e){e=0<arguments.length&&void 0!==e?e:"undefined"==typeof window?null:window;let u=e=>i(e);if(u.version="3.2.6",u.removed=[],!e||!e.document||e.document.nodeType!==Xt.document||!e.Element)return u.isSupported=!1,u;let r=e.document,l=r,$=l.currentScript,{DocumentFragment:B,HTMLTemplateElement:z,Node:s,Element:P,NodeFilter:t,NamedNodeMap:F=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:U,DOMParser:q,trustedTypes:d}=e;e=P.prototype;let j=Rt(e,"cloneNode"),W=Rt(e,"remove"),V=Rt(e,"nextSibling"),Y=Rt(e,"childNodes"),a=Rt(e,"parentNode");"function"==typeof z&&(e=r.createElement("template")).content&&e.content.ownerDocument&&(r=e.content.ownerDocument);function G(e){return e instanceof RegExp||e instanceof Function}function K(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!o||o!==e){if(e=Ge(e=e&&"object"==typeof e?e:{}),I=-1===Oe.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,R="application/xhtml+xml"===I?Dt:At,h=We(e,"ALLOWED_TAGS")?Ye({},e.ALLOWED_TAGS,R):pe,g=We(e,"ALLOWED_ATTR")?Ye({},e.ALLOWED_ATTR,R):he,Me=We(e,"ALLOWED_NAMESPACES")?Ye({},e.ALLOWED_NAMESPACES,Dt):Ie,Ne=We(e,"ADD_URI_SAFE_ATTR")?Ye(Ge(Le),e.ADD_URI_SAFE_ATTR,R):Le,Ae=We(e,"ADD_DATA_URI_TAGS")?Ye(Ge(De),e.ADD_DATA_URI_TAGS,R):De,S=We(e,"FORBID_CONTENTS")?Ye({},e.FORBID_CONTENTS,R):Se,b=We(e,"FORBID_TAGS")?Ye({},e.FORBID_TAGS,R):Ge({}),ge=We(e,"FORBID_ATTR")?Ye({},e.FORBID_ATTR,R):Ge({}),n=!!We(e,"USE_PROFILES")&&e.USE_PROFILES,ve=!1!==e.ALLOW_ARIA_ATTR,be=!1!==e.ALLOW_DATA_ATTR,ye=e.ALLOW_UNKNOWN_PROTOCOLS||!1,xe=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,y=e.SAFE_FOR_TEMPLATES||!1,x=!1!==e.SAFE_FOR_XML,w=e.WHOLE_DOCUMENT||!1,k=e.RETURN_DOM||!1,T=e.RETURN_DOM_FRAGMENT||!1,E=e.RETURN_TRUSTED_TYPE||!1,ke=e.FORCE_BODY||!1,Te=!1!==e.SANITIZE_DOM,Ee=e.SANITIZE_NAMED_PROPS||!1,Ce=!1!==e.KEEP_CONTENT,C=e.IN_PLACE||!1,me=e.ALLOWED_URI_REGEXP||Vt,L=e.NAMESPACE||N,_=e.MATHML_TEXT_INTEGRATION_POINTS||_,M=e.HTML_INTEGRATION_POINTS||M,v=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&G(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(v.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&G(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(v.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(v.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),y&&(be=!1),T&&(k=!0),n&&(h=Ye({},Ft),g=[],!0===n.html&&(Ye(h,Ot),Ye(g,Ut)),!0===n.svg&&(Ye(h,Ht),Ye(g,qt),Ye(g,Wt)),!0===n.svgFilters&&(Ye(h,$t),Ye(g,qt),Ye(g,Wt)),!0===n.mathMl)&&(Ye(h,zt),Ye(g,jt),Ye(g,Wt)),e.ADD_TAGS&&Ye(h=h===pe?Ge(h):h,e.ADD_TAGS,R),e.ADD_ATTR&&Ye(g=g===he?Ge(g):g,e.ADD_ATTR,R),e.ADD_URI_SAFE_ATTR&&Ye(Ne,e.ADD_URI_SAFE_ATTR,R),e.FORBID_CONTENTS&&Ye(S=S===Se?Ge(S):S,e.FORBID_CONTENTS,R),Ce&&(h["#text"]=!0),w&&Ye(h,["html","head","body"]),h.table&&(Ye(h,["tbody"]),delete b.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw It('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw It('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');m=e.TRUSTED_TYPES_POLICY,c=m.createHTML("")}else null!==(m=void 0===m?((e,t)=>{if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;var o="data-tt-policy-suffix",t="dompurify"+((n=t&&t.hasAttribute(o)?t.getAttribute(o):n)?"#"+n:"");try{return e.createPolicy(t,{createHTML(e){return e},createScriptURL(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}})(d,$):m)&&"string"==typeof c&&(c=m.createHTML(""));je&&je(e),o=e}}function f(e,t){try{Ct(u.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Ct(u.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(k||T)try{O(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}function X(e){let t=null,n=null;ke?e="<remove></remove>"+e:(o=Nt(e,/^[\r\n\t ]+/),n=o&&o[0]),"application/xhtml+xml"===I&&L===N&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=m?m.createHTML(e):e;if(L===N)try{t=(new q).parseFromString(o,I)}catch(e){}if(!t||!t.documentElement){t=ee.createDocument(L,"template",null);try{t.documentElement.innerHTML=_e?c:o}catch(e){}}return o=t.body||t.documentElement,e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),L===N?oe.call(t,w?"html":"body")[0]:w?t.documentElement:o}function Q(e){return te.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT|t.SHOW_PROCESSING_INSTRUCTION|t.SHOW_CDATA_SECTION,null)}function J(e){return e instanceof U&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof F)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)}function Z(e){return"function"==typeof s&&e instanceof s}let m,c="",{implementation:ee,createNodeIterator:te,createDocumentFragment:ne,getElementsByTagName:oe}=r,re=l.importNode,p=Kt(),{MUSTACHE_EXPR:ie,ERB_EXPR:ae,TMPLIT_EXPR:le,DATA_ATTR:se,ARIA_ATTR:ce,IS_SCRIPT_OR_DATA:ue,ATTR_WHITESPACE:de,CUSTOM_ELEMENT:fe}=(u.isSupported="function"==typeof xt&&"function"==typeof a&&ee&&void 0!==ee.createHTMLDocument,Gt),me=Gt.IS_ALLOWED_URI,h=null,pe=Ye({},[...Ot,...Ht,...$t,...zt,...Ft]),g=null,he=Ye({},[...Ut,...qt,...jt,...Wt]),v=Object.seal(wt(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),b=null,ge=null,ve=!0,be=!0,ye=!1,xe=!0,y=!1,x=!0,w=!1,we=!1,ke=!1,k=!1,T=!1,E=!1,Te=!0,Ee=!1,Ce=!0,C=!1,n={},S=null,Se=Ye({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ae=null,De=Ye({},["audio","video","img","source","image","track"]),Ne=null,Le=Ye({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),A="http://www.w3.org/1998/Math/MathML",D="http://www.w3.org/2000/svg",N="http://www.w3.org/1999/xhtml",L=N,_e,Me=null,Ie=Ye({},[A,D,N],Dt),_=Ye({},["mi","mo","mn","ms","mtext"]),M=Ye({},["annotation-xml"]),Re=Ye({},["title","style","font","a","script"]),I=null,Oe=["application/xhtml+xml","text/html"],R=null,o=null,He=r.createElement("form"),$e=Ye({},[...Ht,...$t,...Bt]),Be=Ye({},[...zt,...Pt]),O=function(t){Ct(u.removed,{element:t});try{a(t).removeChild(t)}catch(e){W(t)}};function H(e,t,n){kt(e,e=>{e.call(u,t,n,o)})}function ze(t){let n=null;if(H(p.beforeSanitizeElements,t,null),!J(t)){var e=R(t.nodeName);if(H(p.uponSanitizeElement,t,{tagName:e,allowedTags:h}),!(x&&t.hasChildNodes()&&!Z(t.firstElementChild)&&Ve(/<[/\w!]/g,t.innerHTML)&&Ve(/<[/\w!]/g,t.textContent)||t.nodeType===Xt.progressingInstruction||x&&t.nodeType===Xt.comment&&Ve(/<[/\w]/g,t.data))){if(h[e]&&!b[e])return t instanceof P&&!(e=>{let t=a(e);t&&t.tagName||(t={namespaceURI:L,tagName:"template"});var n=At(e.tagName),o=At(t.tagName);return!!Me[e.namespaceURI]&&(e.namespaceURI===D?t.namespaceURI===N?"svg"===n:t.namespaceURI===A?"svg"===n&&("annotation-xml"===o||_[o]):Boolean($e[n]):e.namespaceURI===A?t.namespaceURI===N?"math"===n:t.namespaceURI===D?"math"===n&&M[o]:Boolean(Be[n]):e.namespaceURI===N?!(t.namespaceURI===D&&!M[o]||t.namespaceURI===A&&!_[o]||Be[n])&&(Re[n]||!$e[n]):!("application/xhtml+xml"!==I||!Me[e.namespaceURI]))})(t)||("noscript"===e||"noembed"===e||"noframes"===e)&&Ve(/<\/no(script|embed|frames)/i,t.innerHTML)?O(t):(y&&t.nodeType===Xt.text&&(n=t.textContent,kt([ie,ae,le],e=>{n=Lt(n,e," ")}),t.textContent!==n)&&(Ct(u.removed,{element:t.cloneNode()}),t.textContent=n),H(p.afterSanitizeElements,t,null));if(!b[e]&&qe(e)){if(v.tagNameCheck instanceof RegExp&&Ve(v.tagNameCheck,e))return;if(v.tagNameCheck instanceof Function&&v.tagNameCheck(e))return}if(Ce&&!S[e]){var o=a(t)||t.parentNode,r=Y(t)||t.childNodes;if(r&&o)for(let e=r.length-1;0<=e;--e){var i=j(r[e],!0);i.__removalCount=(t.__removalCount||0)+1,o.insertBefore(i,V(t))}}}}O(t)}function Pe(e,t,n){if(Te&&("id"===t||"name"===t)&&(n in r||n in He))return!1;if((!be||ge[t]||!Ve(se,t))&&(!ve||!Ve(ce,t)))if(!g[t]||ge[t]){if(!(qe(e)&&(v.tagNameCheck instanceof RegExp&&Ve(v.tagNameCheck,e)||v.tagNameCheck instanceof Function&&v.tagNameCheck(e))&&(v.attributeNameCheck instanceof RegExp&&Ve(v.attributeNameCheck,t)||v.attributeNameCheck instanceof Function&&v.attributeNameCheck(t))||"is"===t&&v.allowCustomizedBuiltInElements&&(v.tagNameCheck instanceof RegExp&&Ve(v.tagNameCheck,n)||v.tagNameCheck instanceof Function&&v.tagNameCheck(n))))return!1}else if(!Ne[t]&&!Ve(me,Lt(n,de,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==_t(n,"data:")||!Ae[e])&&(!ye||Ve(ue,Lt(n,de,"")))&&n)return!1;return!0}function Fe(n){H(p.beforeSanitizeAttributes,n,null);var o=n.attributes;if(o&&!J(n)){var r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:g,forceKeepAttr:void 0};let e=o.length;for(;e--;){var{name:i,namespaceURI:a,value:l}=o[e],s=R(i);let t="value"===i?l:Mt(l);if(r.attrName=s,r.attrValue=t,r.keepAttr=!0,r.forceKeepAttr=void 0,H(p.uponSanitizeAttribute,n,r),t=r.attrValue,!Ee||"id"!==s&&"name"!==s||(f(i,n),t="user-content-"+t),x&&Ve(/((--!?|])>)|<\/(style|title)/i,t))f(i,n);else if(!r.forceKeepAttr)if(r.keepAttr)if(!xe&&Ve(/\/>/i,t))f(i,n);else{y&&kt([ie,ae,le],e=>{t=Lt(t,e," ")});var c=R(n.nodeName);if(Pe(c,s,t)){if(m&&"object"==typeof d&&"function"==typeof d.getAttributeType&&!a)switch(d.getAttributeType(c,s)){case"TrustedHTML":t=m.createHTML(t);break;case"TrustedScriptURL":t=m.createScriptURL(t)}if(t!==l)try{a?n.setAttributeNS(a,i,t):n.setAttribute(i,t),J(n)?O(n):Et(u.removed)}catch(e){f(i,n)}}else f(i,n)}else f(i,n)}H(p.afterSanitizeAttributes,n,null)}}function Ue(e){var t,n=Q(e);for(H(p.beforeSanitizeShadowDOM,e,null);t=n.nextNode();)H(p.uponSanitizeShadowNode,t,null),ze(t),Fe(t),t.content instanceof B&&Ue(t.content);H(p.afterSanitizeShadowDOM,e,null)}let qe=function(e){return"annotation-xml"!==e&&Nt(e,fe)};return u.sanitize=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};let o=null,r=null;if("string"!=typeof(e=(_e=!e)?"\x3c!--\x3e":e)&&!Z(e)){if("function"!=typeof e.toString)throw It("toString is not a function");if("string"!=typeof(e=e.toString()))throw It("dirty is not a string, aborting")}if(!u.isSupported)return e;if(we||K(n),u.removed=[],C="string"!=typeof e&&C){if(e.nodeName){n=R(e.nodeName);if(!h[n]||b[n])throw It("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof s)(n=(o=X("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType===Xt.element&&"BODY"===n.nodeName||"HTML"===n.nodeName?o=n:o.appendChild(n);else{if(!k&&!y&&!w&&-1===e.indexOf("<"))return m&&E?m.createHTML(e):e;if(!(o=X(e)))return k?null:E?c:""}o&&ke&&O(o.firstChild);for(var i=Q(C?e:o);t=i.nextNode();)ze(t),Fe(t),t.content instanceof B&&Ue(t.content);if(C)return e;if(k){if(T)for(r=ne.call(o.ownerDocument);o.firstChild;)r.appendChild(o.firstChild);else r=o;return r=g.shadowroot||g.shadowrootmode?re.call(l,r,!0):r}let a=w?o.outerHTML:o.innerHTML;return w&&h["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&Ve(Yt,o.ownerDocument.doctype.name)&&(a="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+a),y&&kt([ie,ae,le],e=>{a=Lt(a,e," ")}),m&&E?m.createHTML(a):a},u.setConfig=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};K(e),we=!0},u.clearConfig=function(){o=null,we=!1},u.isValidAttribute=function(e,t,n){return o||K({}),e=R(e),t=R(t),Pe(e,t,n)},u.addHook=function(e,t){"function"==typeof t&&Ct(p[e],t)},u.removeHook=function(e,t){return void 0!==t?-1===(t=Tt(p[e],t))?void 0:St(p[e],t,1)[0]:Et(p[e])},u.removeHooks=function(e){p[e]=[]},u.removeAllHooks=function(){p=Kt()},u}(),ze=window,Pe=document,Jt=/^image\/(p?jpe?g|gif|png|bmp)$/i;function Zt(e,t){var n;m(e,function(e){Oe(e,!0)?(n||e.nodeType===ye?/\S/.test(e.nodeValue):!Ne(e,".sceditor-ignore"))&&(n||Le(n=xe("p",{},t),e),ke(n,e)):n=null},!1,!0)}function Fe(r,e){var i,y,u,a,o,l,d,s,x,c,f,m,t,p,h,g,v,H,b,$,B,n,w,z,P,k,T,F,U,q,j,W,V,Y,G,K,X,Q,J,Z,ee,E,te,ne,oe,re,ie,C,ae,S,le,se,ce,ue,A,de,D,fe,N,L=this,_={},M=[],I={},me={},R=(L.commands=Ke(!0,{},e.commands||Be),L.opts=Ke(!0,{},ht,e)),pe=(Array.isArray(R.allowedIframeUrls)||(R.allowedIframeUrls=[]),R.allowedIframeUrls.push("https://youtube.com/embed/"),R.allowedIframeUrls.push("https://player.vimeo.com/video/"),R.allowedIframeUrls.push("https://www.instagram.com/p/"),R.allowedIframeUrls.push("https://www.facebook.com/plugins/"),Qt());function O(e){var t=["iframe"].concat(R.allowedTags),n=["allowfullscreen","frameborder","target"].concat(R.allowedAttributes);return pe.sanitize(e,{ADD_TAGS:t,ADD_ATTR:n})}pe.addHook("uponSanitizeElement",function(e,t){var n=R.allowedIframeUrls;if("iframe"===t.tagName){var o=Se(e,"src")||"";for(let e=0;e<n.length;e++){var r=n[e];if(ge(r)&&o.substr(0,r.length)===r)return;if(r.test&&r.test(o))return}we(e)}}),pe.addHook("afterSanitizeAttributes",function(e){"target"in e&&Se(e,"data-sce-target",Se(e,"target")),Ae(e,"target")});let he=o=>new Promise((e,t)=>{var n=document.createElement("script");n.type="text/javascript",n.onload=e,n.onerror=t,n.src=o,document.head.append(n)});e=function(){var e;R.locale&&"en"!==R.locale?((e=[]).push(he(`../${R.basePath}languages/${R.locale}.js`)),Promise.all(e).then(()=>{F()}).catch(()=>console.error("Something went wrong."))):F()},F=function(){r._sceditor=L,R.locale&&"en"!==R.locale&&j(),Le(y=xe("div",{className:"sceditor-container card"}),r),De(y,"z-index",R.zIndex),B=r.required,r.required=!1;function e(){Ce(ze,"load",e),R.autofocus&&ce(!!R.autofocusEnd),N(),S(),h.call("ready"),"onReady"in i&&i.onReady.call(L)}var t=Fe.formats[R.format];i=t?new t:{},h=new gt(L),(R.plugins||"").split(",").forEach(function(e){h.register(e.trim())}),"init"in i&&i.init.call(L),W(),q(),V(),Y(),yt||L.toggleSourceMode(),C();Ee(ze,"load",e),"complete"===Pe.readyState&&e()},j=function(){var e;(t=Fe.locale[R.locale])||(e=R.locale.split("-"),t=Fe.locale[e[0]]),t&&t.dateFormat&&(R.dateFormat=t.dateFormat)},q=function(){s=xe("textarea"),Se(a=xe("iframe",{frameborder:0,allowfullscreen:!0}),"role","none"),Me(x=xe("div"),"card-footer"),Me(x,"text-body-secondary"),Me(x,"text-end"),Me(x,"small"),Me(x,"p-2"),x.appendChild(at(L._("Characters remaining:")+'<span id="editor-Counter" class="badge bg-secondary ms-1"></span>')),R.startInSourceMode?(Me(y,"sourceMode"),Je(a)):(Me(y,"wysiwygMode"),Je(s)),R.spellcheck||Se(y,"spellcheck","false"),"https:"===ze.location.protocol&&Se(a,"src","about:blank"),Se(s,"title","source"),Se(s,"name","source"),ke(y,a),ke(y,s),ke(y,x),L.dimensions(R.width||nt(r),R.height||Re(r)),(d=a.contentDocument).open();var t="",e=(R.styles.forEach(e=>{t+=$e("style",{style:e})}),d.write($e("html",{spellcheck:R.spellcheck?"":'spellcheck="false"',charset:R.charset,themeMode:R.themeMode,styles:t})),d.close(),l=d.body,o=a.contentWindow,L.readOnly(!!R.readOnly),bt&&(Re(l,"100%"),Ee(l,"touchend",L.focus)),Se(r,"tabindex")),e=(Se(s,"tabindex",e),Se(a,"tabindex",e),p=new vt(o,null,O),Je(r),L.val(r.value),R.placeholder||Se(r,"placeholder"));e&&(s.placeholder=e,Se(l,"placeholder",e))},V=function(){R.autoUpdate&&(Ee(l,"blur",fe),Ee(s,"blur",fe)),null===R.rtl&&(R.rtl="rtl"===De(s,"direction")),L.rtl(!!R.rtl),R.autoExpand&&(Ee(l,"load",N,!0),Ee(l,"input keyup",N)),R.resizeEnabled&&G(),Se(y,"id",R.id)},Y=function(){var e=r.form,t="compositionstart compositionend",n="keydown keyup keypress focus blur contextmenu input",o="onselectionchange"in d?"selectionchange":"keyup focus blur contextmenu mouseup touchend click";Ee(Pe,"click",re),e&&(Ee(e,"reset",E),Ee(e,"submit",L.updateOriginal,!0)),Ee(window,"pagehide",L.updateOriginal),Ee(window,"pageshow",E),Ee(l,"keypress",ee),Ee(l,"keydown",J),Ee(l,"keydown",Z),Ee(l,"keyup",S),Ee(l,"blur",de),Ee(l,"keyup",D),Ee(l,"paste",K),Ee(l,"cut copy",X),Ee(l,t,ne),Ee(l,o,le),Ee(l,n,oe),Ee(l,"blur",function(){L.val()||Me(l,"placeholder")}),Ee(l,"focus",function(){tt(l,"placeholder")}),Ee(s,"blur",de),Ee(s,"keyup",D),Ee(s,"keydown",J),Ee(s,t,ne),Ee(s,n,oe),Ee(d,"mousedown",te),Ee(d,o,le),Ee(d,"keyup",S),Ee(y,"selectionchanged",se),Ee(y,"selectionchanged",C),Ee(y,"selectionchanged valuechanged nodechanged pasteraw paste",oe)},W=function(){var i,a=L.commands,l=(R.toolbarExclude||"").split(","),e=R.toolbar.split("|");u=xe("div",{className:"card-header btn-toolbar",unselectable:"on"}),R.icons in Fe.icons&&(T=new Fe.icons[R.icons]),ve(e,function(e,t){i=xe("div",{className:"btn-group btn-group-sm m-1"}),ve(t.split(","),function(e,t){var n,o,r=a[t];!r||-1<l.indexOf(t)||(n=r.shortcut,o=$e("toolbarButton",{name:t},!0).firstChild,"source"===t?o.classList.add("btn-secondary"):o.classList.add("btn-primary"),T&&T.create&&T.create(t)&&Le(T.create(t),o.firstChild),o._sceTxtMode=!!r.txtExec,o._sceWysiwygMode=!!r.exec,Ie(o,"disabled",!r.exec),Ee(o,"click",function(e){_e(o,"disabled")||U(o,r),C(),e.preventDefault()}),Ee(o,"mousedown",function(e){L.closeDropDown(),e.preventDefault()}),r.tooltip&&Se(o,"title",L._(r.tooltip)+(n?" ("+n+")":"")),n&&L.addShortcut(n,t),r.state?M.push({name:t,state:r.state}):ge(r.exec)&&M.push({name:t,state:r.exec}),ke(i,o),me[t]=o)}),i.firstChild&&ke(u,i)}),ke(R.toolbarContainer||y,u)},G=function(){var e=xe("div",{className:"sceditor-grip"}),t="touchmove mousemove",n="touchcancel touchend mouseup",o=0,r=0,i=0,a=0,l=0,s=0,c=nt(y),u=Re(y),d=!1,f=L.rtl(),m=R.resizeMinHeight||u/1.5,p=R.resizeMaxHeight||2.5*u,h=R.resizeMinWidth||c/1.25,g=R.resizeMaxWidth||1.25*c,v=function(e){a=("touchmove"===e.type?(e=ze.event,i=e.changedTouches[0].pageX,e.changedTouches[0]):(i=e.pageX,e)).pageY;var t=s+(a-r),n=f?l-(i-o):l+(i-o);0<g&&g<n&&(n=g),0<h&&n<h&&(n=h),R.resizeWidth||(n=!1),0<p&&p<t&&(t=p),0<m&&t<m&&(t=m),R.resizeHeight||(t=!1),(n||t)&&L.dimensions(n,t),e.preventDefault()},b=function(e){d&&(d=!1,tt(y,"resizing"),Ce(Pe,t,v),Ce(Pe,n,b),e.preventDefault())};T&&T.create&&(u=T.create("grip"))&&ke(e,u),ke(y,x),ke(y,e),Ee(e,"touchstart mousedown",function(e){r=("touchstart"===e.type?(e=ze.event,o=e.touches[0].pageX,e.touches[0]):(o=e.pageX,e)).pageY,l=nt(y),s=Re(y),d=!0,Me(y,"resizing"),Ee(Pe,t,v),Ee(Pe,n,b),e.preventDefault()})},ce=function(e){var t,n=l.firstChild;if(rt(y))if(L.sourceMode())t=e?s.value.length:0,s.setSelectionRange(t,t);else{if(dt(l),e)for((n=l.lastChild)||(n=xe("p",{},d),ke(l,n));n.lastChild;)Ne(n=n.lastChild,"br")&&n.previousSibling&&(n=n.previousSibling);t=d.createRange(),ct(n)?t.selectNodeContents(n):(t.setStartBefore(n),e&&t.setStartAfter(n)),t.collapse(!e),p.selectRange(t),b=t,e&&(l.scrollTop=l.scrollHeight),L.focus()}},L.readOnly=function(e){return"boolean"!=typeof e?!s.readonly:(l.contentEditable=!e,s.readonly=!e,ie(e),L)},L.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===Se(s,"dir"):(Se(l,"dir",t),Se(s,"dir",t),tt(y,"rtl"),tt(y,"ltr"),Me(y,t),T&&T.rtl&&T.rtl(e),L)},ie=function(n){var o=L.inSourceMode()?"_sceTxtMode":"_sceWysiwygMode";ve(me,function(e,t){Ie(t,"disabled",n||!t[o])})},L.width=function(e,t){return e||0===e?(L.dimensions(e,null,t),L):nt(y)},L.dimensions=function(e,t,n){return t=!(!t&&0!==t)&&t,!1===(e=!(!e&&0!==e)&&e)&&!1===t?{width:L.width(),height:L.height()}:(!1!==e&&(!1!==n&&(R.width=e),nt(y,e)),!1!==t&&(!1!==n&&(R.height=t),Re(y,t)),L)},L.height=function(e,t){return e||0===e?(L.dimensions(null,e,t),L):Re(y)},L.maximize=function(e){var t="sceditor-maximize";return Ue(e)?_e(y,t):((e=!!e)&&(P=ze.scrollY),Ie(Pe.documentElement,t,e),Ie(Pe.body,t,e),Ie(y,t,e),L.width(e?"100%":R.width,!1),L.height(e?"100%":R.height,!1),e||ze.scrollTo(0,P),N(),L)},N=function(){R.autoExpand&&!z&&(z=setTimeout(L.expandToContent,200))},L.expandToContent=function(e){var t,n;L.maximize()||(clearTimeout(z),z=!1,w||(n=R.resizeMinHeight||R.height||Re(r),w={min:n,max:R.resizeMaxHeight||2*n}),(n=Pe.createRange()).selectNodeContents(l),n=n.getBoundingClientRect(),t=d.documentElement.clientHeight-1,n=n.bottom-n.top,n=L.height()+1+(n-t),e||-1===w.max||(n=Math.min(n,w.max)),L.height(Math.ceil(Math.max(n,w.min))))},L.destroy=function(){var e;h&&(h.destroy(),h=p=null,c&&we(c),Ce(Pe,"click",re),(e=r.form)&&(Ce(e,"reset",E),Ce(e,"submit",L.updateOriginal,!0)),Ce(window,"pagehide",L.updateOriginal),Ce(window,"pageshow",E),we(s),we(u),we(y),delete r._sceditor,Ze(r),r.required=B)},L.createDropDown=function(e,t,n){var t="sceditor-"+t;L.closeDropDown(),c&&_e(c,t)||(e=Ke({top:e.offsetTop,left:e.parentElement.offsetLeft+e.offsetLeft,marginTop:e.clientHeight},R.dropDownCss),De(c=xe("div",{className:"dropdown-menu show sceditor-dropdown "+t}),e),ke(c,n),ke(y,c),Ee(c,"click focusin",function(e){e.stopPropagation()}),c&&(t=Te(c,"input,textarea")[0])&&t.focus())},re=function(e){3!==e.which&&c&&!e.defaultPrevented&&(fe(),L.closeDropDown())},X=function(n){var o=p.selectedRange();if(o){var r,i=xe("div",{},d);let e,t=o.commonAncestorContainer;for(;t&&Oe(t,!0);)t.nodeType===be&&(r=t.cloneNode(),i.firstChild&&ke(r,i.firstChild),ke(i,r),e=e||r),t=t.parentNode;ke(e||i,o.cloneContents()),dt(i),n.clipboardData.setData("text/html",i.innerHTML),ve(Te(i,"p"),function(e,t){st(t,"div")}),ve(Te(i,"br"),function(e,t){t.nextSibling&&Oe(t.nextSibling,!0)||we(t)}),ke(l,i),n.clipboardData.setData("text/plain",i.innerText),we(i),"cut"===n.type&&o.deleteContents(),n.preventDefault()}},K=function(e){var t=l,n=e.clipboardData;if(n){var o={},r=n.types,i=n.items;for(let e=0;e<r.length;e++){if(r.indexOf("text/html")<0&&ze.FileReader&&i&&Jt.test(i[e].type))return void h.call("pasteHtml",i[e].getAsFile());o[r[e]]=n.getData(r[e])}o.text=o["text/plain"],R.enablePasteFiltering||(o.html=O(o["text/html"])),Q(o)}else if(!k){var a=t.scrollTop;for(p.saveRange(),k=Pe.createDocumentFragment();t.firstChild;)ke(k,t.firstChild);setTimeout(function(){var e=t.innerHTML;t.innerHTML="",ke(t,k),t.scrollTop=a,k=!1,p.restoreRange(),Q({html:O(e)})},0)}e.preventDefault()},Q=function(e){var t=xe("div",{},d),e=(h.call("pasteRaw",e),ot(y,"pasteraw",e),e.html?(t.innerHTML=O(e.html),ut(t)):t.innerHTML=He(e.text||""),{val:t.innerHTML}),t=("fragmentToSource"in i&&(e.val=i.fragmentToSource(e.val,d,g)),h.call("paste",e),ot(y,"paste",e),"fragmentToHtml"in i&&(e.val=i.fragmentToHtml(e.val,g)),h.call("pasteHtml",e),p.getFirstBlockParent());L.wysiwygEditorInsertHtml(e.val,null,!0),function e(t){if(t.nodeType===be){for(var n=t.parentNode,o=t.tagName,r=t.childNodes.length;r--;)e(t.childNodes[r]);if(Oe(t)&&"BR"!==o){for(r=t.style.length;r--;){var i=t.style[r];De(n,i)===De(t,i)&&t.style.removeProperty(i)}if(!t.style.length)if(Ae(t,"style"),"FONT"===o&&(De(t,"fontFamily").toLowerCase()===De(n,"fontFamily").toLowerCase()&&Ae(t,"face"),De(t,"color")===De(n,"color")&&Ae(t,"color"),De(t,"fontSize")===De(n,"fontSize"))&&Ae(t,"size"),!t.attributes.length&&/SPAN|FONT/.test(o))pt(t);else if(/B|STRONG|EM|SPAN|FONT/.test(o))for(var a=/B|STRONG/.test(o),l="EM"===o;n&&Oe(n)&&(!a||/bold|700/i.test(De(n,"fontWeight")))&&(!l||"italic"===De(n,"fontStyle"));){if((n.tagName===o||a&&/B|STRONG/.test(n.tagName))&&mt(n,t)){pt(t);break}n=n.parentNode}var s=t.nextSibling;s&&s.tagName===o&&mt(s,t)&&(ke(t,s),pt(s))}}}(t)},L.closeDropDown=function(e){c&&(we(c),c=null),!0===e&&L.focus()},L.wysiwygEditorInsertHtml=function(e,t,n){var o=Re(a);L.focus(),!n&&Qe(v,"code")||(p.insertHTML(e,t),p.saveRange(),ut(l),Zt(l,d),Ze(n=Te(l,"#sceditor-end-marker")[0]),e=l.scrollTop,t=ft(n).top+1.5*n.offsetHeight-o,Je(n),(e<t||t+o<e)&&(l.scrollTop=t),A(!1),p.restoreRange(),S())},L.wysiwygEditorInsertText=function(e,t){L.wysiwygEditorInsertHtml(He(e),He(t))},L.insertText=function(e,t){return L.inSourceMode()?L.sourceEditorInsertText(e,t):L.wysiwygEditorInsertText(e,t),L},L.sourceEditorInsertText=function(e,t){var n,o=s.selectionStart,r=s.selectionEnd,i=s.scrollTop;s.focus(),n=s.value,t&&(e+=n.substring(o,r)+t),s.value=n.substring(0,o)+e+n.substring(r,n.length),s.selectionStart=o+e.length-(t?t.length:0),s.selectionEnd=s.selectionStart,s.scrollTop=i,s.focus(),A()},L.getRangeHelper=function(){return p},L.sourceEditorCaret=function(e){return s.focus(),e?(s.selectionStart=e.start,s.selectionEnd=e.end,this):{start:s.selectionStart,end:s.selectionEnd}},L.val=function(e,t){return ge(e)?(L.inSourceMode()?L.setSourceEditorValue(e):(!1!==t&&"toHtml"in i&&(e=i.toHtml(e)),L.setWysiwygEditorValue(e)),L):L.inSourceMode()?L.getSourceEditorValue(!1):L.getWysiwygEditorValue(t)},L.insert=function(t,n,o,e,r){if(L.inSourceMode())L.sourceEditorInsertText(t,n);else{if(n){let e=p.selectedHtml();t+=(e=!1!==o&&"fragmentToSource"in i?i.fragmentToSource(e,d,g):e)+n}!1!==o&&"fragmentToHtml"in i&&(t=i.fragmentToHtml(t,g)),!1!==o&&!0===r&&(t=t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),L.wysiwygEditorInsertHtml(t)}return L},L.getWysiwygEditorValue=function(e){var t,n=xe("div",{},d),o=l.childNodes;for(let e=0;e<o.length;e++)ke(n,o[e].cloneNode(!0));return ke(l,n),ut(n),we(n),t=n.innerHTML,t=!1!==e&&i.hasOwnProperty("toSource")?i.toSource(t,d):t},L.getBody=function(){return l},L.getContentAreaContainer=function(){return a},L.getSourceEditorValue=function(e){var t=s.value;return t=!1!==e&&"toHtml"in i?i.toHtml(t):t},L.getSourceEditor=function(){return s},L.setWysiwygEditorValue=function(e){l.innerHTML=O(e=e||"<p><br /></p>"),S(),A(),N()},L.setSourceEditorValue=function(e){s.value=e,A()},L.updateOriginal=function(){r.value=L.val()},L.inSourceMode=function(){return _e(y,"sourceMode")},L.sourceMode=function(e){var t=L.inSourceMode();return"boolean"!=typeof e?t:((t&&!e||!t&&e)&&L.toggleSourceMode(),L)},L.toggleSourceMode=function(){var e=L.inSourceMode();!yt&&e||(e||(p.saveRange(),p.clear()),b=null,L.blur(),e?L.setWysiwygEditorValue(L.getSourceEditorValue()):L.setSourceEditorValue(L.getWysiwygEditorValue()),et(s),et(a),Ie(y,"wysiwygMode",e),Ie(y,"sourceMode",!e),ie(),C(),void 0!==L.opts.onToggleMode&&L.opts.onToggleMode(L))},ae=function(){return s.focus(),s.value.substring(s.selectionStart,s.selectionEnd)},U=function(e,t){L.inSourceMode()?t.txtExec&&(Array.isArray(t.txtExec)?L.sourceEditorInsertText.apply(L,t.txtExec):t.txtExec.call(L,e,ae())):t.exec&&(qe(t.exec)?t.exec.call(L,e):L.execCommand(t.exec,t.hasOwnProperty("execParam")?t.execParam:null))},L.execCommand=function(e,t){var n=!1,o=L.commands[e];if(L.focus(),!Qe(p.parentNode(),"code")){try{n=d.execCommand(e,!1,t)}catch(e){}!n&&o&&o.errorMessage&&alert(L._(o.errorMessage)),C()}},le=function(){function e(){if(o.getSelection()&&o.getSelection().rangeCount<=0)b=null;else if(p&&!p.compare(b)){if((b=p.cloneSelected())&&b.collapsed){let e=b.startContainer;var t=b.startOffset;for(t&&e.nodeType!==ye&&(e=e.childNodes[t]);e&&e.parentNode!==l;)e=e.parentNode;e&&Oe(e,!0)&&(p.saveRange(),Zt(l,d),p.restoreRange())}ot(y,"selectionchanged")}$=!1}$||($=!0,"onselectionchange"in d?e():setTimeout(e,100))},se=function(){var e,t=p.parentNode();g!==t&&(e=g,g=t,v=p.getFirstBlockParent(t),ot(y,"nodechanged",{oldNode:e,newNode:g})),H&&(v.querySelectorAll("span[style]").forEach(e=>{e&&(e.outerHTML=e.innerHTML)}),H=!1)},L.currentNode=function(){return g},L.currentBlockNode=function(){return v},C=function(){var n,o,r="active",i=d,a=L.sourceMode();if(L.readOnly())ve(Te(u,r),function(e,t){tt(t,r)});else{a||(o=p.parentNode(),n=p.getFirstBlockParent(o));for(let t=0;t<M.length;t++){let e=0;var l=me[M[t].name],s=M[t].state,c=a&&!l._sceTxtMode||!a&&!l._sceWysiwygMode;if(ge(s)){if(!a)try{-1<(e=i.queryCommandEnabled(s)?0:-1)&&(e=i.queryCommandState(s)?1:0)}catch(e){}}else c||(e=s.call(L,o,n));Ie(l,"disabled",c||e<0),Ie(l,r,0<e)}T&&T.update&&T.update(a,o,n)}},ee=function(t){if(!t.defaultPrevented&&(L.closeDropDown(),13===t.which))if(!Ne(v,"li,ul,ol")&&lt(v)){var n=xe("br",{},d),o=(p.insertNode(n),n.parentNode);let e=o.lastChild;e&&e.nodeType===ye&&""===e.nodeValue&&(we(e),e=o.lastChild),!Oe(o,!0)&&e===n&&Oe(n.previousSibling)&&p.insertHTML("<br>"),t.preventDefault()}},S=function(){it(l,function(e){var t;if(e.nodeType===be&&!/inline/.test(De(e,"display"))&&(!Ne(e,".sceditor-nlf")&&lt(e)))return(t=xe("p",{},d)).className="sceditor-nlf",t.innerHTML="<br />",ke(l,t),!1;if(3===e.nodeType&&!/^\s*$/.test(e.nodeValue)||Ne(e,"br"))return!1})},E=function(){L.val(r.value)},te=function(){L.closeDropDown()},L._=function(){var n=arguments;return t&&t[n[0]]?n[0]=t[n[0]]:"en"!==R.locale&&console.info(`translation for '${n[0]}' is missing for locale '${R.locale}'`),n[0].replace(/\{(\d+)\}/g,function(e,t){return void 0!==n[+t+1]?n[+t+1]:`{${t}}`})},oe=function(t){h&&h.call(t.type+"Event",t,L);var e=(t.target===s?"scesrc":"scewys")+t.type;_[e]&&_[e].forEach(function(e){e.call(L,t)})},L.bind=function(e,t,n,o){for(var r,i,a=(e=e.split(" ")).length;a--;)qe(t)&&(r="scewys"+e[a],i="scesrc"+e[a],n||(_[r]=_[r]||[],_[r].push(t)),o||(_[i]=_[i]||[],_[i].push(t)),"valuechanged"===e[a])&&(A.hasHandler=!0);return L},L.unbind=function(e,t,n,o){for(var r=(e=e.split(" ")).length;r--;)qe(t)&&(n||Xe(_["scewys"+e[r]]||[],t),o||Xe(_["scesrc"+e[r]]||[],t));return L},L.blur=function(e,t,n){return qe(e)?L.bind("blur",e,t,n):(L.sourceMode()?s:l).blur(),L},L.focus=function(e,t,n){if(qe(e))L.bind("focus",e,t,n);else if(L.inSourceMode())s.focus();else{if(Te(d,":focus").length)return;e=p.selectedRange();b||ce(!0),e&&1===e.endOffset&&e.collapsed&&(t=e.endContainer)&&1===t.childNodes.length&&Ne(t.firstChild,"br")&&(e.setStartBefore(t.firstChild),e.collapse(!0),p.selectRange(e)),o.focus(),l.focus()}return C(),L},L.keyDown=function(e,t,n){return L.bind("keydown",e,t,n)},L.keyPress=function(e,t,n){return L.bind("keypress",e,t,n)},L.keyUp=function(e,t,n){return L.bind("keyup",e,t,n)},L.nodeChanged=function(e){return L.bind("nodechanged",e,!1,!0)},L.selectionChanged=function(e){return L.bind("selectionchanged",e,!1,!0)},L.valueChanged=function(e,t,n){return L.bind("valuechanged",e,t,n)},L.css=function(e){return n||(n=xe("style",{id:"inline"},d),ke(d.head,n)),ge(e)?(n.styleSheet?n.styleSheet.cssText=e:n.innerHTML=e,L):n.styleSheet?n.styleSheet.cssText:n.innerHTML},J=function(e){var t=[],n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},o={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},r=e.which,i={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[r]||String.fromCharCode(r).toLowerCase();if((e.ctrlKey||e.metaKey)&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),o[r]?i=o[r]:n[i]&&(i=n[i])),i&&(r<16||18<r)&&t.push(i),t=t.join("+"),I[t]&&!1===I[t].call(L)&&(e.stopPropagation(),e.preventDefault()),"]"===e.key&&L.inSourceMode()){o=s,n=o.selectionStart,r=o.value.slice(0,n),i=o.value.slice(o.selectionEnd,o.value.length);let e;try{e=r.match(/\[([^\]]+)$/)[1].match(/^([a-z1-6]+)/)[1]}catch(e){}-1<["b","i","u","h","code","img","quote","left","center","right","list","color","size","albumimg","attach","youtube","vimeo","instagram","twitter","facebook","googlewidget","spoiler","userlink","googlemaps","hide","group-hide","hide-thanks","hide-reply-thanks","hide-reply","hide-posts","dailymotion","audio","media","note"].indexOf(e)&&(t=`[/${e}]`,o.value=r+t+i,o.selectionStart=o.selectionEnd=n,o.focus())}},L.addShortcut=function(e,t){return e=e.toLowerCase(),ge(t)?I[e]=function(){return U(me[t],L.commands[t]),!1}:I[e]=t,L},L.removeShortcut=function(e){return delete I[e.toLowerCase()],L},Z=function(e){var t,n,o;if(8===e.which&&(H=!0,!R.disableBlockRemove)&&(n=p.selectedRange())&&(t=n.startContainer,0===n.startOffset)&&(o=ue())&&!Ne(o,"body")){for(;t!==o;){for(;t.previousSibling;)if((t=t.previousSibling).nodeType!==ye||t.nodeValue)return;if(!(t=t.parentNode))return}L.clearBlockFormatting(o),e.preventDefault()}},ue=function(){for(var e=v;!lt(e)||Oe(e,!0);)if(!(e=e.parentNode)||Ne(e,"body"))return;return e},L.clearBlockFormatting=function(e){return(e=e||ue())&&!Ne(e,"body")&&(p.saveRange(),e.className="",Se(e,"style",""),Ne(e,"p,div,td")||st(e,"p"),p.restoreRange()),L},A=function(e){var t,n,o;h&&(h.hasHandler("valuechangedEvent")||A.hasHandler)&&(o=!(n=L.sourceMode())&&p.hasSelection(),e=(f=!1)!==e&&!d.getElementById("sceditor-start-marker"),m&&(clearTimeout(m),m=!1),o&&e&&p.saveRange(),(t=n?s.value:l.innerHTML)!==A.lastVal&&(A.lastVal=t,ot(y,"valuechanged",{rawValue:n?L.val():t})),o)&&e&&p.removeMarkers()},de=function(){m&&A()},D=function(e){var e=e.which,t=D.lastChar,n=13===t||32===t,t=8===t||46===t;D.lastChar=e,f||(13===e||32===e?n?D.triggerNext=!0:A():8===e||46===e?t?D.triggerNext=!0:A():D.triggerNext&&(A(),D.triggerNext=!1),clearTimeout(m),m=setTimeout(function(){f||A()},1500))},ne=function(e){(f=/start/i.test(e.type))||A()},fe=function(){L.updateOriginal()},e()}Fe.locale={},Fe.formats={},Fe.icons={},Fe.command={get:function(e){return Be[e]||null},set:function(e,t){return!(!e||!t)&&((t=Ke(Be[e]||{},t)).remove=function(){Fe.command.remove(e)},Be[e]=t,this)},remove:function(e){return Be[e]&&delete Be[e],this}},window.sceditor={command:Fe.command,commands:Be,defaultOptions:ht,ios:bt,isWysiwygSupported:yt,regexEscape:x,escapeEntities:He,escapeUriScheme:function(e){var t,n=window.location;return e&&/^[^\/]*:/i.test(e)&&!y.test(e)?((t=n.pathname.split("/")).pop(),n.protocol+"//"+n.host+t.join("/")+"/"+e):e},dom:{css:De,attr:Se,removeAttr:Ae,is:Ne,closest:Qe,width:nt,height:Re,traverse:m,rTraverse:it,parseHTML:at,hasStyling:lt,convertElement:st,blockLevelList:p,canHaveChildren:ct,isInline:Oe,copyCSS:function(e,t){t.style&&e.style&&(t.style.cssText=e.style.cssText+t.style.cssText)},fixNesting:ut,findCommonAncestor:function(e,t){for(;e=e.parentNode;)if((n=e)!==(o=t)&&n.contains&&n.contains(o))return e;var n,o},getSibling:g,removeWhiteSpace:dt,extractContents:v,getOffset:ft,getStyle:b,hasStyle:function(e,t,n){return!!(e=b(e,t))&&(!n||e===n||Array.isArray(n)&&-1<n.indexOf(e))}},locale:Fe.locale,icons:Fe.icons,utils:{each:ve,isEmptyObject:l,extend:Ke},plugins:gt.plugins,formats:Fe.formats,create:function(e,t){t=t||{},u(e,".sceditor-container")||(t.runWithoutWysiwygSupport||yt)&&new Fe(e,t)},instance:function(e){return e._sceditor}}})(),(e=>{var i,d=e.escapeEntities,o=e.escapeUriScheme,p=e.dom,t=e.utils,h=p.css,s=p.attr,g=p.is,n=t.extend,v=t.each,r=e.command.get,b={always:1,never:2,auto:3},a={bold:{txtExec:["[b]","[/b]"]},italic:{txtExec:["[i]","[/i]"]},underline:{txtExec:["[u]","[/u]"]},strike:{txtExec:["[s]","[/s]"]},mark:{txtExec:["[h]","[/h]"]},left:{txtExec:["[left]","[/left]"]},center:{txtExec:["[center]","[/center]"]},right:{txtExec:["[right]","[/right]"]},justify:{txtExec:["[justify]","[/justify]"]},font:{txtExec:function(e){var t=this;r("font")._dropDown(t,e,function(e){t.insertText(`[font=${e}]`,"[/font]")})}},size:{txtExec:function(e){var t=this;r("size")._dropDown(t,e,function(e){t.insertText(`[size=${e}]`,"[/size]")})}},color:{txtExec:function(e){var t=this;r("color")._dropDown(t,e,function(e){t.insertText(`[color=${e}]`,"[/color]")})}},bulletlist:{txtExec:function(e,t){this.insertText(`[list]
[list]${t.split(/\r?\n/).join("[/li]\n[li]")}[/li]
[/ul]`)}},orderedlist:{txtExec:function(e,t){this.insertText(`[list=I]
[li]${t.split(/\r?\n/).join("[/li]\n[li]")}[/li]
[/list]`)}},table:{txtExec:["[table][tr][td]","[/td][/tr][/table]"]},code:{txtExec:function(e){var t=this;r("code")._dropDown(t,e,function(e){t.insertText(`[code=${e}]`,"[/code]")})}},note:{txtExec:function(e){var t=this;r("note")._dropDown(t,e,function(e){t.insertText(`[note=${e}]`,"[/note]")})}},extensions:{txtExec:function(e){var t=this;r("extensions")._dropDown(t,e,function(e){t.insertText(`[${e}]`,`[/${e}]`)})}},image:{txtExec:function(e,n){var o=this;r("image")._dropDown(o,e,function(e,t){t||n?o.insertText(`[img=${e}]${t||n||e}[/img]`):o.insertText(`[img]${e}[/img]`)})}},email:{txtExec:function(e,n){var o=this;r("email")._dropDown(o,e,function(e,t){o.insertText(`[email=${e}]${t||n||e}[/email]`)})}},link:{txtExec:function(e,n){var o=this;r("link")._dropDown(o,e,function(e,t){n||t?o.insertText(`[url=${e}]${t||n||e}[/url]`):o.insertText(`[url]${e}[/url]`)})}},quote:{txtExec:["[quote]","[/quote]"]},userlink:{txtExec:["[userlink]","[/userlink]"]},albums:{txtExec:function(e){var t=this;r("albums")._dropDown(t,e,function(e){t.insertText(`[albumid]${e}[/albumid]`)})}},attachments:{txtExec:function(e){var t=this;r("attachments")._dropDown(t,e,function(e){t.insertText(`[attach]${e}[/attach]`)})}},media:{txtExec:function(e){var t=this;r("media")._dropDown(t,e,function(e){t.insertText(`[media]${e}[/media]`)})}},vimeo:{txtExec:function(e){var t=this;r("vimeo")._dropDown(t,e,function(e){t.insertText(`[vimeo]${e}[/vimeo]`)})}},instagram:{txtExec:function(e){var t=this;r("instagram")._dropDown(t,e,function(e){t.insertText(`[instagram]${e}[/instagram]`)})}},facebook:{txtExec:function(e){var t=this;r("facebook")._dropDown(t,e,function(e){t.insertText(`[facebook]${e}[/facebook]`)})}},youtube:{txtExec:function(e){var t=this;r("youtube")._dropDown(t,e,function(e){t.insertText(`[youtube]${e}[/youtube]`)})}}},y={b:{tags:{b:null,strong:null},styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{tags:{i:null,em:null},styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{tags:{u:null},styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{tags:{s:null,strike:null},styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},h:{tags:{h:null,mark:null},format:"[h]{0}[/h]",html:"<mark>{0}</mark>"},font:{tags:{font:{face:null}},styles:{"font-family":null},quoteType:b.never,format:function(e,t){var n;return`[font=${l(n=g(e,"font")&&(n=s(e,"face"))?n:h(e,"font-family"))}]${t}[/font]`},html:'<font face="{defaultattr}">{0}</font>'},size:{tags:{font:{size:null}},styles:{"font-size":null},format:function(e,t){var n=s(e,"size"),o=2;return-1<(n=n||h(e,"fontSize")).indexOf("px")?((n=+n.replace("px",""))<12&&(o=1),15<n&&(o=3),17<n&&(o=4),23<n&&(o=5),31<n&&(o=6),47<n&&(o=7)):o=n,`[size=${o}]${t}[/size]`},html:'<font size="{defaultattr}">{!0}</font>'},color:{tags:{font:{color:null}},styles:{color:null},quoteType:b.never,format:function(e,t){var n;return`[color=${f(n=g(e,"font")&&(n=s(e,"color"))?n:e.style.color||h(e,"color"))}]${t}[/color]`},html:function(e,t,n){return`<font color="${d(f(t.defaultattr),!0)}">${n}</font>`}},ul:{tags:{ul:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[list]{0}[/list]",html:"<ul>{0}</ul>"},list:{breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[list]{0}[/list]",html:"<ul>{0}</ul>"},ol:{tags:{ol:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[list=I]{0}[/list]",html:"<ol>{0}</ol>"},li:{tags:{li:null},isInline:!1,closedBy:["/ul","/ol","/list","*","li"],format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{isInline:!1,closedBy:["/ul","/ol","/list","*","li"],html:"<li>{0}</li>"},table:{tags:{table:null},isInline:!1,isHtmlInline:!0,skipLastLineBreak:!0,format:"[table]{0}[/table]",html:'<table class="table">{0}</table>'},tr:{tags:{tr:null},isInline:!1,skipLastLineBreak:!0,format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},th:{tags:{th:null},allowsEmpty:!0,isInline:!1,format:"[th]{0}[/th]",html:"<th>{0}</th>"},td:{tags:{td:null},allowsEmpty:!0,isInline:!1,format:"[td]{0}[/td]",html:'<td class="border">{0}</td>'},hr:{tags:{hr:null},allowsEmpty:!0,isSelfClosing:!0,isInline:!1,format:"[hr]{0}",html:"<hr />"},img:{allowsEmpty:!0,tags:{img:{src:null,class:"img-user-posted img-thumbnail"}},allowedChildren:["#"],quoteType:b.never,format:function(e){var t=s(e,"alt");return t?`[img=${s(e,"src")}]${t}[/img]`:`[img]${s(e,"src")}[/img]`},html:function(e,t,n){return t.defaultattr=d(t.defaultattr,!0)||n,`<img src="${o(t.defaultattr)}" alt="${n}" class="img-user-posted img-thumbnail" />`}},userlink:{allowsEmpty:!0,tags:{span:{class:"badge rounded-pill text-bg-secondary fs-6"}},format:function(e){return`[userlink]${s(e,"data-user")}[/userlink]`},html:function(e,t,n){return`<span class="badge rounded-pill text-bg-secondary fs-6" data-user="${d(n)}">${d(n)}</span>`}},albumimg:{allowsEmpty:!0,tags:{div:{src:null,class:"card text-bg-dark"}},allowedChildren:["#"],quoteType:b.never,format:function(e){return`[albumimg]${s(e,"alt")}[/albumimg]`},html:function(e,t,n){return t.defaultattr=d(t.defaultattr,!0)||n,`<div class="card text-bg-dark" style="max-width:200px" alt="${n}"><img src="${i.albumsPreviewUrl}${o(t.defaultattr)}" class="img-user-posted card-img-top" style="max-height:200px;max-width:200px;object-fit:contain""></div>`}},url:{allowsEmpty:!0,tags:{a:{href:null}},quoteType:b.never,format:function(e,t){e=s(e,"href");return"mailto:"===e.substr(0,7)?`[email="${e.substr(7)}"]${t}[/email]`:`[url=${e}]${t}[/url]`},html:function(e,t,n){return t.defaultattr=d(t.defaultattr,!0)||n,`<a href="${o(t.defaultattr)}" class="link">${n}</a>`}},email:{quoteType:b.never,html:function(e,t,n){return`<a href="mailto:${d(t.defaultattr,!0)||n}">${n}</a>`}},quote:{tags:{div:{class:"border rounded mx-3 mb-3 p-3 border-secondary shadow-sm"}},isInline:!1,quoteType:b.never,format:function(e,t){var n,o="",r=e.children;for(let e=0;!n&&e<r.length;e++)g(r[e],"cite")&&(n=r[e]);return n&&(o=n&&n.textContent,n&&e.removeChild(n),t=this.elementToBbcode(e),o="="+o.replace(/(^\s+|\s+$)/g,""),n)&&e.insertBefore(n,e.firstChild),`[quote${o}]${t}[/quote]`},html:function(e,t,n){return`<div class="border rounded mx-3 mb-3 p-3 border-secondary shadow-sm"><span contenteditable="false"><i class="fa fa-quote-left text-primary fs-4 me-2"></i></span>${n=t.defaultattr?n+'<cite class="card-text text-end d-block text-body-secondary small">'+d(t.defaultattr)+"</cite>":n}</div>`}},code:{tags:{code:{class:null}},isInline:!1,allowedChildren:["#","#newline"],format:function(e,t){var n;return`[code=${(n=g(e,"code")&&(n=s(e,"class"))?n:e.className.replace("lang-","")).replace("lang-","")}]${t}[/code]`},html:'<pre class="border border-danger rounded m-2 p-2"><code class="lang-{defaultattr}">{0}</code></pre>'},note:{tags:{div:{role:"alert"}},isInline:!1,allowedChildren:["#","#newline"],format:function(e,t){return`[note=${(s(e,"class")||e.className.replace("alert alert-","")).replace("alert alert-","")}]${t}[/note]`},html:'<div class="alert alert-{defaultattr}" role="alert">{0}</div>'},left:{styles:{"text-align":["left","-webkit-left","-moz-left","-khtml-left"]},isInline:!1,allowsEmpty:!0,format:"[left]{0}[/left]",html:'<div align="left">{0}</div>'},center:{styles:{"text-align":["center","-webkit-center","-moz-center","-khtml-center"]},isInline:!1,allowsEmpty:!0,format:"[center]{0}[/center]",html:'<div align="center">{0}</div>'},right:{styles:{"text-align":["right","-webkit-right","-moz-right","-khtml-right"]},isInline:!1,allowsEmpty:!0,format:"[right]{0}[/right]",html:'<div align="right">{0}</div>'},justify:{styles:{"text-align":["justify","-webkit-justify","-moz-justify","-khtml-justify"]},isInline:!1,allowsEmpty:!0,format:"[justify]{0}[/justify]",html:'<div align="justify">{0}</div>'},facebook:{allowsEmpty:!0,tags:{div:{"data-facebook-url":null}},format:function(e,t){return(e=s(e,"data-facebook-url"))?`[facebook]${e}[/facebook]`:t},html:function(e,t,n){return`<div class="ratio ratio-1x1" data-oembed-url="${n}" data-facebook-url="${n}"><iframe src="https://www.facebook.com/plugins/post.php?href=${n}"></iframe></div>`}},instagram:{allowsEmpty:!0,tags:{div:{"data-instagram-url":null}},format:function(e,t){return(e=s(e,"data-instagram-url"))?`[instagram]${e}[/instagram]`:t},html:function(e,t,n){var o;return`<div class="ratio ratio-1x1" data-oembed-url="https://www.instagram.com/p/${o=n.match(/\/(p|tv|reel)\/(.*?)\//)[2]}" data-instagram-url="${n}"><iframe src="https://www.instagram.com/p/${o}/embed/captioned/"></iframe></div>`}},vimeo:{allowsEmpty:!0,tags:{div:{"data-vimeo-url":null}},format:function(e,t){return(e=s(e,"data-vimeo-url"))?`[vimeo]${e}[/vimeo]`:t},html:function(e,t,n){var o=n.match(/vimeo\..*\/(\d+)(?:$|\/)/)[1];return`<div data-oembed-url="https://vimeo.com/${o}" data-vimeo-url="${n}" class="ratio ratio-16x9 border"><iframe src="https://player.vimeo.com/video/${o}?show_title=1&show_byline=1&show_portrait=1&fullscreen=1"></iframe></div>`}},youtube:{allowsEmpty:!0,tags:{div:{"data-youtube-url":null}},format:function(e,t){return(e=s(e,"data-youtube-url"))?`[youtube]${e}[/youtube]`:t},html:function(e,t,n){var o=n,n=n.match(/(?:v=|v\/|embed\/|youtu.be\/)?([a-zA-Z0-9_-]{11})/)[1];return`<div data-oembed-url="https://youtube.com/embed/${n}" data-youtube-url="${o}" class="ratio ratio-16x9 border"><iframe src="https://youtube.com/embed/${n}?hd=1"></iframe></div>`}},rtl:{styles:{direction:["rtl"]},isInline:!1,format:"[rtl]{0}[/rtl]",html:'<div style="direction: rtl">{0}</div>'},ltr:{styles:{direction:["ltr"]},isInline:!1,format:"[ltr]{0}[/ltr]",html:'<div style="direction: ltr">{0}</div>'},ignore:{}};function x(e,o){return e.replace(/\{([^}]+)\}/g,function(e,t){var n=!0;return"!"===t.charAt(0)&&(n=!1,t=t.substring(1)),"0"===t&&(n=!1),void 0===o[t]?e:n?d(o[t],!0):o[t]})}function w(e){return"function"==typeof e}function l(e){return e&&e.replace(/\\(.)/g,"$1").replace(/^(["'])(.*?)\1$/,"$2")}var k="open",T="content",E="newline",C="close";function c(e,t,n,o,r,i){var a=this;a.type=e,a.name=t,a.val=n,a.attrs=o||{},a.children=r||[],a.closing=i||null}function S(e){var p=this;function a(e,t){var n,o,r;return e===k&&(n=t.match(/\[([^\]\s=]+)(?:([^\]]+))?\]/))&&(r=i(n[1]),n[2])&&(n[2]=n[2].trim())&&(o=(e=>{var t,n=/([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g,o={};if("="===e.charAt(0)&&e.indexOf("=",1)<0)o.defaultattr=l(e.substr(1));else for("="===e.charAt(0)&&(e="defaultattr"+e);t=n.exec(e);)o[i(t[1])]=l(t[3])||t[4];return o})(n[2])),e===C&&(n=t.match(/\[\/([^\[\]]+)\]/))&&(r=i(n[1])),(r=e===E?"#newline":r)&&(e!==k&&e!==C||y[r])||(e=T,r="#"),new c(e,r,t,o)}function f(e,t,n){for(var o=n.length;o--;)if(n[o].type===t&&n[o].name===e)return 1}function m(e,t){e=(e?y[e.name]:{}).allowedChildren;return!p.opts.fixInvalidChildren||!e||-1<e.indexOf(t.name||"#")}function u(e,t){for(var n,o,r,i,a,l,s="",c=function(e){return!1!==(!e||(void 0!==e.isHtmlInline?e.isHtmlInline:e.isInline))};0<e.length;)if(n=e.shift()){if(n.type===k)l=n.children[n.children.length-1]||{},o=y[n.name],i=t&&c(o),r=u(n.children,!1),l=o&&o.html?(c(o)||!c(y[l.name])||o.isPreFormatted||o.skipLastLineBreak,w(o.html)?o.html.call(p,n,n.attrs,r):(n.attrs[0]=r,x(o.html,n.attrs))):n.val+r+(n.closing?n.closing.val:"");else{if(n.type===E){if(!t){s+="<br />";continue}a||(s+="<div>"),s+="<br />",e.length||(s+="<br />"),s+="</div>\n",a=!1;continue}i=t,l=d(n.val,!0)}i&&!a?(s+="<div>",a=!0):!i&&a&&(s+="</div>\n",a=!1),s+=l}return a&&(s+="</div>\n"),s}function h(e,t,n){var o=/\s|=/.test(e);return w(t)?t(e,n):t===b.never||t===b.auto&&!o?e:`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function g(e){return e.length?e[e.length-1]:null}function i(e){return e.toLowerCase()}p.opts=n({},S.defaults,e),p.tokenize=function(e){var t,n,o,r=[],i=[{type:T,regex:/^([^\[\r\n]+|\[)/},{type:E,regex:/^(\r\n|\r|\n)/},{type:k,regex:/^\[[^\[\]]+\]/},{type:C,regex:/^\[\/[^\[\]]+\]/}];e:for(;e.length;){for(o=i.length;o--;)if(n=i[o].type,(t=e.match(i[o].regex))&&t[0]){r.push(a(n,t[0])),e=e.substr(t[0].length);continue e}e.length&&r.push(a(T,e)),e=""}return r},p.parse=function(e,t){var e=(e=>{function t(){return g(d)}function n(e){(t()?t().children:u).push(e)}function o(e){return t()&&(i=y[t().name])&&i.closedBy&&-1<i.closedBy.indexOf(e)}for(var r,i,a,l,s,c=[],u=[],d=[];r=e.shift();)switch(s=e[0],m(t(),r)||r.type===C&&t()&&r.name===t().name||(r.name="#",r.type=T),r.type){case k:o(r.name)&&d.pop(),n(r),(i=y[r.name])&&!i.isSelfClosing&&(i.closedBy||f(r.name,C,e))?d.push(r):i&&i.isSelfClosing||(r.type=T);break;case C:if(t()&&r.name!==t().name&&o("/"+r.name)&&d.pop(),t()&&r.name===t().name)t().closing=r,d.pop();else if(f(r.name,k,d)){for(;a=d.pop();){if(a.name===r.name){a.closing=r;break}a=a.clone(),c.length&&a.children.push(g(c)),c.push(a)}for(s&&s.type===E&&(i=y[r.name])&&!1===i.isInline&&(n(s),e.shift()),n(g(c)),l=c.length;l--;)d.push(c[l]);c.length=0}else r.type=T,n(r);break;case E:t()&&s&&o((s.type===C?"/":"")+s.name)&&(s.type===C&&s.name===t().name||((i=y[t().name])&&i.breakAfter||i&&!1===i.isInline&&p.opts.breakAfterBlock&&!1!==i.breakAfter)&&d.pop()),n(r);break;default:n(r)}return u})(p.tokenize(e)),n=p.opts;return n.fixInvalidNesting&&function e(t,n,o,r){var i,a,l,s,c;let u=function(e){let t=y[e.name];return!t||!1!==t.isInline};n=n||[];r=r||t;for(a=0;a<t.length;a++)if((i=t[a])&&i.type===k){if(o&&!u(i)){if(l=g(n),c=l.splitAt(i),s=1<n.length?n[n.length-2].children:r,m(i,l)){let e=l.clone();e.children=i.children,i.children=[e]}if(-1<(l=s.indexOf(l))){c.children.splice(0,1),s.splice(l+1,0,i,c);let e=c.children[0];return void(e&&e.type===E&&!u(i)&&(c.children.splice(0,1),s.splice(l+2,0,e)))}}n.push(i),e(i.children,n,o||u(i),r),n.pop()}}(e),function e(t,n,o){var r,i,a,l,s,c,u,d;var f=t.length;n&&(l=y[n.name]);var m=f;for(;m--;)(r=t[m])&&(r.type===E?(i=0<m?t[m-1]:null,a=m<f-1?t[m+1]:null,d=!1,!o&&l&&!0!==l.isSelfClosing&&(i?c||a||(!1===l.isInline&&p.opts.breakEndBlock&&!1!==l.breakEnd&&(d=!0),l.breakEnd&&(d=!0),c=d):(!1===l.isInline&&p.opts.breakStartBlock&&!1!==l.breakStart&&(d=!0),l.breakStart&&(d=!0))),i&&i.type===k&&(s=y[i.name])&&(o?!1===s.isInline&&(d=!0):(!1===s.isInline&&p.opts.breakAfterBlock&&!1!==s.breakAfter&&(d=!0),s.breakAfter&&(d=!0))),!o&&!u&&a&&a.type===k&&(s=y[a.name])&&(!1===s.isInline&&p.opts.breakBeforeBlock&&!1!==s.breakBefore&&(d=!0),s.breakBefore&&(d=!0),u=d)?t.splice(m,1):(d&&t.splice(m,1),u=!1)):r.type===k&&e(r.children,r,o))}(e,null,t),n.removeEmptyTags&&function e(t){var n,o;let r=function(t){for(var n=t.length;n--;){let e=t[n].type;if(e===k||e===C)return!1;if(e===T&&/\S|\u00A0/.test(t[n].val))return!1}return!0};var i=t.length;for(;i--;)(n=t[i])&&n.type===k&&(o=y[n.name],e(n.children),r(n.children))&&o&&!o.isSelfClosing&&!o.allowsEmpty&&t.splice.apply(t,[i,1].concat(n.children))}(e),e},p.toHTML=function(e,t){return u(p.parse(e,t),!0)},p.toHTMLFragment=function(e,t){return u(p.parse(e,t),!1)},p.toBBCode=function(e,t){return function e(t){var n,o,r,i,a,l,s,c,u,d="";for(;0<t.length;)if(n=t.shift())if(r=y[n.name],u=!(!r||!1!==r.isInline),i=r&&r.isSelfClosing,l=u&&p.opts.breakBeforeBlock&&!1!==r.breakBefore||r&&r.breakBefore,s=u&&!i&&p.opts.breakStartBlock&&!1!==r.breakStart||r&&r.breakStart,c=u&&p.opts.breakEndBlock&&!1!==r.breakEnd||r&&r.breakEnd,u=u&&p.opts.breakAfterBlock&&!1!==r.breakAfter||r&&r.breakAfter,a=(r?r.quoteType:null)||p.opts.quoteType||b.auto,r||n.type!==k)if(n.type===k){if(l&&(d+="\n"),d+="["+n.name,n.attrs)for(o in n.attrs.defaultattr&&(d+="="+h(n.attrs.defaultattr,a,"defaultattr"),delete n.attrs.defaultattr),n.attrs)n.attrs.hasOwnProperty(o)&&(d+=` ${o}=`+h(n.attrs[o],a,o));d+="]",s&&(d+="\n"),n.children&&(d+=e(n.children)),i||r.excludeClosing||(c&&(d+="\n"),d+=`[/${n.name}]`),u&&(d+="\n"),n.closing&&i&&(d+=n.closing.val)}else d+=n.val;else d+=n.val,n.children&&(d+=e(n.children)),n.closing&&(d+=n.closing.val);return d}(p.parse(e,t))}}function u(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)).toString(16)).length<2?"0"+e:e}function f(e){var t;return(t=(e=e||"#000").match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i))?"#"+u(t[1])+u(t[2])+u(t[3]):(t=e.match(/#([0-9a-f])([0-9a-f])([0-9a-f])\s*?$/i))?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:e}function m(){var c=this,r=(c.stripQuotes=l,{}),f={ul:["li","ol","ul"],ol:["li","ol","ul"],table:["tr"],tr:["td","th"],code:["br","p","div"]};function m(i,a,t){function l(e){var t=e[0],e=e[1],n=p.getStyle(i,t),o=i.parentNode;return!(!n||o&&p.hasStyle(o,t,n))&&(!e||e.includes(n))}function e(e){r[e]&&r[e][t]&&v(r[e][t],function(e,t){var n,o=y[e].strictMatch,r=(o=void 0===o?c.opts.strictMatch:o)?"every":"some";if(!t||t[r]((n=o,function(e){var t=e[0],e=e[1];return("style"!==t||"CODE"!==i.nodeName)&&("style"===t&&e?e[n?"every":"some"](l):(t=s(i,t))&&(!e||e.includes(t)))})))return t=y[e].format,a=w(t)?t.call(c,i,a):function(e){var n=arguments;return e.replace(/\{(\d+)\}/g,function(e,t){return void 0!==n[+t+1]?n[+t+1]:`{${t}}`})}(t,a),!1})}return e("*"),e(i.nodeName.toLowerCase()),a}function u(e,t){function d(e,s,c){var u="";return p.traverse(e,function(e){var t="",n=e.nodeType,o=e.nodeName.toLowerCase(),r="code"===o,i=f[o],a=e.firstChild,l=!0;c&&!(l=-1<c.indexOf(o))&&(i=c),1===n?g(e,".sceditor-nlf")&&!a||("iframe"!==o&&(t=d(e,s||r,i)),l?(s||(r||(t=m(e,t,!1)),t=m(e,t,!0)),u+=((n,o)=>{var r,i,a=n.nodeName.toLowerCase(),l=p.isInline;if(!l(n,!0)||"br"===a){let e;let t=n.previousSibling;for(;t&&1===t.nodeType&&!g(t,"br")&&l(t,!0)&&!t.firstChild;)t=t.previousSibling;for(;i=(r=n.parentNode)&&r.lastChild,e=i===n,(n=r)&&e&&l(r,!0););e&&"li"!==a||(o+="\n"),"br"!==a&&t&&!g(t,"br")&&l(t,!0)&&(o=`
`+o)}return o})(e,t)):u+=t):3===n&&(u+=e.nodeValue)},!1,!0),u}return d(e,t)}function e(e,t,n){var o=new S(c.opts.parserOptions),e=e||n?o.toHTMLFragment:o.toHTML;return i=c.opts,e(c.opts.bbcodeTrim?t.trim():t)}function t(e,t,n,o){n=n||document;var r,i=!!p.closest(o,"code"),a=n.createElement("div"),l=n.createElement("div"),s=new S(c.opts.parserOptions);for(l.innerHTML=t,h(a,"visibility","hidden"),a.appendChild(l),n.body.appendChild(a),e&&(a.insertBefore(n.createTextNode("#"),a.firstChild),a.appendChild(n.createTextNode("#"))),o&&h(l,"whiteSpace",h(o,"whiteSpace")),r=l.getElementsByClassName("sceditor-ignore");r.length;)r[0].parentNode.removeChild(r[0]);return p.removeWhiteSpace(a),t=u(l,i),n.body.removeChild(a),t=s.toBBCode(t,!0),t=c.opts.bbcodeTrim?t.trim():t}c.init=function(){c.opts=this.opts,c.elementToBbcode=u,v(y,function(n,e){var o=!1===e.isInline,e=y[n].tags,t=y[n].styles;t&&(r["*"]=r["*"]||{},r["*"][o]=r["*"][o]||{},r["*"][o][n]=[["style",Object.entries(t)]]),e&&v(e,function(e,t){t&&t.style&&(t.style=Object.entries(t.style)),r[e]=r[e]||{},r[e][o]=r[e][o]||{},r[e][o][n]=t&&Object.entries(t)})}),this.commands=n(!0,{},a,this.commands),this.toBBCode=c.toSource,this.fromBBCode=c.toHtml},c.toHtml=e.bind(null,!1),c.fragmentToHtml=e.bind(null,!0),c.toSource=t.bind(null,!1),c.fragmentToSource=t.bind(null,!0)}c.prototype={clone:function(){var e=this;return new c(e.type,e.name,e.val,n({},e.attrs),[],e.closing?e.closing.clone():null)},splitAt:function(e){var t,n=this.clone(),e=this.children.indexOf(e);return-1<e&&(t=this.children.length-e,n.children=this.children.splice(e,t)),n}},S.QuoteType=b,S.defaults={breakBeforeBlock:!1,breakStartBlock:!1,breakEndBlock:!1,breakAfterBlock:!0,removeEmptyTags:!0,fixInvalidNesting:!0,fixInvalidChildren:!0,quoteType:b.auto,strictMatch:!1},m.get=function(e){return y[e]||null},m.set=function(e,t){return e&&t&&((t=n(y[e]||{},t)).remove=function(){delete y[e]},y[e]=t),this},m.rename=function(e,t){return e in y&&(y[t]=y[e],delete y[e]),this},m.remove=function(e){return e in y&&delete y[e],this},m.formatBBCodeString=x,e.formats.bbcode=m,e.BBCodeParser=S})(sceditor),(t=>{var r=t.dom,i={albums:'<i class="fa-solid fa-images"></i',attachments:'<i class="fa-solid fa-paperclip"></i',bold:'<i class="fa-solid fa-bold"></i>',bulletlist:'<i class="fa-solid fa-list-ul"></i>',center:'<i class="fa-solid fa-align-center"></i>',code:'<i class="fa-solid fa-code"></i>',color:'<span class="fa-stack me-2 pe-2"><i class="fas fa-font fa-stack-1x"></i><i class="fa fa-xs fa-palette sce-color fa-badge"></i></span>',copy:'<i class="fa-solid fa-copy"></i>',cut:'<i class="fa-solid fa-scissors"></i>',email:'<i class="fa-solid fa-envelope"></i>',emojis:'<i class="fa-solid fa-face-smile"></i>',extensions:'<i class="fa-solid fa-plug"></i>',font:'<span class="fa-stack me-2 pe-2"><i class="fas fa-font fa-stack-1x"></i><i class="fa fa-xs fa-font fa-badge"></i></span>',format:'<i class="fa-solid fa-font"></i>',grip:'<svg xmlns="http://www.w3.org/2000/svg"viewbox="0 0 16 16" unselectable="on"><path d="M14.656 5.156l-10 10 .688.688 10-10-.688-.688zm0 3l-7 7 .688.688 7-7-.688-.688zm0 3l-4 4 .688.688 4-4-.688-.688z"/></svg>',mark:'<i class="fa-solid fa-highlighter"></i>',horizontalrule:'<i class="fa-solid fa-grip-lines"></i>',image:'<i class="fa-solid fa-image"></i>',italic:'<i class="fa-solid fa-italic"></i>',justify:'<i class="fa-solid fa-align-justify"></i>',left:'<i class="fa-solid fa-align-left"></i>',link:'<i class="fa-solid fa-link"></i>',maximize:'<i class="fa-solid fa-maximize"></i>',media:'<i class="fa-solid fa-photo-film"></i>',note:'<i class="fa-solid fa-note-sticky"></i>',orderedlist:'<i class="fa-solid fa-list-ol"></i>',paste:'<i class="fa-solid fa-paste"></i>',pastetext:'<i class="fa-solid fa-paste"></i>',quote:'<i class="fa-solid fa-quote-left"></i>',redo:'<i class="fa-solid fa-redo"></i>',removeformat:'<i class="fa-solid fa-remove-format"></i>',reply:'<i class="fa-solid fa-reply"></i>',right:'<i class="fa-solid fa-align-right"></i>',size:'<span class="fa-stack me-2 pe-2"><i class="fas fa-font fa-stack-1x"></i><i class="fa fa-xs fa-up-down fa-badge"></i></span>',source:'<i class="fa-solid fa-file-code"></i>',strike:'<i class="fa-solid fa-strikethrough"></i>',table:'<i class="fa-solid fa-table"></i>',underline:'<i class="fa-solid fa-underline"></i>',undo:'<i class="fa-solid fa-undo"></i>',unlink:'<i class="fa-solid fa-link-slash"></i>',vimeo:'<i class="fa-brands fa-vimeo"></i>',instagram:'<i class="fa-brands fa-instagram"></i>',facebook:'<i class="fa-brands fa-facebook"></i>',youtube:'<i class="fa-brands fa-youtube"></i>'};t.icons.fontawesome=function(){var o,n={};return{create:function(e){return e in i&&(n[e]=t.dom.parseHTML(i[e]).firstChild,"color"===e)&&(o=n[e].querySelector(".sce-color")),n[e]},update:function(t,n){if(o){let e="inherit";!t&&n&&(e=n.ownerDocument.queryCommandValue("forecolor")),r.css(o,"color",e)}},rtl:function(e){var t=n.grip;t&&(r.css(t,"transform",e=e?"scaleX(-1)":""),r.css(t,"msTransform",e),r.css(t,"webkitTransform",e))}}},t.icons.fontawesome.icons=i})((document,sceditor)),(d=>{var f=void 0!==window.FileReader;d.plugins.dragdrop=function(){var t,o,r,i,a,l;function s(){a.style.display="none",i.className=i.className.replace(/(^| )dnd( |$)/g,"")}function c(){return 1}function u(e){var n=document.createElement("img");function t(e){var t=o.getBody().ownerDocument.getElementById(n.id);t&&("string"==typeof e&&t.insertAdjacentHTML("afterend",e),t.parentNode.removeChild(t))}return n.src="data:image/gif;base64,R0lGODlhlgBkAPABAH19ffb29iH5BAAKAAAAIf4aQ3JlYXRlZCB3aXRoIGFqYXhsb2FkLmluZm8AIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAlgBkAAAC1YyPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Py+f0uv2OvwD2fP6iD/gH6Pc2GIhg2JeQSNjGuLf4GMlYKIloefAIUEl52ZmJyaY5mUhqyFnqmQr6KRoaMKp66hbLumpQ69oK+5qrOyg4a6qYV2x8jJysvMzc7PwMHS09TV1tfY2drb3N3e39DR4uPk5ebn6Onq6+zt7u/g4fL99UAAAh+QQACgAAACwAAAAAlgBkAIEAAAB9fX329vYAAAAC3JSPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Py+f0uv2OvwD2fP4iABgY+CcoCNeHuJdQyLjIaOiWiOj4CEhZ+SbZd/nI2RipqYhQOThKGpAZCuBZyArZprpqSupaCqtaazmLCRqai7rb2av5W5wqSShcm8fc7PwMHS09TV1tfY2drb3N3e39DR4uPk5ebn6Onq6+zt7u/g4fLz9PX29/j5/vVAAAIfkEAAoAAAAsAAAAAJYAZACBAAAAfX199vb2AAAAAuCUj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aN5/rO9/4PDAqHxKLxiEwql8ym8wmNSqfUqvWKzWq33K73Cw6Lx+Sy+YxOq9fstvsNj8vn9Lr9jr8E9nz+AgAYGLjQVwhXiJgguAiYgGjo9tinyCjoKLn3hpmJUGmJsBmguUnpCXCJOZraaXoKShoJe9DqehCqKlnqiZobuzrbyvuIO8xqKpxIPKlwrPCbBx0tPU1dbX2Nna29zd3t/Q0eLj5OXm5+jp6uvs7e7v4OHy8/T19vf4+fr7/P379UAAAh+QQACgAAACwAAAAAlgBkAIEAAAB9fX329vYAAAAC4JSPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Py+f0uv2OvwT2fP6iD7gAMEhICAeImIAYiFDoOPi22KcouZfw6BhZGUBZeYlp6LbJiTD6CQqg6Vm6eQqqKtkZ24iaKtrKunpQa9tmmju7Wwu7KFtMi3oYDMzompkHHS09TV1tfY2drb3N3e39DR4uPk5ebn6Onq6+zt7u/g4fLz9PX29/j5+vv8/f31QAADs=",n.className="sceditor-ignore",n.id="sce-dragdrop-"+l++,function(){return e?e.parentNode.replaceChild(n,e):o.wysiwygEditorInsertHtml(n.outerHTML),{insert:function(e){t(e)},cancel:t}}}function e(e){var t=e.dataTransfer,n=t.files.length||!t.items?t.files:t.items;for(let e=0;e<n.length;e++)if("string"===n[e].kind)return;"none"===a.style.display&&(a.style.display="block",i.className+=" dnd"),e.preventDefault()}function n(e){var t=e.dataTransfer,n=t.files.length||!t.items?t.files:t.items;s();for(let e=0;e<n.length;e++){if("string"===n[e].kind)return;c(n[e]),r(n[e],u())}e.preventDefault()}f&&(l=0,this.signalReady=function(){t=(o=this).opts.dragdrop||{},(r=t.handleFile)&&(i=o.getContentAreaContainer().parentNode,a=i.appendChild(d.dom.parseHTML('<div class="sceditor-dnd-cover" style="display: none"></div>').firstChild),i.addEventListener("dragover",e),i.addEventListener("dragleave",s),i.addEventListener("dragend",s),i.addEventListener("drop",n),o.getBody().addEventListener("dragover",e),o.getBody().addEventListener("drop",s))},this.signalPasteHtml=function(e){!e||!t.handleFile||e.val||(s(),"handlePaste"in t&&!t.handlePaste)||r(e,u())})}})(sceditor),sceditor.plugins.undo=function(){var n,i,a,o,r=this,l="",s=0,c=!1,u=!1,d=!1,e=50,t=[],f=0;function m(e){if(u=!0,i.sourceMode(e.sourceMode),e.sourceMode)i.val(e.value,!1),i.sourceEditorCaret(e.caret);else if(i.getBody().innerHTML=e.value,e.caret){var t=i.getRangeHelper().selectedRange(),n=t,e=e.caret;try{var o=e.startPositions,r=e.endPositions;n.setStart(y(a,o),o[0]),n.setEnd(y(a,r),r[0])}catch(e){console&&console.warn&&console.warn("[SCEditor] Undo plugin lost caret",e)}i.getRangeHelper().selectRange(t)}i.focus(),u=!1}function p(e,t){var n=e[t];e[t]=function(){var e=c;!e&&!u&&o&&i.getRangeHelper().hasSelection()&&g(),c=!0,n.apply(this,arguments),e||(c=!1,u)||(h(),l="")}}function h(){f&&(t.length-=f,f=0),0<e&&e<t.length&&t.shift(),o={},g(),t.push(o)}function g(){var e=i.sourceMode(),e=(o.caret=e?i.sourceEditorCaret():(e=>{if(e)return a.normalize(),{startPositions:b(e.startContainer,e.startOffset),endPositions:b(e.endContainer,e.endOffset)}})(i.getRangeHelper().selectedRange()),(o.sourceMode=e)?i.getSourceEditorValue(!1):i.getBody().innerHTML),t=document.getElementById("editor-Counter"),n=i.opts.maxLength;i.val().length>n?r.undo():t.textContent=n-i.val().length,o.value=e}function v(){n===document.activeElement&&r.signalSelectionchangedEvent()}function b(e,t){for(var n=[t],o=e;o&&"BODY"!==o.tagName;)n.push((e=>{for(var t=0;e=e.previousSibling;)t++;return t})(o)),o=o.parentNode;return n}function y(t,n){for(let e=n.length-1;t&&0<e;e--)t=t.childNodes[n[e]];return t}r.init=function(){e=(i=this).undoLimit||e,i.addShortcut("ctrl+z",r.undo),i.addShortcut("ctrl+shift+z",r.redo),i.addShortcut("ctrl+y",r.redo)},r.signalReady=function(){function e(e){"historyUndo"===e.inputType?(r.undo(),e.preventDefault()):"historyRedo"===e.inputType&&(r.redo(),e.preventDefault())}function t(){l="",h()}n=i.getContentAreaContainer().nextSibling,a=i.getBody(),h(),p(i,"setWysiwygEditorValue"),p(i,"setSourceEditorValue"),p(i,"sourceEditorInsertText"),p(i.getRangeHelper(),"insertNode"),p(i,"toggleSourceMode"),a.addEventListener("beforeinput",e),n.addEventListener("beforeinput",e),a.addEventListener("compositionend",t),n.addEventListener("compositionend",t),document.addEventListener("selectionchange",v)},r.destroy=function(){document.removeEventListener("selectionchange",v)},r.undo=function(){return o=null,f<t.length-1&&(f++,m(t[t.length-1-f])),!1},r.redo=function(){return 0<f&&(f--,m(t[t.length-1-f])),!1},r.signalSelectionchangedEvent=function(){u||d?d=!1:(o&&g(),l="")},r.signalInputEvent=function(e){var t=e.inputType;if(d=!0,t&&!e.isComposing)switch(e.inputType){case"deleteContentBackward":o&&l===t&&s<20?g():(h(),s=0),l=t;break;case"insertText":s+=e.data?e.data.length:1,o&&l===t&&s<20&&!/\s$/.test(e.data)?g():(h(),s=0),l=t;break;default:l="sce-misc",s=0,h()}}},(e=>{var o=e.utils,r=e.dom;e.plugins.plaintext=function(){var n=!0;this.init=function(){var e=this.commands,t=this.opts;t&&t.plaintext&&t.plaintext.addButton&&(n=t.plaintext.enabled,e.pastetext=o.extend(e.pastetext||{},{state:function(){return n?1:0},exec:function(){n=!n}}))},this.signalPasteRaw=function(e){var t;n&&(e.html&&!e.text&&((t=document.createElement("div")).innerHTML=e.html,o.each(t.querySelectorAll("p"),function(e,t){r.convertElement(t,"div")}),o.each(t.querySelectorAll("br"),function(e,t){t.nextSibling&&r.isInline(t.nextSibling,!0)||t.parentNode.removeChild(t)}),document.body.appendChild(t),e.text=t.innerText,document.body.removeChild(t)),e.html=null)}}})(sceditor),!function(sceditor){sceditor.plugins.mentions=function(){var editor;function initMentions(){mentions({element:editor,lookup:"user",url:editor.opts.mentionsUrl,onclick:function(e){editor.insert(`[userlink]${e.name}[/userlink]`)}})}function mentions(opts={}){opts=Object.assign({},{lookup:"lookup",id:"",selector:"",element:null,symbol:"@",items:[],item_template:'<a class="dropdown-item" href="#" style="font-family: var(--bs-body-font-family);"><img src="${item.avatar}" alt="avatar" class="me-2 img-thumbnail" style="max-width:20px;max-height:20px" /> ${item.name}</a>',onclick:void 0,url:""},opts);let $e=opts.element.inSourceMode()?opts.element.getSourceEditor():opts.element.getContentAreaContainer().contentWindow.document.body;if(!$e)return console.error("Invalid element selector",opts);for(var $lookup=document.createElement("div"),start,end,prevWord,isFixed=($lookup.classList="fixed-top autohide "+opts.lookup,$e.parentNode.insertBefore($lookup,$e.nextSibling),$e.addEventListener("keydown",processKey),$e.addEventListener("keyup",showLookup),$e.addEventListener("click",hideLookup),!1),$el=$lookup.parentNode;$el&&"body"!==$el.nodeName.toLowerCase()&&!isFixed;)isFixed="fixed"===window.getComputedStyle($el).getPropertyValue("position").toLowerCase(),$el=$el.parentElement;function showLookup(event){if("Escape"===event.code)return hideLookup();var sel,text,curr,sel,$parent,text,curr,getLength=(curr=(text=opts.element.inSourceMode()?(sel=document.getSelection(),$parent=opts.element.getSourceEditor(),$parent.value||""):(sel=opts.element.getContentAreaContainer().contentWindow.document.getSelection(),opts.element.val()||""),sel.baseOffset),e=>e instanceof Array&&0<e.length?e[0].length:0),word=(start=curr-getLength(text.slice(0,curr).match(/[\S]+$/g)),end=curr+getLength(text.slice(curr).match(/^[\S]+/g)),text.substring(start,end));if(!word||word[0]!==opts.symbol)return prevWord="",hideLookup();if(word!==prevWord){prevWord=word;var pos={x:0,y:0},parentRect=(opts.element.inSourceMode()?opts.element.getSourceEditor():opts.element.getContentAreaContainer().contentWindow.document.body).getBoundingClientRect(),query=(pos.y=parentRect.top+30,pos.x=parentRect.left+20,$lookup.style.left=pos.x+"px",$lookup.style.top=pos.y+"px",word.slice(1)),token="",tokenInput=document.querySelector('input[name="__RequestVerificationToken"]'),items=(null!=tokenInput&&(token=tokenInput.value),3<=query.length&&fetch(opts.url.replace("{q}",query),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json;charset=utf-8",RequestVerificationToken:token}}).then(e=>e.json()).then(e=>opts.items=e),opts.items.filter(e=>e.name.toLowerCase().includes(word.slice(1).toLowerCase())).map(item=>eval('`<li class="mention-li-nt ${opts.lookup}" data-name = "${item.name}" data-id = "${item.id}">'+opts.item_template+"</li>`")));if(!items.length)return hideLookup();$lookup.innerHTML=`<ul class="dropdown-menu dropdown-mentions show">${items.join("")}</ul>`,[...$lookup.firstElementChild.children].forEach(e=>e.addEventListener("click",onClick)||e.addEventListener("mouseenter",onHover)),$lookup.firstElementChild.children[0].classList.add("active"),$lookup.hasAttribute("hidden")&&$lookup.removeAttribute("hidden");var bounding=$lookup.getBoundingClientRect();0<=bounding.top&&0<=bounding.left&&bounding.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&bounding.right<=(window.innerWidth||document.documentElement.clientWidth)||($lookup.style.top=parseInt($lookup.style.top)-10-$lookup.clientHeight+"px")}}function hideLookup(){$lookup.hasAttribute("hidden")||$lookup.setAttribute("hidden",!0)}function onClick(e){e=e.target.classList.contains("mention-li-nt")?e.target:e.target.parentElement,opts.onclick(e.dataset),e=opts.element.val();opts.element.val(e.replace(e.substring(start+1,end),"")),hideLookup()}function onHover(e){e=e.target.closest(".mention-li-nt");e.classList.contains("active")||([...$lookup.firstElementChild.children].filter(e=>e.classList.contains("active")).forEach(e=>e.classList.remove("active")),e.classList.add("active"))}function processKey(e){var t=e.key;if(-1!=["ArrowUp","ArrowDown","Enter"].indexOf(t)&&!$lookup.hasAttribute("hidden")){if(e.preventDefault(),"Enter"==t)return $lookup.querySelector(".active").click();var e=[...$lookup.firstElementChild.children],n=e.findIndex(e=>e.classList.contains("active")),n=(e[n].classList.remove("active"),e[(e.length+n+("ArrowUp"==t?-1:1))%e.length]);n.classList.add("active"),n.scrollIntoView(!1)}}}this.init=function(){(editor=this).opts.onToggleMode=initMentions},this.signalReady=function(){initMentions()}}}(sceditor);
//# sourceMappingURL=sceditor.min.js.map