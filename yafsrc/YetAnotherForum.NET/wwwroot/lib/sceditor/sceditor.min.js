/* SCEditor for YAF.NET v4.0.0-rc.3 | (C) 2024, Sam Clarke | sceditor.com/license */
!function(){function i(e,t){return typeof t===e}var pe=i.bind(null,"string"),Pe=i.bind(null,"undefined"),Ue=i.bind(null,"function"),a=i.bind(null,"number");function l(e){return!Object.keys(e).length}function We(e,t){var n=e===!!e,o=n?2:1,r=n?t:e,i=n&&e;function a(e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}for(;o<arguments.length;o++){var l,s=arguments[o];for(l in s){var c,u,d=r[l],f=s[l];Pe(f)||"__proto__"!==l&&"constructor"!==l&&(u=a(f),c=Array.isArray(f),i&&(u||c)?(u=a(d)===u&&Array.isArray(d)===c,r[l]=We(!0,u?d:c?[]:{},f)):r[l]=f)}}return r}function Ve(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function he(t,n){if(Array.isArray(t)||"length"in t&&a(t.length))for(let e=0;e<t.length;e++)n(e,t[e]);else Object.keys(t).forEach(function(e){n(e,t[e])})}var s={},ge=1,ve=3,c=8;function r(e){return e=parseFloat(e),isFinite(e)?e:0}function be(e,t,n){var o=(n||document).createElement(e);return he(t||{},function(e,t){"style"===e?o.style.cssText=t:e in o?o[e]=t:o.setAttribute(e,t)}),o}function u(e,t){for(var n=e||{};(n=n.parentNode)&&!/(9|11)/.test(n.nodeType);)if(!t||Ne(n,t))return n}function ye(e,t){return Ne(e,t)?e:u(e,t)}function we(e){e.parentNode&&e.parentNode.removeChild(e)}function xe(e,t){e.appendChild(t)}function Te(e,t){return e.querySelectorAll(t)}function ke(n,e,o,r,i){e.split(" ").forEach(function(e){var t;pe(o)?(t=r["_sce-event-"+e+o]||function(e){for(var t=e.target;t&&t!==n;){if(Ne(t,o))return void r.call(t,e);t=t.parentNode}},r["_sce-event-"+e+o]=t):(t=o,i=r),n.addEventListener(e,t,i||!1)})}function Ce(n,e,o,r,i){e.split(" ").forEach(function(e){var t;pe(o)?t=r["_sce-event-"+e+o]:(t=o,i=r),n.removeEventListener(e,t,i||!1)})}function Se(e,t,n){if(arguments.length<3)return e.getAttribute(t);null==n?Ee(e,t):e.setAttribute(t,n)}function Ee(e,t){e.removeAttribute(t)}function Ke(e){De(e,"display","none")}function Xe(e){De(e,"display","")}function Qe(e){(nt(e)?Ke:Xe)(e)}function De(n,e,t){if(arguments.length<3){if(pe(e))return 1===n.nodeType?getComputedStyle(n)[e]:null;he(e,function(e,t){De(n,e,t)})}else{var o=(t||0===t)&&!isNaN(t);n.style[e]=o?t+"px":t}}function d(e,t,n){var o=arguments.length,r={};if(e.nodeType===ge)return 1===o?(he(e.attributes,function(e,t){/^data\-/i.test(t.name)&&(r[t.name.substr(5)]=t.value)}),r):2===o?Se(e,"data-"+t):void Se(e,"data-"+t,String(n))}function Ne(e,t){return!(!e||e.nodeType!==ge)&&(e.matches||e.msMatchesSelector||e.webkitMatchesSelector).call(e,t)}function Ae(e,t){t.parentNode.insertBefore(e,t)}function f(e){return e.className.trim().split(/\s+/)}function Ze(e,t){return Ne(e,"."+t)}function Me(e,t){var n=f(e);n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function Je(e,t){var n=f(e);Ve(n,t),e.className=n.join(" ")}function _e(e,t,n){((n=Pe(n)?!Ze(e,t):n)?Me:Je)(e,t)}function et(e,t){var n,o;if(Pe(t))return n=r((o=getComputedStyle(e)).paddingLeft)+r(o.paddingRight),o=r(o.borderLeftWidth)+r(o.borderRightWidth),e.offsetWidth-n-o;De(e,"width",t)}function Re(e,t){var n,o;if(Pe(t))return n=r((o=getComputedStyle(e)).paddingTop)+r(o.paddingBottom),o=r(o.borderTopWidth)+r(o.borderBottomWidth),e.offsetHeight-n-o;De(e,"height",t)}function tt(e,t,n){var o;Ue(window.CustomEvent)?o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(o=e.ownerDocument.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(o)}function nt(e){return e.getClientRects().length}function m(e,t,n,o,r){for(e=r?e.lastChild:e.firstChild;e;){var i=r?e.previousSibling:e.nextSibling;if(!n&&!1===t(e)||!o&&!1===m(e,t,n,o,r)||n&&!1===t(e))return!1;e=i}}function ot(e,t,n,o){m(e,t,n,o,!0)}function rt(e,t){var n=(t=t||document).createDocumentFragment(),o=be("div",{},t);for(o.innerHTML=e;o.firstChild;)xe(n,o.firstChild);return n}function it(e){return e&&(!Ne(e,"p,div")||e.className||Se(e,"style")||!l(d(e)))}function at(e,t){var n=be(t,{},e.ownerDocument);for(he(e.attributes,function(e,t){try{Se(n,t.name,t.value)}catch(e){}});e.firstChild;)xe(n,e.firstChild);return e.parentNode.replaceChild(n,e),n}var p="|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|details|section|article|aside|nav|main|header|hgroup|footer|fieldset|dl|dt|dd|figure|figcaption|";function lt(e){return!!/11?|9/.test(e.nodeType)&&"|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf(`|${e.nodeName.toLowerCase()}|`)<0}function Le(e,t){var n=(e||{}).nodeType||ve;return n!==ge?n===ve:"code"===(n=e.tagName.toLowerCase())?!t:p.indexOf(`|${n}|`)<0}function h(e){return e.lastChild&&h(e.lastChild)&&we(e.lastChild),3===e.nodeType?!e.nodeValue:lt(e)&&!e.childNodes.length}function st(e){m(e,function(t){var n=!Le(t,!0)&&t.nodeType!==c,o=t.parentNode;if(n&&(Le(o,!0)||"P"===o.tagName)){let e=t;for(;Le(e.parentNode,!0)||"P"===e.parentNode.tagName;)e=e.parentNode;for(var r=v(e,t),i=t;o&&Le(o,!0);){if(o.nodeType===ge){for(var a=o.cloneNode();i.firstChild;)xe(a,i.firstChild);xe(i,a)}o=o.parentNode}Ae(i,e),h(r)||Ae(r,i),h(e)&&we(e)}if(n&&Ne(t,"ul,ol")&&Ne(t.parentNode,"ul,ol")){r="li";let e=(n=t.previousElementSibling)&&!Ne(n,r)?null:n;e||Ae(e=be("li"),t),xe(e,t)}})}function g(e,t){return e?(t?e.previousSibling:e.nextSibling)||g(e.parentNode,t):null}function ct(e){var t,n,o,r,i,a,l=De(e,"whiteSpace"),s=/line$/i.test(l),c=e.firstChild;if(!/pre(\-wrap)?$/i.test(l))for(;c;){if(i=c.nextSibling,t=c.nodeValue,(n=c.nodeType)===ge&&c.firstChild&&ct(c),n===ve){for(n=g(c),o=g(c,!0),a=!1;Ze(o,"sceditor-ignore");)o=g(o,!0);if(Le(c)&&o){for(r=o;r.lastChild;)for(r=r.lastChild;Ze(r,"sceditor-ignore");)r=g(r,!0);a=r.nodeType===ve?/[\t\n\r ]$/.test(r.nodeValue):!Le(r)}t=t.replace(/\u200B/g,""),o&&Le(o)&&!a||(t=t.replace(s?/^[\t ]+/:/^[\t\n\r ]+/,"")),(t=n&&Le(n)?t:t.replace(s?/[\t ]+$/:/[\t\n\r ]+$/,"")).length?c.nodeValue=t.replace(s?/[\t ]+/g:/[\t\n\r ]+/g," "):we(c)}c=i}}function v(e,t){var n=e.ownerDocument.createRange();return n.setStartBefore(e),n.setEndAfter(t),n.extractContents()}function ut(e){for(var t=0,n=0;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}function b(e,t){var n=e.style;return s[t]||(s[t]=t.replace(/^-ms-/,"ms-").replace(/-(\w)/g,function(e,t){return t.toUpperCase()})),n=n[t=s[t]],"textAlign"===t&&(n=n||De(e,t),De(e.parentNode,t)===n||"block"!==De(e,"display")||Ne(e,"hr,th"))?"":n}function dt(e,t){var n=e.attributes.length;if(n===t.attributes.length){for(;n--;){var o=e.attributes[n];if("style"===o.name?!function(e,t){var n=e.style.length;if(n===t.style.length){for(;n--;){var o=e.style[n];if(e.style[o]!==t.style[o])return}return 1}}(e,t):o.value!==Se(t,o.name))return}return 1}}function ft(e){for(;e.firstChild;)Ae(e.firstChild,e);we(e)}var mt={toolbar:"bold,italic,underline,strike|font,size,color|mark|email,link,unlink,quote,code|image|bulletlist,orderedlist|left,center,right|indent,outdent|cut,copy,pastetext,removeformat|undo,redo|youtube,vimeo,instagram,facebook,media,extensions|source|reply",toolbarExclude:null,maxLength:null,styles:[],themeMode:Se(document.documentElement,"data-bs-theme")||"light",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",format:"bbcode",icons:"fontawesome",codeLanguages:[{Value:"markup",Text:"Plain Text"},{Value:"bash",Text:"Bash(shell)"},{Value:"c",Text:"C"},{Value:"cpp",Text:"C++"},{Value:"csharp",Text:"C#"},{Value:"css",Text:"CSS"},{Value:"scss",Text:"SCSS"},{Value:"git",Text:"Git"},{Value:"markup",Text:"HTML"},{Value:"java",Text:"Java"},{Value:"javascript",Text:"JavaScript"},{Value:"json",Text:"JSON"},{Value:"python",Text:"Python"},{Value:"sql",Text:"SQL"},{Value:"markup",Text:"XML"},{Value:"vb",Text:"Visual Basic"}],colors:"#000000,#44B8FF,#1E92F7,#0074D9,#005DC2,#00369B,#b3d5f4|#444444,#C3FFFF,#9DF9FF,#7FDBFF,#68C4E8,#419DC1,#d9f4ff|#666666,#72FF84,#4CEA5E,#2ECC40,#17B529,#008E02,#c0f0c6|#888888,#FFFF44,#FFFA1E,#FFDC00,#E8C500,#C19E00,#fff5b3|#aaaaaa,#FFC95F,#FFA339,#FF851B,#E86E04,#C14700,#ffdbbb|#cccccc,#FF857A,#FF5F54,#FF4136,#E82A1F,#C10300,#ffc6c3|#eeeeee,#FF56FF,#FF30DC,#F012BE,#D900A7,#B20080,#fbb8ec|#ffffff,#F551FF,#CF2BE7,#B10DC9,#9A00B2,#9A00B2,#e8b6ef",locale:Se(document.documentElement,"lang")||"en",charset:"utf-8",width:"100%",height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,startInSourceMode:!1,id:null,plugins:"undo,dragdrop",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!0,allowedIframeUrls:[],parserOptions:{},dropDownCss:{},allowedTags:[],allowedAttributes:["contenteditable"],extensionsUrl:"",root:"",attachmentsPreviewUrl:"",albumsPreviewUrl:"",onToggleMode:void 0},y=/^(https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(\/\/)|data:image\/(png|bmp|gif|p?jpe?g);/i;function w(e){return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function Oe(e,t){var n;return e&&(!(n={"&":"&amp;","<":"&lt;",">":"&gt;","  ":"&nbsp; ","\r\n":"<br />","\r":"<br />","\n":"<br />"})!==t&&(n['"']="&#34;",n["'"]="&#39;",n["`"]="&#96;"),e=e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(e){return n[e]||e})),e}var x={html:'<!DOCTYPE html><html data-bs-theme="{themeMode}"><head><meta http-equiv="Content-Type" content="text/html;charset={charset}" />{styles}</head><body style="min-height:265px" contenteditable="true" {spellcheck}><p></p></body></html>',style:'<link rel="stylesheet" type="text/css" href="{style}" />',toolbarButton:'<a class="btn sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><span unselectable="on">  </span></a>',codeOpt:'<a class="sceditor-font-option dropdown-item" href="#" data-language="{language}">{languageName}</a>',extensionOpt:'<a class="sceditor-extension-option dropdown-item" href="#" data-language="{extension}">{extension}</a>',fontOpt:'<a class="sceditor-font-option dropdown-item" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option dropdown-item" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',albums:'<form class="m-3"><div class="AlbumsListMenu"><div id="AlbumsListBox" class="content"><div id="AlbumsListPager"></div><div id="PostAlbumsLoader" class="text-center"><div class="fa-3x"><i class="fas fa-spinner fa-pulse"></i></div></div><div id="AlbumsListBox" class="content"><div id="PostAlbumsListPlaceholder" data-url="{root}" style="clear: both; "><ul class="AlbumsList list-group"></ul></div></div></form>',attachments:'<form class="m-3"><div class="AttachmentListMenu"><div id="AttachmentsListBox" class="content"><div id="AttachmentsListPager"></div><div id="PostAttachmentLoader" class="text-center"><div class="fa-3x"><i class="fas fa-spinner fa-pulse"></i></div></div><div id="AttachmentsListBox" class="content"><div id="PostAttachmentListPlaceholder" data-url="{root}" style="clear: both; "><ul class="AttachmentList list-group"></ul></div><div class="OpenUploadDialog mt-1 d-grid gap-2"><button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#UploadDialog">Upload</button></div></div></form>',pastetext:'<form class="m-3"><div class="mb-3"><label for="txt" class="form-label">{label}</label> <textarea cols="20" rows="7" id="txt" class="form-control"></textarea></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></div></form>',table:'<form class="m-3"><div class="mb-3"><label for="rows" class="form-label">{rows}</label><input type="text" id="rows" value="2" class="form-control" /></div><div class="mb-3"><label for="cols" class="form-label">{cols}</label><input type="text" id="cols" value="2" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',image:'<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><div class="mb-3"><label for="des" class="form-label">{desc}</label> <input type="text" id="des" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',email:'<form class="m-3"><div class="mb-3"><label for="email" class="form-label">{label}</label> <input type="text" id="email" dir="ltr" class="form-control" /></div><div class="mb-3"><label for="des" class="form-label">{desc}</label> <input type="text" id="des" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',link:'<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><div class="mb-3"><label for="des" class="form-label">{desc}</label> <input type="text" id="des" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{ins}" /></form>',mediaMenu:'<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="url" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',youtubeMenu:'<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',instagramMenu:'<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',facebookMenu:'<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',facebook:'<div class="ratio ratio-1x1 border" data-oembed-url="{url}" data-facebook-url="{url}"><iframe src="https://www.facebook.com/plugins/post.php?href={url}"></iframe></div>',instagram:'<div class="ratio ratio-1x1 border" data-oembed-url="https://www.instagram.com/p/{id}" data-instagram-url="{url}"><iframe src="https://www.instagram.com/p/{id}/embed/captioned/"></iframe></div>',youtube:'<div data-oembed-url="https://youtube.com/embed/{id}" data-youtube-url="{url}" class="ratio ratio-16x9 border"><iframe src="https://youtube.com/embed/{id}?hd=1"></iframe></div>',vimeo:'<div data-oembed-url="https://vimeo.com/{vimeoId}" data-vimeo-url="{url}" class="ratio ratio-16x9 border"><iframe src="https://player.vimeo.com/video/{vimeoId}?show_title=1&show_byline=1&show_portrait=1&fullscreen=1"></iframe></div>'};function Ie(e,t,n){var o=x[e];return Object.keys(t).forEach(function(e){o=o.replace(new RegExp(w(`{${e}}`),"g"),t[e])}),o=n?rt(o):o}function T(n){if("mozHidden"in document){let e=n.getBody(),t;for(;e;){if((t=e).firstChild)t=t.firstChild;else{for(;t&&!t.nextSibling;)t=t.parentNode;t=t&&t.nextSibling}3===e.nodeType&&/[\n\r\t]+/.test(e.nodeValue)&&!/^pre/.test(De(e.parentNode,"whiteSpace"))&&we(e),e=t}}}var Fe={albums:{exec:function(e){var t=be("div");xe(t,Ie("albums",{root:this.opts.root},!0)),this.createDropDown(e,"albums",t),getAlbumImagesData(5,0,!1)},tooltip:"User Albums"},attachments:{exec:function(e){var t=be("div");xe(t,Ie("attachments",{root:this.opts.root},!0)),this.createDropDown(e,"attachments",t),getPaginationData(5,0,!1)},tooltip:"User Attachments"},bold:{exec:"bold",tooltip:"Bold",shortcut:"Ctrl+B"},italic:{exec:"italic",tooltip:"Italic",shortcut:"Ctrl+I"},underline:{exec:"underline",tooltip:"Underline",shortcut:"Ctrl+U"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},mark:{exec:function(){this.wysiwygEditorInsertHtml("<mark>","</mark>")},tooltip:"Highlight",shortcut:"Ctrl+H"},left:{state:function(e){var t;if(e=e&&3===e.nodeType?e.parentNode:e)return t="ltr"===De(e,"direction"),e=De(e,"textAlign"),/left/.test(e)||e===(t?"start":"end")},exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{state:function(e){var t;if(e=e&&3===e.nodeType?e.parentNode:e)return t="ltr"===De(e,"direction"),e=De(e,"textAlign"),/right/.test(e)||e===(t?"end":"start")},exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(t,e,n){var o=be("div");ke(o,"click","a",function(e){n(d(this,"font")),t.closeDropDown(!0),e.preventDefault()}),t.opts.fonts.split(",").forEach(function(e){xe(o,Ie("fontOpt",{font:e},!0))}),t.createDropDown(e,"font-picker",o)},exec:function(e){var t=this;Fe.font._dropDown(t,e,function(e){t.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(t,e,n){var o=be("div");ke(o,"click","a",function(e){n(d(this,"size")),t.closeDropDown(!0),e.preventDefault()});for(let e=1;e<=7;e++)xe(o,Ie("sizeOpt",{size:e},!0));t.createDropDown(e,"fontsize-picker",o)},exec:function(e){var t=this;Fe.size._dropDown(t,e,function(e){t.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(t,e,n){var o=be("div"),r="",i=Fe.color;i._htmlCache||(t.opts.colors.split("|").forEach(function(e){r+='<div class="sceditor-color-column">',e.split(",").forEach(function(e){r+=`<a href="#" class="sceditor-color-option" style="background-color: ${e}" data-color="${e}"></a>`}),r+="</div>"}),i._htmlCache=r),xe(o,rt(i._htmlCache)),ke(o,"click","a",function(e){n(d(this,"color")),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"color-picker",o)},exec:function(e){var t=this;Fe.color._dropDown(t,e,function(e){t.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=be("div"),o=this;xe(n,Ie("pastetext",{label:o._("Paste your text inside the following box:"),insert:o._("Insert")},!0)),ke(n,"click",".button",function(e){(t=Te(n,"#txt")[0].value)&&o.wysiwygEditorInsertText(t),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"pastetext",n)},tooltip:"Paste Text"},bulletlist:{exec:function(){T(this),this.execCommand("insertunorderedlist")},tooltip:"Bullet list"},orderedlist:{exec:function(){T(this),this.execCommand("insertorderedlist")},tooltip:"Numbered list"},indent:{state:function(e,t){var n;return Ne(t,"li")||Ne(t,"ul,ol,menu")&&(n=(t=this.getRangeHelper().selectedRange()).startContainer.parentNode,t=t.endContainer.parentNode,n!==n.parentNode.firstElementChild||Ne(t,"li")&&t!==t.parentNode.lastElementChild)?0:-1},exec:function(){var e=this.getRangeHelper().getFirstBlockParent();this.focus(),ye(e,"ul,ol,menu")&&this.execCommand("indent")},tooltip:"Add indent"},outdent:{state:function(e,t){return ye(t,"ul,ol,menu")?0:-1},exec:function(){ye(this.getRangeHelper().getFirstBlockParent(),"ul,ol,menu")&&this.execCommand("outdent")},tooltip:"Remove one indent"},table:{exec:function(e){var r=this,i=be("div");xe(i,Ie("table",{rows:r._("Rows:"),cols:r._("Cols:"),insert:r._("Insert")},!0)),ke(i,"click",".button",function(e){var t=Number(Te(i,"#rows")[0].value),n=Number(Te(i,"#cols")[0].value),o='<table class="table">';0<t&&0<n&&(o+=Array(t+1).join("<tr>"+Array(n+1).join('<td class="border"><br /></td>')+"</tr>"),r.wysiwygEditorInsertHtml(o+="</table>"),r.closeDropDown(!0),e.preventDefault())}),r.createDropDown(e,"inserttable",i)},tooltip:"Insert a table"},code:{_dropDown:function(t,e,n){var o=be("div");ke(o,"click","a",function(e){n(d(this,"language")),t.closeDropDown(!0),e.preventDefault()}),t.opts.codeLanguages.forEach(function(e){xe(o,Ie("codeOpt",{language:e.Value,languageName:e.Text},!0))}),t.createDropDown(e,"codeLanguage-picker",o)},exec:function(e){var t=this;Fe.code._dropDown(t,e,function(e){t.wysiwygEditorInsertHtml(`<pre class="border border-danger rounded m-2 p-2"><code class="language-${e}">`,"</code></pre>")})},tooltip:"Code"},extensions:{_dropDown:function(t,e,n){var o=be("div");ke(o,"click","a",function(e){n(d(this,"language")),t.closeDropDown(!0),e.preventDefault()}),fetch(t.opts.extensionsUrl,{method:"GET"}).then(e=>e.json()).then(e=>{e.forEach(function(e){e.useToolbar||xe(o,Ie("extensionOpt",{extension:e.name},!0))})}),t.createDropDown(e,"extensions-picker",o)},exec:function(e){var t=this;Fe.extensions._dropDown(t,e,function(e){t.wysiwygEditorInsertText(`[${e}]`,`[/${e}]`)})},tooltip:"More BBCode"},image:{_dropDown:function(n,e,o){var r=be("div"),i=(xe(r,Ie("image",{url:n._("URL:"),desc:n._("Description (optional):"),insert:n._("Insert")},!0)),Te(r,"#link")[0]);function t(e){var t=Te(r,"#des")[0].value;i.value&&o(i.value,t),n.closeDropDown(!0),e.preventDefault()}ke(r,"click",".button",t),ke(r,"keypress",function(e){13===e.which&&i.value&&t(e)},!0),n.createDropDown(e,"insertimage",r)},exec:function(e){var o=this;Fe.image._dropDown(o,e,function(e,t){var n="";t&&(n+=` alt="${Oe(t)}"`),n+=` src="${Oe(e)}"`,o.wysiwygEditorInsertHtml(`<img${n} class="img-user-posted img-thumbnail" />`)})},tooltip:"Insert an image"},email:{_dropDown:function(n,e,o){var r=be("div");xe(r,Ie("email",{label:n._("E-mail:"),desc:n._("Description (optional):"),insert:n._("Insert")},!0)),ke(r,"click",".button",function(e){var t=Te(r,"#email")[0].value;t&&o(t,Te(r,"#des")[0].value),n.closeDropDown(!0),e.preventDefault()}),n.createDropDown(e,"insertemail",r)},exec:function(e){var n=this;Fe.email._dropDown(n,e,function(e,t){!n.getRangeHelper().selectedHtml()||t?n.wysiwygEditorInsertHtml(`<a href="mailto:${Oe(e)}">${Oe(t||e)}</a>`):n.execCommand("createlink","mailto:"+e)})},tooltip:"Insert an email"},link:{_dropDown:function(t,e,n){var o=be("div"),r=(xe(o,Ie("link",{url:t._("URL:"),desc:t._("Description (optional):"),ins:t._("Insert")},!0)),Te(o,"#link")[0]);function i(e){r.value&&n(r.value,Te(o,"#des")[0].value),t.closeDropDown(!0),e.preventDefault()}ke(o,"click",".button",i),ke(o,"keypress",function(e){13===e.which&&r.value&&i(e)},!0),t.createDropDown(e,"insertlink",o)},exec:function(e){var n=this;Fe.link._dropDown(n,e,function(e,t){t||!n.getRangeHelper().selectedHtml()?n.wysiwygEditorInsertHtml(`<a href="${Oe(e)}">${Oe(t||e)}</a>`):n.execCommand("createlink",e)})},tooltip:"Insert a link"},unlink:{state:function(){return ye(this.currentNode(),"a")?0:-1},exec:function(){var e=ye(this.currentNode(),"a");if(e){for(;e.firstChild;)Ae(e.firstChild,e);we(e)}},tooltip:"Unlink"},quote:{exec:function(e,t,n){var o='<div class="border rounded mx-3 mb-3 p-3 border-secondary shadow-sm"><span contenteditable="false"><i class="fa fa-quote-left text-primary fs-4 me-2"></i></span>',r="</div>";t?(o=o+t+(n=n?`<cite class="card-text text-end d-block text-body-secondary small">${Oe(n)}</cite>`:"")+r,r=null):this.getRangeHelper().selectedHtml(),this.wysiwygEditorInsertHtml(o,r)},tooltip:"Insert a Quote"},media:{_dropDown:function(n,e,o){var r=be("div");xe(r,Ie("mediaMenu",{label:n._("Media URL:"),insert:n._("Insert")},!0)),ke(r,"click",".button",function(e){var t=Te(r,"#link")[0].value;t.startsWith("http")?(o(t),n.closeDropDown(!0),e.preventDefault()):alert("Not a valid URL!")}),n.createDropDown(e,"insertmedia",r)},exec:function(e){var t=this;Fe.media._dropDown(t,e,function(e){t.wysiwygEditorInsertHtml(`[media]${e}[/media]`)})},tooltip:"Insert an embed media like a YouTube video, facebook post or twitter status."},vimeo:{_dropDown:function(o,e,r){var i=be("div");xe(i,Ie("youtubeMenu",{label:o._("Video URL:"),insert:o._("Insert")},!0)),ke(i,"click",".button",function(e){var t,n=Te(i,"#link")[0].value;""!==n&&(t=n.match(/vimeo\..*\/(\d+)(?:$|\/)/),r(n,t[1])),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"insertlink",i)},exec:function(e){var n=this;Fe.vimeo._dropDown(n,e,function(e,t){n.wysiwygEditorInsertHtml(Ie("vimeo",{url:e,vimeoId:t}))})},tooltip:"Insert a Vimeo video"},instagram:{_dropDown:function(o,e,r){var i=be("div");xe(i,Ie("instagramMenu",{label:o._("Instagram Post URL:"),insert:o._("Insert")},!0)),ke(i,"click",".button",function(e){var t,n=Te(i,"#link")[0].value;""!==n&&(t=n.match(/\/(p|tv|reel)\/(.*?)\//))&&(t=t[2],r(n,t)),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"insertlink",i)},exec:function(e){var n=this;Fe.instagram._dropDown(n,e,function(e,t){n.wysiwygEditorInsertHtml(Ie("instagram",{url:e,id:t}))})},tooltip:"Insert an Instagram Post"},facebook:{_dropDown:function(n,e,o){var r=be("div");xe(r,Ie("facebookMenu",{label:n._("Facebook post URL:"),insert:n._("Insert")},!0)),ke(r,"click",".button",function(e){var t=Te(r,"#link")[0].value;o(t),n.closeDropDown(!0),e.preventDefault()}),n.createDropDown(e,"insertlink",r)},exec:function(e){var t=this;Fe.facebook._dropDown(t,e,function(e){t.wysiwygEditorInsertHtml(Ie("facebook",{url:e}))})},tooltip:"Insert an Facebook Post"},youtube:{_dropDown:function(o,e,r){var i=be("div");xe(i,Ie("youtubeMenu",{label:o._("Video URL:"),insert:o._("Insert")},!0)),ke(i,"click",".button",function(e){var t=Te(i,"#link")[0].value,n=t.match(/(?:v=|v\/|embed\/|youtu.be\/)?([a-zA-Z0-9_-]{11})/);n&&/^[a-zA-Z0-9_\-]{11}$/.test(n[1])&&r(t,n[1]),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"insertlink",i)},exec:function(e){var n=this;Fe.youtube._dropDown(n,e,function(e,t){n.wysiwygEditorInsertHtml(Ie("youtube",{url:e,id:t}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),o=t.getMonth()+1;return o<10&&(o="0"+o),(t=t.getDate())<10&&(t="0"+t),e.opts.dateFormat.replace(/year/i,n<2e3?1900+n:n).replace(/month/i,o).replace(/day/i,t)},exec:function(){this.insertText(Fe.date._date(this))},txtExec:function(){this.insertText(Fe.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes();return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+((e=e.getSeconds())<10?"0"+e:e)},exec:function(){this.insertText(Fe.time._time())},txtExec:function(){this.insertText(Fe.time._time())},tooltip:"Insert current time"},undo:{exec:"undo",tooltip:"Undo",shortcut:"Ctrl+Z"},redo:{exec:"redo",tooltip:"Redo",shortcut:"Ctrl+Y"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize()),this.focus()},txtExec:function(){this.maximize(!this.maximize()),this.focus()},tooltip:"Maximize",shortcut:"Ctrl+Shift+M"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode(),this.focus()},txtExec:function(){this.toggleSourceMode(),this.focus()},tooltip:"View source",shortcut:"Ctrl+Shift+S"},reply:{exec:function(){null!==document.getElementById("QuickReplyDialog")?document.querySelector('[data-bs-save*="modal"]').click():null!==document.querySelector('[formaction*="PostReply"]')?document.querySelector('[formaction*="PostReply"]').click():null!==document.querySelector('[id*="QuickReply"]')?document.querySelector('[id*="QuickReply"]').click():null!==document.querySelector('[id*="PostReply"]')&&(window.location.href=document.querySelector('[id*="PostReply"]').href)},tooltip:"Post Reply",shortcut:"Ctrl+Enter"},ignore:{}},k={};function pt(i){function a(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)}function e(e,t){for(var n,o=a((e=[].slice.call(e)).shift()),r=0;r<l.length;r++)if(o in l[r]&&(n=l[r][o].apply(i,e),t))return n}var r=this,l=[];r.call=function(){e(arguments,!1)},r.callOnlyFirst=function(){return e(arguments,!0)},r.hasHandler=function(e){var t=l.length;for(e=a(e);t--;)if(e in l[t])return!0;return!1},r.exists=function(e){return e in k&&"function"==typeof(e=k[e])&&"object"==typeof e.prototype},r.isRegistered=function(t){if(r.exists(t)){let e=l.length;for(;e--;)if(l[e]instanceof k[t])return!0}return!1},r.register=function(e){return!(!r.exists(e)||r.isRegistered(e)||(e=new k[e],l.push(e),"init"in e&&e.init.call(i),0))},r.deregister=function(e){var t,n=l.length,o=!1;if(r.isRegistered(e))for(;n--;)l[n]instanceof k[e]&&(o=!0,"destroy"in(t=l.splice(n,1)[0]))&&t.destroy.call(i);return o},r.destroy=function(){for(var e=l.length;e--;)"destroy"in l[e]&&l[e].destroy.call(i);l=[],i=null}}pt.plugins=k;var C=function(e,t,n){var o,r,i,a,l,s="",c=e.startContainer,u=e.startOffset;for(c&&3!==c.nodeType&&(c=c.childNodes[u],u=0),i=a=u;n>s.length&&c&&3===c.nodeType;)o=c.nodeValue,r=n-s.length,l&&(a=o.length,i=0),l=c,c=t?(u=i=Math.max(a-r,0),s=o.substr(i,a-i)+s,l.previousSibling):(u=i+(a=Math.min(r,o.length)),s+=o.substr(i,a),l.nextSibling);return{node:l||c,offset:u,text:s}};function ht(r,e,i){var a,l,s=e||r.contentDocument||r.document,c="sceditor-start-marker",u="sceditor-end-marker",g=this;g.insertHTML=function(e,t){if(!g.selectedRange())return!1;t&&(e+=g.selectedHtml()+t);var n=be("p",{},s),o=s.createDocumentFragment();for(n.innerHTML=i(e);n.firstChild;)xe(o,n.firstChild);g.insertNode(o)},l=function(e,t,n){var o,r=s.createDocumentFragment();if("string"==typeof e?(t&&(e+=g.selectedHtml()+t),r=rt(e)):(xe(r,e),t&&(xe(r,g.selectedRange().extractContents()),xe(r,t))),o=r.lastChild){for(;!Le(o.lastChild,!0);)o=o.lastChild;return lt(o)?o.lastChild||xe(o,document.createTextNode("​")):o=r,g.removeMarkers(),xe(o,a(c)),xe(o,a(u)),n?(xe(e=be("div"),r),e.innerHTML):r}},g.insertNode=function(e,t){var n,o,e=l(e,t),r=(t=g.selectedRange()).commonAncestorContainer,i=[];if(!e)return!1;function a(e){e&&h(e)&&i.indexOf(e)<0&&we(e)}t.startContainer!==t.endContainer&&(he(r.childNodes,function(e,t){h(t)&&i.push(t)}),n=e.firstChild,o=e.lastChild),t.deleteContents(),r&&3!==r.nodeType&&!lt(r)?Ae(e,r):(t.insertNode(e),a(n&&n.previousSibling),a(o&&o.nextSibling)),g.restoreRange()},g.cloneSelected=function(){var e=g.selectedRange();if(e)return e.cloneRange()},g.selectedRange=function(){var e,t,n=r.getSelection();if(n){if(n.rangeCount<=0){for(t=s.body;t.firstChild;)t=t.firstChild;(e=s.createRange()).setStartBefore(t),n.addRange(e)}return 0<n.rangeCount?n.getRangeAt(0):e}},g.hasSelection=function(){var e=r.getSelection();return e&&0<e.rangeCount},g.selectedHtml=function(){var e,t=g.selectedRange();return t?(xe(e=be("p",{},s),t.cloneContents()),e.innerHTML):""},g.parentNode=function(){var e=g.selectedRange();if(e)return e.commonAncestorContainer},g.getFirstBlockParent=function(e){var t=function(e){return Le(e,!0)?(e=e?e.parentNode:null)&&t(e):e};return t(e||g.parentNode())},g.insertNodeAt=function(e,t){var n=g.selectedRange(),o=g.cloneSelected();if(!o)return!1;o.collapse(e),o.insertNode(t),g.selectRange(n)},a=function(e){return g.removeMarker(e),(e=be("span",{id:e,className:"sceditor-selection sceditor-ignore",style:"display:none;line-height:0"},s)).innerHTML=" ",e},g.insertMarkers=function(){var e=g.selectedRange(),t=a(c);g.removeMarkers(),g.insertNodeAt(!0,t),e&&e.collapsed?t.parentNode.insertBefore(a(u),t.nextSibling):g.insertNodeAt(!1,a(u))},g.getMarker=function(e){return s.getElementById(e)},g.removeMarker=function(e){(e=g.getMarker(e))&&we(e)},g.removeMarkers=function(){g.removeMarker(c),g.removeMarker(u)},g.saveRange=function(){g.insertMarkers()},g.selectRange=function(e){var t,n=r.getSelection(),o=e.endContainer;if(e.collapsed&&o&&!Le(o,!0)){for(t=o.lastChild;t&&Ne(t,".sceditor-ignore");)t=t.previousSibling;Ne(t,"br")&&((o=s.createRange()).setEndAfter(t),o.collapse(!1),g.compare(e,o))&&(e.setStartBefore(t),e.collapse(!0))}n&&(g.clear(),n.addRange(e))},g.restoreRange=function(){var e,t=g.selectedRange(),n=g.getMarker(c),o=g.getMarker(u);if(!n||!o||!t)return!1;e=n.nextSibling===o,(t=s.createRange()).setStartBefore(n),t.setEndAfter(o),e&&t.collapse(!0),g.selectRange(t),g.removeMarkers()},g.selectOuterText=function(e,t){var n=g.cloneSelected();if(!n)return!1;n.collapse(!1),e=C(n,!0,e),t=C(n,!1,t),n.setStart(e.node,e.offset),n.setEnd(t.node,t.offset),g.selectRange(n)},g.getOuterText=function(e,t){var n=g.cloneSelected();return n?(n.collapse(!e),C(n,e,t).text):""},g.replaceKeyword=function(e,t,n,o,r,i){n||e.sort(function(e,t){return e[0].length-t[0].length});var a,l,s,c,u,d,f,m="(^|[\\s    ])",p=e.length,h=r?1:0,n=o||e[p-1][0].length;for(r&&n++,i=i||"",c=(a=g.getOuterText(!0,n)).length,a+=i,t&&(a+=g.getOuterText(!1,n));p--;)if(f=(d=e[p][0]).length,s=Math.max(0,c-f-h),l=-1,r?(u=a.substr(s).match(new RegExp(m+w(d)+m)))&&(l=u.index+s+u[1].length):l=a.indexOf(d,s),-1<l&&l<=c&&c<=l+f+h)return g.selectOuterText(u=c-l,f-u-(/^\S/.test(i)?1:0)),g.insertHTML(e[p][1]),!0;return!1},g.compare=function(e,t){return t=t||g.selectedRange(),e&&t?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):!e&&!t},g.clear=function(){var e=r.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())}}var S,E,e,t=navigator.userAgent,gt=/iPhone|iPod|iPad| wosbrowser\//i.test(t),vt=(S=!!window.document.documentMode,E="-ms-ime-align"in document.documentElement.style,(e=document.createElement("div")).contentEditable=!0,"contentEditable"in document.documentElement&&"true"===e.contentEditable&&(e=/Opera Mobi|Opera Mini/i.test(t),/Android/i.test(t)&&(e=!0,/Safari/.test(t))&&(e=!(n=/Safari\/(\d+)/.exec(t))||!n[1]||n[1]<534),/ Silk\//i.test(t)&&(e=!(n=/AppleWebKit\/(\d+)/.exec(t))||!n[1]||n[1]<534),gt&&(e=/OS [0-4](_\d)+ like Mac/i.test(t)),/Firefox/i.test(t)&&(e=!1),/OneBrowser/i.test(t)&&(e=!1),"UCWEB"===navigator.vendor&&(e=!1),!(e=S||E||e)));function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t,n){return(N=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){}}}()?Reflect.construct:function(e,t,n){var o=[null];return o.push.apply(o,t),t=new(Function.bind.apply(e,o)),n&&D(t,n.prototype),t}).apply(null,arguments)}function je(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){var t;if(e)return"string"==typeof e?A(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,void 0):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function yt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return H(z,t)}var M=Object.hasOwnProperty,_=Object.setPrototypeOf,R=Object.isFrozen,L=Object.getPrototypeOf,O=Object.getOwnPropertyDescriptor,$e=Object.freeze,n=Object.seal,I=Object.create,F=(t="undefined"!=typeof Reflect&&Reflect).apply||function(e,t,n){return e.apply(t,n)},$e=$e||function(e){return e},n=n||function(e){return e},H=t.construct||function(e,t){return N(e,je(t))},wt=o(Array.prototype.forEach),xt=o(Array.prototype.pop),Tt=o(Array.prototype.push),kt=o(String.prototype.toLowerCase),Ct=o(String.prototype.toString),St=o(String.prototype.match),Ge=o(String.prototype.replace),Et=o(String.prototype.indexOf),Dt=o(String.prototype.trim),qe=o(RegExp.prototype.test);function o(r){return function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return F(r,e,n)}}function Ye(e,t,n){n=null!=n?n:kt,_&&_(e,null);for(var o=t.length;o--;){var r,i=t[o];"string"==typeof i&&(r=n(i))!==i&&(R(t)||(t[o]=r),i=r),e[i]=!0}return e}function Nt(e){var t,n=I(null);for(t in e)!0===F(M,e,[t])&&(n[t]=e[t]);return n}function At(e,t){for(;null!==e;){var n=O(e,t);if(n){if(n.get)return o(n.get);if("function"==typeof n.value)return o(n.value)}e=L(e)}return function(e){return console.warn("fallback value for",e),null}}var z=TypeError,Mt=$e(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_t=$e(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Rt=$e(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Lt=$e(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ot=$e(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),It=$e(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ft=$e(["#text"]),Ht=$e(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),zt=$e(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Bt=$e(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pt=$e(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ut=n(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Wt=n(/<%[\w\W]*|[\w\W]*%>/gm),Vt=n(/\${[\w\W]*}/gm),jt=n(/^data-[\-\w.\u00B7-\uFFFF]/),$t=n(/^aria-[\-\w]+$/),Gt=n(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),qt=n(/^(?:\w+script|data):/i),Yt=n(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Kt=n(/^html$/i),Xt=n(/^[a-z][.\w]*(-[.\w]+)+$/i),Qt=function F(e){var l=0<arguments.length&&void 0!==e?e:"undefined"==typeof window?null:window,u=function(e){return F(e)};if(u.version="2.5.5",u.removed=[],l&&l.document&&9===l.document.nodeType){var s=l.document,r=l.document,H=l.DocumentFragment,e=l.HTMLTemplateElement,c=l.Node,z=l.Element,t=l.NodeFilter,B=void 0===(n=l.NamedNodeMap)?l.NamedNodeMap||l.MozNamedAttrMap:n,P=l.HTMLFormElement,U=l.DOMParser,d=l.trustedTypes,W=At(n=z.prototype,"cloneNode"),V=At(n,"nextSibling"),j=At(n,"childNodes"),f=At(n,"parentNode"),m=("function"==typeof e&&(n=r.createElement("template")).content&&n.content.ownerDocument&&(r=n.content.ownerDocument),function(e,t){if("object"!==bt(e)||"function"!=typeof e.createPolicy)return null;var n="data-tt-policy-suffix",t="dompurify"+((n=t.currentScript&&t.currentScript.hasAttribute(n)?t.currentScript.getAttribute(n):null)?"#"+n:"");try{return e.createPolicy(t,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}}(d,s)),$=m?m.createHTML(""):"",e=r,G=e.implementation,q=e.createNodeIterator,Y=e.createDocumentFragment,K=e.getElementsByTagName,X=s.importNode,n={};try{n=Nt(r).documentMode?r.documentMode:{}}catch(e){}var Q,p,h,o={},Z=(u.isSupported="function"==typeof f&&G&&void 0!==G.createHTMLDocument&&9!==n,Ut),J=Wt,ee=Vt,te=jt,ne=$t,oe=qt,re=Yt,ie=Xt,ae=Gt,g=null,le=Ye({},[].concat(je(Mt),je(_t),je(Rt),je(Ot),je(Ft))),v=null,se=Ye({},[].concat(je(Ht),je(zt),je(Bt),je(Pt))),b=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),y=null,ce=null,ue=!0,de=!0,fe=!1,me=!0,w=!1,pe=!0,x=!1,he=!1,ge=!1,T=!1,k=!1,C=!1,ve=!0,be=!1,ye="user-content-",we=!0,S=!1,i={},E=null,xe=Ye({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Te=null,ke=Ye({},["audio","video","img","source","image","track"]),Ce=null,Se=Ye({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),D="http://www.w3.org/1998/Math/MathML",N="http://www.w3.org/2000/svg",A="http://www.w3.org/1999/xhtml",M=A,Ee=null,De=Ye({},[D,N,A],Ct),Ne=["application/xhtml+xml","text/html"],a=null,Ae=r.createElement("form"),Me=function(e){return e instanceof RegExp||e instanceof Function},_e=function(e){a&&a===e||(e=Nt(e=e&&"object"===bt(e)?e:{}),p=-1===Ne.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,h="application/xhtml+xml"===p?Ct:kt,g="ALLOWED_TAGS"in e?Ye({},e.ALLOWED_TAGS,h):le,v="ALLOWED_ATTR"in e?Ye({},e.ALLOWED_ATTR,h):se,Ee="ALLOWED_NAMESPACES"in e?Ye({},e.ALLOWED_NAMESPACES,Ct):De,Ce="ADD_URI_SAFE_ATTR"in e?Ye(Nt(Se),e.ADD_URI_SAFE_ATTR,h):Se,Te="ADD_DATA_URI_TAGS"in e?Ye(Nt(ke),e.ADD_DATA_URI_TAGS,h):ke,E="FORBID_CONTENTS"in e?Ye({},e.FORBID_CONTENTS,h):xe,y="FORBID_TAGS"in e?Ye({},e.FORBID_TAGS,h):{},ce="FORBID_ATTR"in e?Ye({},e.FORBID_ATTR,h):{},i="USE_PROFILES"in e&&e.USE_PROFILES,ue=!1!==e.ALLOW_ARIA_ATTR,de=!1!==e.ALLOW_DATA_ATTR,fe=e.ALLOW_UNKNOWN_PROTOCOLS||!1,me=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,w=e.SAFE_FOR_TEMPLATES||!1,pe=!1!==e.SAFE_FOR_XML,x=e.WHOLE_DOCUMENT||!1,T=e.RETURN_DOM||!1,k=e.RETURN_DOM_FRAGMENT||!1,C=e.RETURN_TRUSTED_TYPE||!1,ge=e.FORCE_BODY||!1,ve=!1!==e.SANITIZE_DOM,be=e.SANITIZE_NAMED_PROPS||!1,we=!1!==e.KEEP_CONTENT,S=e.IN_PLACE||!1,ae=e.ALLOWED_URI_REGEXP||ae,M=e.NAMESPACE||A,b=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Me(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(b.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Me(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(b.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(b.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),w&&(de=!1),k&&(T=!0),i&&(g=Ye({},je(Ft)),v=[],!0===i.html&&(Ye(g,Mt),Ye(v,Ht)),!0===i.svg&&(Ye(g,_t),Ye(v,zt),Ye(v,Pt)),!0===i.svgFilters&&(Ye(g,Rt),Ye(v,zt),Ye(v,Pt)),!0===i.mathMl)&&(Ye(g,Ot),Ye(v,Bt),Ye(v,Pt)),e.ADD_TAGS&&Ye(g=g===le?Nt(g):g,e.ADD_TAGS,h),e.ADD_ATTR&&Ye(v=v===se?Nt(v):v,e.ADD_ATTR,h),e.ADD_URI_SAFE_ATTR&&Ye(Ce,e.ADD_URI_SAFE_ATTR,h),e.FORBID_CONTENTS&&Ye(E=E===xe?Nt(E):E,e.FORBID_CONTENTS,h),we&&(g["#text"]=!0),x&&Ye(g,["html","head","body"]),g.table&&(Ye(g,["tbody"]),delete y.tbody),$e&&$e(e),a=e)},Re=Ye({},["mi","mo","mn","ms","mtext"]),Le=Ye({},["foreignobject","annotation-xml"]),Oe=Ye({},["title","style","font","a","script"]),_=Ye({},_t),Ie=(Ye(_,Rt),Ye(_,Lt),Ye({},Ot)),R=(Ye(Ie,It),function(t){Tt(u.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=$}catch(e){t.remove()}}}),L=function(e,t){try{Tt(u.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Tt(u.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!v[e])if(T||k)try{R(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Fe=function(e){ge?e="<remove></remove>"+e:n=(n=St(e,/^[\r\n\t ]+/))&&n[0],"application/xhtml+xml"===p&&M===A&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var t,n,o=m?m.createHTML(e):e;if(M===A)try{t=(new U).parseFromString(o,p)}catch(e){}if(!t||!t.documentElement){t=G.createDocument(M,"template",null);try{t.documentElement.innerHTML=Q?$:o}catch(e){}}return o=t.body||t.documentElement,e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),M===A?K.call(t,x?"html":"body")[0]:x?t.documentElement:o},He=function(e){return q.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT|t.SHOW_PROCESSING_INSTRUCTION|t.SHOW_CDATA_SECTION,null,!1)},ze=function(e){return e instanceof P&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof B)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},O=function(e){return"object"===bt(c)?e instanceof c:e&&"object"===bt(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},I=function(e,t,n){o[e]&&wt(o[e],function(e){e.call(u,t,n,a)})},Be=function(e){if(I("beforeSanitizeElements",e,null),!ze(e)&&!qe(/[\u0080-\uFFFF]/,e.nodeName)){var t,n,o,r,i=h(e.nodeName);if(I("uponSanitizeElement",e,{tagName:i,allowedTags:g}),(!e.hasChildNodes()||O(e.firstElementChild)||O(e.content)&&O(e.content.firstElementChild)||!qe(/<[/\w]/g,e.innerHTML)||!qe(/<[/\w]/g,e.textContent))&&!("select"===i&&qe(/<template/i,e.innerHTML)||7===e.nodeType||pe&&8===e.nodeType&&qe(/<[/\w]/g,e.data))){if(g[i]&&!y[i])return e instanceof z&&((n=f(t=e))&&n.tagName||(n={namespaceURI:M,tagName:"template"}),o=kt(t.tagName),r=kt(n.tagName),!Ee[t.namespaceURI]||(t.namespaceURI===N?n.namespaceURI===A?"svg"!==o:n.namespaceURI===D?"svg"!==o||"annotation-xml"!==r&&!Re[r]:!Boolean(_[o]):t.namespaceURI===D?n.namespaceURI===A?"math"!==o:n.namespaceURI===N?"math"!==o||!Le[r]:!Boolean(Ie[o]):t.namespaceURI===A?n.namespaceURI===N&&!Le[r]||n.namespaceURI===D&&!Re[r]||Ie[o]||!Oe[o]&&_[o]:"application/xhtml+xml"!==p||!Ee[t.namespaceURI]))||("noscript"===i||"noembed"===i||"noframes"===i)&&qe(/<\/no(script|embed|frames)/i,e.innerHTML)?(R(e),!0):(w&&3===e.nodeType&&(n=e.textContent,n=Ge(n,Z," "),n=Ge(n,J," "),n=Ge(n,ee," "),e.textContent!==n)&&(Tt(u.removed,{element:e.cloneNode()}),e.textContent=n),I("afterSanitizeElements",e,null),!1);if(!y[i]&&Ue(i)){if(b.tagNameCheck instanceof RegExp&&qe(b.tagNameCheck,i))return!1;if(b.tagNameCheck instanceof Function&&b.tagNameCheck(i))return!1}if(we&&!E[i]){var a=f(e)||e.parentNode,l=j(e)||e.childNodes;if(l&&a)for(var s=l.length-1;0<=s;--s){var c=W(l[s],!0);c.__removalCount=(e.__removalCount||0)+1,a.insertBefore(c,V(e))}}}}return R(e),!0},Pe=function(e,t,n){if(ve&&("id"===t||"name"===t)&&(n in r||n in Ae))return!1;if((!de||ce[t]||!qe(te,t))&&(!ue||!qe(ne,t)))if(!v[t]||ce[t]){if(!(Ue(e)&&(b.tagNameCheck instanceof RegExp&&qe(b.tagNameCheck,e)||b.tagNameCheck instanceof Function&&b.tagNameCheck(e))&&(b.attributeNameCheck instanceof RegExp&&qe(b.attributeNameCheck,t)||b.attributeNameCheck instanceof Function&&b.attributeNameCheck(t))||"is"===t&&b.allowCustomizedBuiltInElements&&(b.tagNameCheck instanceof RegExp&&qe(b.tagNameCheck,n)||b.tagNameCheck instanceof Function&&b.tagNameCheck(n))))return!1}else if(!Ce[t]&&!qe(ae,Ge(n,re,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Et(n,"data:")||!Te[e])&&(!fe||qe(oe,Ge(n,re,"")))&&n)return!1;return!0},Ue=function(e){return"annotation-xml"!==e&&St(e,ie)},We=function(e){I("beforeSanitizeAttributes",e,null);var t=e.attributes;if(t){for(var n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:v},o=t.length;o--;){var r=(l=t[o]).name,i=l.namespaceURI,a="value"===r?l.value:Dt(l.value),l=h(r);if(n.attrName=l,n.attrValue=a,n.keepAttr=!0,n.forceKeepAttr=void 0,I("uponSanitizeAttribute",e,n),a=n.attrValue,!n.forceKeepAttr&&(L(r,e),n.keepAttr))if(!me&&qe(/\/>/i,a))L(r,e);else if(pe&&qe(/((--!?|])>)|<\/(style|title)/i,a))L(r,e);else{w&&(a=Ge(a,Z," "),a=Ge(a,J," "),a=Ge(a,ee," "));var s=h(e.nodeName);if(Pe(s,l,a)){if(!be||"id"!==l&&"name"!==l||(L(r,e),a=ye+a),m&&"object"===bt(d)&&"function"==typeof d.getAttributeType&&!i)switch(d.getAttributeType(s,l)){case"TrustedHTML":a=m.createHTML(a);break;case"TrustedScriptURL":a=m.createScriptURL(a)}try{i?e.setAttributeNS(i,r,a):e.setAttribute(r,a),ze(e)?R(e):xt(u.removed)}catch(e){}}}}I("afterSanitizeAttributes",e,null)}},Ve=function e(t){var n,o=He(t);for(I("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)I("uponSanitizeShadowNode",n,null),Be(n)||(n.content instanceof H&&e(n.content),We(n));I("afterSanitizeShadowDOM",t,null)};u.sanitize=function(e){var t,n,o,r,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof(e=(Q=!e)?"\x3c!--\x3e":e)&&!O(e)){if("function"!=typeof e.toString)throw yt("toString is not a function");if("string"!=typeof(e=e.toString()))throw yt("dirty is not a string, aborting")}if(!u.isSupported){if("object"===bt(l.toStaticHTML)||"function"==typeof l.toStaticHTML){if("string"==typeof e)return l.toStaticHTML(e);if(O(e))return l.toStaticHTML(e.outerHTML)}return e}if(he||_e(i),u.removed=[],S="string"!=typeof e&&S){if(e.nodeName&&(i=h(e.nodeName),!g[i]||y[i]))throw yt("root node is forbidden and cannot be sanitized in-place")}else if(e instanceof c)1===(i=(t=Fe("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?t=i:t.appendChild(i);else{if(!T&&!w&&!x&&-1===e.indexOf("<"))return m&&C?m.createHTML(e):e;if(!(t=Fe(e)))return T?null:C?$:""}t&&ge&&R(t.firstChild);for(var a=He(S?e:t);n=a.nextNode();)3===n.nodeType&&n===o||Be(n)||(n.content instanceof H&&Ve(n.content),We(n),o=n);if(o=null,S)return e;if(T){if(k)for(r=Y.call(t.ownerDocument);t.firstChild;)r.appendChild(t.firstChild);else r=t;return v.shadowroot||v.shadowrootmod?X.call(s,r,!0):r}return i=x?t.outerHTML:t.innerHTML,x&&g["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&qe(Kt,t.ownerDocument.doctype.name)&&(i="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+i),w&&(i=Ge(i,Z," "),i=Ge(i,J," "),i=Ge(i,ee," ")),m&&C?m.createHTML(i):i},u.setConfig=function(e){_e(e),he=!0},u.clearConfig=function(){a=null,he=!1},u.isValidAttribute=function(e,t,n){return a||_e({}),e=h(e),t=h(t),Pe(e,t,n)},u.addHook=function(e,t){"function"==typeof t&&(o[e]=o[e]||[],Tt(o[e],t))},u.removeHook=function(e){if(o[e])return xt(o[e])},u.removeHooks=function(e){o[e]&&(o[e]=[])},u.removeAllHooks=function(){o={}}}else u.isSupported=!1;return u}(),He=window,ze=document,Zt=/^image\/(p?jpe?g|gif|png|bmp)$/i;function Jt(e,t){var n;m(e,function(e){Le(e,!0)?(n||e.nodeType===ve?/\S/.test(e.nodeValue):!Ne(e,".sceditor-ignore"))&&(n||Ae(n=be("p",{},t),e),xe(n,e)):n=null},!1,!0)}function Be(r,e){var a,y,n,i,o,c,u,l,w,s,d,f,t,m,p,h,g,F,v,H,z,b,x,B,P,T,k,U,W,V,j,$,G,q,Y,K,X,Q,Z,J,C,ee,te,ne,oe,re,S,ie,E,ae,le,se,ce,D,ue,N,de,A,M=this,_={},R=[],L={},fe={},O=(M.commands=We(!0,{},e.commands||Fe),M.opts=We(!0,{},mt,e)),me=(Array.isArray(O.allowedIframeUrls)||(O.allowedIframeUrls=[]),O.allowedIframeUrls.push("https://youtube.com/embed/"),O.allowedIframeUrls.push("https://player.vimeo.com/video/"),O.allowedIframeUrls.push("https://www.instagram.com/p/"),O.allowedIframeUrls.push("https://www.facebook.com/plugins/"),Qt());function I(e){var t=["iframe"].concat(O.allowedTags),n=["allowfullscreen","frameborder","target"].concat(O.allowedAttributes);return me.sanitize(e,{ADD_TAGS:t,ADD_ATTR:n})}me.addHook("uponSanitizeElement",function(e,t){var n=O.allowedIframeUrls;if("iframe"===t.tagName){var o=Se(e,"src")||"";for(let e=0;e<n.length;e++){var r=n[e];if(pe(r)&&o.substr(0,r.length)===r)return;if(r.test&&r.test(o))return}we(e)}}),me.addHook("afterSanitizeAttributes",function(e){"target"in e&&Se(e,"data-sce-target",Se(e,"target")),Ee(e,"target")}),e=function(){function e(){Ce(He,"load",e),O.autofocus&&se(!!O.autofocusEnd),A(),E(),p.call("ready"),"onReady"in a&&a.onReady.call(M)}r._sceditor=M,O.locale&&"en"!==O.locale&&V(),Ae(y=be("div",{className:"sceditor-container card"}),r),De(y,"z-index",O.zIndex),z=r.required,r.required=!1;var t=Be.formats[O.format];a=t?new t:{},p=new pt(M),(O.plugins||"").split(",").forEach(function(e){p.register(e.trim())}),"init"in a&&a.init.call(M),j(),W(),$(),G(),vt||M.toggleSourceMode(),S(),ke(He,"load",e),"complete"===ze.readyState&&e()},V=function(){var e;(t=Be.locale[O.locale])||(e=O.locale.split("-"),t=Be.locale[e[0]]),t&&t.dateFormat&&(O.dateFormat=t.dateFormat)},W=function(){l=be("textarea"),i=be("iframe",{frameborder:0,allowfullscreen:!0}),Me(w=be("div"),"card-footer"),Me(w,"text-body-secondary"),Me(w,"text-end"),Me(w,"small"),Me(w,"p-2"),w.appendChild(rt(M._("Characters remaining:")+'<span id="editor-Counter" class="badge bg-secondary ms-1"></span>')),O.startInSourceMode?(Me(y,"sourceMode"),Ke(i)):(Me(y,"wysiwygMode"),Ke(l)),O.spellcheck||Se(y,"spellcheck","false"),"https:"===He.location.protocol&&Se(i,"src","about:blank"),Se(l,"title","source"),xe(y,i),xe(y,l),xe(y,w),M.dimensions(O.width||et(r),O.height||Re(r)),(u=i.contentDocument).open();var t="",e=(O.styles.forEach(e=>{t+=Ie("style",{style:e})}),u.write(Ie("html",{spellcheck:O.spellcheck?"":'spellcheck="false"',charset:O.charset,themeMode:O.themeMode,styles:t})),u.close(),c=u.body,o=i.contentWindow,M.readOnly(!!O.readOnly),gt&&(Re(c,"100%"),ke(c,"touchend",M.focus)),Se(r,"tabindex"));Se(l,"tabindex",e),Se(i,"tabindex",e),m=new ht(o,null,I),Ke(r),M.val(r.value),(e=O.placeholder||Se(r,"placeholder"))&&(l.placeholder=e,Se(c,"placeholder",e))},$=function(){O.autoUpdate&&(ke(c,"blur",de),ke(l,"blur",de)),null===O.rtl&&(O.rtl="rtl"===De(l,"direction")),M.rtl(!!O.rtl),O.autoExpand&&(ke(c,"load",A,!0),ke(c,"input keyup",A)),O.resizeEnabled&&q(),Se(y,"id",O.id)},G=function(){var e=r.form,t="compositionstart compositionend",n="keydown keyup keypress focus blur contextmenu input",o="onselectionchange"in u?"selectionchange":"keyup focus blur contextmenu mouseup touchend click";ke(ze,"click",oe),e&&(ke(e,"reset",C),ke(e,"submit",M.updateOriginal,!0)),ke(window,"pagehide",M.updateOriginal),ke(window,"pageshow",C),ke(c,"keypress",J),ke(c,"keydown",Q),ke(c,"keydown",Z),ke(c,"keyup",E),ke(c,"blur",ue),ke(c,"keyup",N),ke(c,"paste",Y),ke(c,"cut copy",K),ke(c,t,te),ke(c,o,ae),ke(c,n,ne),ke(c,"blur",function(){M.val()||Me(c,"placeholder")}),ke(c,"focus",function(){Je(c,"placeholder")}),ke(l,"blur",ue),ke(l,"keyup",N),ke(l,"keydown",Q),ke(l,t,te),ke(l,n,ne),ke(u,"mousedown",ee),ke(u,o,ae),ke(u,"keyup",E),ke(y,"selectionchanged",le),ke(y,"selectionchanged",S),ke(y,"selectionchanged valuechanged nodechanged pasteraw paste",ne)},j=function(){var i,a=M.commands,l=(O.toolbarExclude||"").split(","),e=O.toolbar.split("|");n=be("div",{className:"card-header btn-toolbar",unselectable:"on"}),O.icons in Be.icons&&(k=new Be.icons[O.icons]),he(e,function(e,t){i=be("div",{className:"btn-group btn-group-sm m-1"}),he(t.split(","),function(e,t){var n,o,r=a[t];!r||-1<l.indexOf(t)||(n=r.shortcut,o=Ie("toolbarButton",{name:t},!0).firstChild,"source"===t?o.classList.add("btn-secondary"):o.classList.add("btn-primary"),k&&k.create&&k.create(t)&&Ae(k.create(t),o.firstChild),o._sceTxtMode=!!r.txtExec,o._sceWysiwygMode=!!r.exec,_e(o,"disabled",!r.exec),ke(o,"click",function(e){Ze(o,"disabled")||U(o,r),S(),e.preventDefault()}),ke(o,"mousedown",function(e){M.closeDropDown(),e.preventDefault()}),r.tooltip&&Se(o,"title",M._(r.tooltip)+(n?" ("+n+")":"")),n&&M.addShortcut(n,t),r.state?R.push({name:t,state:r.state}):pe(r.exec)&&R.push({name:t,state:r.exec}),xe(i,o),fe[t]=o)}),i.firstChild&&xe(n,i)}),xe(O.toolbarContainer||y,n)},q=function(){function t(e){u=("touchmove"===e.type?(e=He.event,c=e.changedTouches[0].pageX,e.changedTouches[0]):(c=e.pageX,e)).pageY;var t=i+(u-o),n=p?r-(c-s):r+(c-s);0<b&&b<n&&(n=b),0<v&&n<v&&(n=v),O.resizeWidth||(n=!1),0<g&&g<t&&(t=g),0<h&&t<h&&(t=h),O.resizeHeight||(t=!1),(n||t)&&M.dimensions(n,t),e.preventDefault()}function n(e){m&&(m=!1,Je(y,"resizing"),Ce(ze,a,t),Ce(ze,l,n),e.preventDefault())}var o,r,i,e=be("div",{className:"sceditor-grip"}),a="touchmove mousemove",l="touchcancel touchend mouseup",s=0,c=0,u=0,d=et(y),f=Re(y),m=!1,p=M.rtl(),h=O.resizeMinHeight||f/1.5,g=O.resizeMaxHeight||2.5*f,v=O.resizeMinWidth||d/1.25,b=O.resizeMaxWidth||1.25*d;k&&k.create&&(f=k.create("grip"))&&xe(e,f),xe(y,w),xe(y,e),ke(e,"touchstart mousedown",function(e){o=("touchstart"===e.type?(e=He.event,s=e.touches[0].pageX,e.touches[0]):(s=e.pageX,e)).pageY,r=et(y),i=Re(y),m=!0,Me(y,"resizing"),ke(ze,a,t),ke(ze,l,n),e.preventDefault()})},se=function(e){var t,n=c.firstChild;if(nt(y))if(M.sourceMode())t=e?l.value.length:0,l.setSelectionRange(t,t);else{if(ct(c),e)for((n=c.lastChild)||(n=be("p",{},u),xe(c,n));n.lastChild;)Ne(n=n.lastChild,"br")&&n.previousSibling&&(n=n.previousSibling);t=u.createRange(),lt(n)?t.selectNodeContents(n):(t.setStartBefore(n),e&&t.setStartAfter(n)),t.collapse(!e),m.selectRange(t),v=t,e&&(c.scrollTop=c.scrollHeight),M.focus()}},M.readOnly=function(e){return"boolean"!=typeof e?!l.readonly:(c.contentEditable=!e,l.readonly=!e,re(e),M)},M.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===Se(l,"dir"):(Se(c,"dir",t),Se(l,"dir",t),Je(y,"rtl"),Je(y,"ltr"),Me(y,t),k&&k.rtl&&k.rtl(e),M)},re=function(n){var o=M.inSourceMode()?"_sceTxtMode":"_sceWysiwygMode";he(fe,function(e,t){_e(t,"disabled",n||!t[o])})},M.width=function(e,t){return e||0===e?(M.dimensions(e,null,t),M):et(y)},M.dimensions=function(e,t,n){return t=!(!t&&0!==t)&&t,!1===(e=!(!e&&0!==e)&&e)&&!1===t?{width:M.width(),height:M.height()}:(!1!==e&&(!1!==n&&(O.width=e),et(y,e)),!1!==t&&(!1!==n&&(O.height=t),Re(y,t)),M)},M.height=function(e,t){return e||0===e?(M.dimensions(null,e,t),M):Re(y)},M.maximize=function(e){var t="sceditor-maximize";return Pe(e)?Ze(y,t):((e=!!e)&&(P=He.scrollY),_e(ze.documentElement,t,e),_e(ze.body,t,e),_e(y,t,e),M.width(e?"100%":O.width,!1),M.height(e?"100%":O.height,!1),e||He.scrollTo(0,P),A(),M)},A=function(){O.autoExpand&&!B&&(B=setTimeout(M.expandToContent,200))},M.expandToContent=function(e){var t,n;M.maximize()||(clearTimeout(B),B=!1,x||(n=O.resizeMinHeight||O.height||Re(r),x={min:n,max:O.resizeMaxHeight||2*n}),(n=ze.createRange()).selectNodeContents(c),n=n.getBoundingClientRect(),t=u.documentElement.clientHeight-1,n=n.bottom-n.top,n=M.height()+1+(n-t),e||-1===x.max||(n=Math.min(n,x.max)),M.height(Math.ceil(Math.max(n,x.min))))},M.destroy=function(){var e;p&&(p.destroy(),p=m=null,s&&we(s),Ce(ze,"click",oe),(e=r.form)&&(Ce(e,"reset",C),Ce(e,"submit",M.updateOriginal,!0)),Ce(window,"pagehide",M.updateOriginal),Ce(window,"pageshow",C),we(l),we(n),we(y),delete r._sceditor,Xe(r),r.required=z)},M.createDropDown=function(e,t,n){t="sceditor-"+t,M.closeDropDown(),s&&Ze(s,t)||(e=We({top:e.offsetTop,left:e.parentElement.offsetLeft+e.offsetLeft,marginTop:e.clientHeight},O.dropDownCss),De(s=be("div",{className:"dropdown-menu show sceditor-dropdown "+t}),e),xe(s,n),xe(y,s),ke(s,"click focusin",function(e){e.stopPropagation()}),s&&(t=Te(s,"input,textarea")[0])&&t.focus())},oe=function(e){3!==e.which&&s&&!e.defaultPrevented&&(de(),M.closeDropDown())},K=function(r){var i=m.selectedRange();if(i){let e,t=be("div",{},u),n,o=i.commonAncestorContainer;for(;o&&Le(o,!0);)o.nodeType===ge&&(e=o.cloneNode(),t.firstChild&&xe(e,t.firstChild),xe(t,e),n=n||e),o=o.parentNode;xe(n||t,i.cloneContents()),ct(t),r.clipboardData.setData("text/html",t.innerHTML),he(Te(t,"p"),function(e,t){at(t,"div")}),he(Te(t,"br"),function(e,t){t.nextSibling&&Le(t.nextSibling,!0)||we(t)}),xe(c,t),r.clipboardData.setData("text/plain",t.innerText),we(t),"cut"===r.type&&i.deleteContents(),r.preventDefault()}},Y=function(e){var t,n,o=c,r=e.clipboardData;if(r){var i={},a=r.types,l=r.items;e.preventDefault();for(let e=0;e<a.length;e++){if(a.indexOf("text/html")<0&&He.FileReader&&l&&Zt.test(l[e].type))return t=r.items[e].getAsFile(),n=void 0,(n=new FileReader).onload=function(e){X({html:'<img src="'+e.target.result+'" />'})},void n.readAsDataURL(t);i[a[e]]=r.getData(a[e])}i.text=i["text/plain"],i.html=I(i["text/html"]),X(i)}else if(!T){var s=o.scrollTop;for(m.saveRange(),T=ze.createDocumentFragment();o.firstChild;)xe(T,o.firstChild);setTimeout(function(){var e=o.innerHTML;o.innerHTML="",xe(o,T),o.scrollTop=s,T=!1,m.restoreRange(),X({html:I(e)})},0)}},X=function(e){var t=be("div",{},u),e=(p.call("pasteRaw",e),tt(y,"pasteraw",e),e.html?(t.innerHTML=I(e.html),st(t)):t.innerHTML=Oe(e.text||""),{val:t.innerHTML}),t=("fragmentToSource"in a&&(e.val=a.fragmentToSource(e.val,u,h)),p.call("paste",e),tt(y,"paste",e),"fragmentToHtml"in a&&(e.val=a.fragmentToHtml(e.val,h)),p.call("pasteHtml",e),m.getFirstBlockParent());M.wysiwygEditorInsertHtml(e.val,null,!0),function e(t){if(t.nodeType===ge){for(var n=t.parentNode,o=t.tagName,r=t.childNodes.length;r--;)e(t.childNodes[r]);if(Le(t)&&"BR"!==o){for(r=t.style.length;r--;){var i=t.style[r];De(n,i)===De(t,i)&&t.style.removeProperty(i)}if(!t.style.length)if(Ee(t,"style"),"FONT"===o&&(De(t,"fontFamily").toLowerCase()===De(n,"fontFamily").toLowerCase()&&Ee(t,"face"),De(t,"color")===De(n,"color")&&Ee(t,"color"),De(t,"fontSize")===De(n,"fontSize"))&&Ee(t,"size"),!t.attributes.length&&/SPAN|FONT/.test(o))ft(t);else if(/B|STRONG|EM|SPAN|FONT/.test(o))for(var a=/B|STRONG/.test(o),l="EM"===o;n&&Le(n)&&(!a||/bold|700/i.test(De(n,"fontWeight")))&&(!l||"italic"===De(n,"fontStyle"));){if((n.tagName===o||a&&/B|STRONG/.test(n.tagName))&&dt(n,t)){ft(t);break}n=n.parentNode}var s=t.nextSibling;s&&s.tagName===o&&dt(s,t)&&(xe(t,s),ft(s))}}}(t)},M.closeDropDown=function(e){s&&(we(s),s=null),!0===e&&M.focus()},M.wysiwygEditorInsertHtml=function(e,t,n){var o=Re(i);M.focus(),!n&&ye(g,"code")||(m.insertHTML(e,t),m.saveRange(),st(c),Jt(c,u),Xe(n=Te(c,"#sceditor-end-marker")[0]),e=c.scrollTop,t=ut(n).top+1.5*n.offsetHeight-o,Ke(n),(e<t||t+o<e)&&(c.scrollTop=t),D(!1),m.restoreRange(),E())},M.wysiwygEditorInsertText=function(e,t){M.wysiwygEditorInsertHtml(Oe(e),Oe(t))},M.insertText=function(e,t){return M.inSourceMode()?M.sourceEditorInsertText(e,t):M.wysiwygEditorInsertText(e,t),M},M.sourceEditorInsertText=function(e,t){var n,o=l.selectionStart,r=l.selectionEnd,i=l.scrollTop;l.focus(),n=l.value,t&&(e+=n.substring(o,r)+t),l.value=n.substring(0,o)+e+n.substring(r,n.length),l.selectionStart=o+e.length-(t?t.length:0),l.selectionEnd=l.selectionStart,l.scrollTop=i,l.focus(),D()},M.getRangeHelper=function(){return m},M.sourceEditorCaret=function(e){return l.focus(),e?(l.selectionStart=e.start,l.selectionEnd=e.end,this):{start:l.selectionStart,end:l.selectionEnd}},M.val=function(e,t){return pe(e)?(M.inSourceMode()?M.setSourceEditorValue(e):(!1!==t&&"toHtml"in a&&(e=a.toHtml(e)),M.setWysiwygEditorValue(e)),M):M.inSourceMode()?M.getSourceEditorValue(!1):M.getWysiwygEditorValue(t)},M.insert=function(e,t,n,o,r){var i;return M.inSourceMode()?M.sourceEditorInsertText(e,t):(t&&(i=m.selectedHtml(),e+=(!1!==n&&"fragmentToSource"in a?a.fragmentToSource(i,u,h):i)+t),!1!==n&&"fragmentToHtml"in a&&(e=a.fragmentToHtml(e,h)),!1!==n&&!0===r&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),M.wysiwygEditorInsertHtml(e)),M},M.getWysiwygEditorValue=function(e){var t,n=be("div",{},u),o=c.childNodes;for(let e=0;e<o.length;e++)xe(n,o[e].cloneNode(!0));return xe(c,n),st(n),we(n),t=n.innerHTML,!1!==e&&a.hasOwnProperty("toSource")?a.toSource(t,u):t},M.getBody=function(){return c},M.getContentAreaContainer=function(){return i},M.getSourceEditorValue=function(e){var t=l.value;return!1!==e&&"toHtml"in a?a.toHtml(t):t},M.getSourceEditor=function(){return l},M.setWysiwygEditorValue=function(e){c.innerHTML=I(e=e||"<p><br /></p>"),E(),D(),A()},M.setSourceEditorValue=function(e){l.value=e,D()},M.updateOriginal=function(){r.value=M.val()},M.inSourceMode=function(){return Ze(y,"sourceMode")},M.sourceMode=function(e){var t=M.inSourceMode();return"boolean"!=typeof e?t:((t&&!e||!t&&e)&&M.toggleSourceMode(),M)},M.toggleSourceMode=function(){var e=M.inSourceMode();!vt&&e||(e||(m.saveRange(),m.clear()),v=null,M.blur(),e?M.setWysiwygEditorValue(M.getSourceEditorValue()):M.setSourceEditorValue(M.getWysiwygEditorValue()),Qe(l),Qe(i),_e(y,"wysiwygMode",e),_e(y,"sourceMode",!e),re(),S(),void 0!==M.opts.onToggleMode&&M.opts.onToggleMode(M))},ie=function(){return l.focus(),l.value.substring(l.selectionStart,l.selectionEnd)},U=function(e,t){M.inSourceMode()?t.txtExec&&(Array.isArray(t.txtExec)?M.sourceEditorInsertText.apply(M,t.txtExec):t.txtExec.call(M,e,ie())):t.exec&&(Ue(t.exec)?t.exec.call(M,e):M.execCommand(t.exec,t.hasOwnProperty("execParam")?t.execParam:null))},M.execCommand=function(e,t){var n=!1,o=M.commands[e];if(M.focus(),!ye(m.parentNode(),"code")){try{n=u.execCommand(e,!1,t)}catch(e){}!n&&o&&o.errorMessage&&alert(M._(o.errorMessage)),S()}},ae=function(){function e(){if(o.getSelection()&&o.getSelection().rangeCount<=0)v=null;else if(m&&!m.compare(v)){if((v=m.cloneSelected())&&v.collapsed){let e=v.startContainer,t=v.startOffset;for(t&&e.nodeType!==ve&&(e=e.childNodes[t]);e&&e.parentNode!==c;)e=e.parentNode;e&&Le(e,!0)&&(m.saveRange(),Jt(c,u),m.restoreRange())}tt(y,"selectionchanged")}H=!1}H||(H=!0,"onselectionchange"in u?e():setTimeout(e,100))},le=function(){var e,t=m.parentNode();h!==t&&(e=h,h=t,g=m.getFirstBlockParent(t),tt(y,"nodechanged",{oldNode:e,newNode:h})),F&&((t=g.querySelector("span[style]"))&&Ee(t,"style"),F=!1)},M.currentNode=function(){return h},M.currentBlockNode=function(){return g},S=function(){var i,a,l="active",s=u,c=M.sourceMode();if(M.readOnly())he(Te(n,l),function(e,t){Je(t,l)});else{c||(a=m.parentNode(),i=m.getFirstBlockParent(a));for(let r=0;r<R.length;r++){let e=0,t=fe[R[r].name],n=R[r].state,o=c&&!t._sceTxtMode||!c&&!t._sceWysiwygMode;if(pe(n)){if(!c)try{-1<(e=s.queryCommandEnabled(n)?0:-1)&&(e=s.queryCommandState(n)?1:0)}catch(e){}}else o||(e=n.call(M,a,i));_e(t,"disabled",o||e<0),_e(t,l,0<e)}k&&k.update&&k.update(c,a,i)}},J=function(o){if(!o.defaultPrevented&&(M.closeDropDown(),13===o.which)&&(!Ne(g,"li,ul,ol")&&it(g))){let e=be("br",{},u),t=(m.insertNode(e),e.parentNode),n=t.lastChild;n&&n.nodeType===ve&&""===n.nodeValue&&(we(n),n=t.lastChild),!Le(t,!0)&&n===e&&Le(e.previousSibling)&&m.insertHTML("<br>"),o.preventDefault()}},E=function(){ot(c,function(e){return e.nodeType!==ge||/inline/.test(De(e,"display"))||Ne(e,".sceditor-nlf")||!it(e)?!(3===e.nodeType&&!/^\s*$/.test(e.nodeValue)||Ne(e,"br"))&&void 0:((e=be("p",{},u)).className="sceditor-nlf",e.innerHTML="<br />",xe(c,e),!1)})},C=function(){M.val(r.value)},ee=function(){M.closeDropDown()},M._=function(){var n=arguments;return t&&t[n[0]]&&(n[0]=t[n[0]]),n[0].replace(/\{(\d+)\}/g,function(e,t){return void 0!==n[+t+1]?n[+t+1]:`{${t}}`})},ne=function(t){p&&p.call(t.type+"Event",t,M);var e=(t.target===l?"scesrc":"scewys")+t.type;_[e]&&_[e].forEach(function(e){e.call(M,t)})},M.bind=function(e,t,n,o){for(var r,i,a=(e=e.split(" ")).length;a--;)Ue(t)&&(r="scewys"+e[a],i="scesrc"+e[a],n||(_[r]=_[r]||[],_[r].push(t)),o||(_[i]=_[i]||[],_[i].push(t)),"valuechanged"===e[a])&&(D.hasHandler=!0);return M},M.unbind=function(e,t,n,o){for(var r=(e=e.split(" ")).length;r--;)Ue(t)&&(n||Ve(_["scewys"+e[r]]||[],t),o||Ve(_["scesrc"+e[r]]||[],t));return M},M.blur=function(e,t,n){return Ue(e)?M.bind("blur",e,t,n):(M.sourceMode()?l:c).blur(),M},M.focus=function(e,t,n){if(Ue(e))M.bind("focus",e,t,n);else if(M.inSourceMode())l.focus();else{if(Te(u,":focus").length)return;e=m.selectedRange(),v||se(!0),e&&1===e.endOffset&&e.collapsed&&(t=e.endContainer)&&1===t.childNodes.length&&Ne(t.firstChild,"br")&&(e.setStartBefore(t.firstChild),e.collapse(!0),m.selectRange(e)),o.focus(),c.focus()}return S(),M},M.keyDown=function(e,t,n){return M.bind("keydown",e,t,n)},M.keyPress=function(e,t,n){return M.bind("keypress",e,t,n)},M.keyUp=function(e,t,n){return M.bind("keyup",e,t,n)},M.nodeChanged=function(e){return M.bind("nodechanged",e,!1,!0)},M.selectionChanged=function(e){return M.bind("selectionchanged",e,!1,!0)},M.valueChanged=function(e,t,n){return M.bind("valuechanged",e,t,n)},M.css=function(e){return b||(b=be("style",{id:"inline"},u),xe(u.head,b)),pe(e)?(b.styleSheet?b.styleSheet.cssText=e:b.innerHTML=e,M):b.styleSheet?b.styleSheet.cssText:b.innerHTML},Q=function(t){var n=[],o={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},r={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},i=t.which,a={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[i]||String.fromCharCode(i).toLowerCase();if((t.ctrlKey||t.metaKey)&&n.push("ctrl"),t.altKey&&n.push("alt"),t.shiftKey&&(n.push("shift"),r[i]?a=r[i]:o[a]&&(a=o[a])),a&&(i<16||18<i)&&n.push(a),n=n.join("+"),L[n]&&!1===L[n].call(M)&&(t.stopPropagation(),t.preventDefault()),"]"===t.key&&M.inSourceMode()){o=(r=l).selectionStart,i=r.value.slice(0,o),a=r.value.slice(r.selectionEnd,r.value.length);let e;try{e=i.match(/\[([^\]]+)$/)[1].match(/^([a-z1-6]+)/)[1]}catch(t){}-1<["b","i","u","h","code","img","quote","left","center","right","indent","list","color","size","albumimg","attach","youtube","vimeo","instagram","twitter","facebook","googlewidget","spoiler","userlink","googlemaps","hide","group-hide","hide-thanks","hide-reply-thanks","hide-reply","hide-posts","dailymotion","audio","media"].indexOf(e)&&(n=`[/${e}]`,r.value=i+n+a,r.selectionStart=r.selectionEnd=o,r.focus())}},M.addShortcut=function(e,t){return e=e.toLowerCase(),pe(t)?L[e]=function(){return U(fe[t],M.commands[t]),!1}:L[e]=t,M},M.removeShortcut=function(e){return delete L[e.toLowerCase()],M},Z=function(e){var t,n,o;if(F=!0,!O.disableBlockRemove&&8===e.which&&(n=m.selectedRange())&&(t=n.startContainer,0===n.startOffset)&&(o=ce())&&!Ne(o,"body")){for(;t!==o;){for(;t.previousSibling;)if((t=t.previousSibling).nodeType!==ve||t.nodeValue)return;if(!(t=t.parentNode))return}M.clearBlockFormatting(o),e.preventDefault()}},ce=function(){for(var e=g;!it(e)||Le(e,!0);)if(!(e=e.parentNode)||Ne(e,"body"))return;return e},M.clearBlockFormatting=function(e){return(e=e||ce())&&!Ne(e,"body")&&(m.saveRange(),e.className="",Se(e,"style",""),Ne(e,"p,div,td")||at(e,"p"),m.restoreRange()),M},D=function(e){var t,n,o;p&&(p.hasHandler("valuechangedEvent")||D.hasHandler)&&(o=!(n=M.sourceMode())&&m.hasSelection(),e=(d=!1)!==e&&!u.getElementById("sceditor-start-marker"),f&&(clearTimeout(f),f=!1),o&&e&&m.saveRange(),(t=n?l.value:c.innerHTML)!==D.lastVal&&(D.lastVal=t,tt(y,"valuechanged",{rawValue:n?M.val():t})),o)&&e&&m.removeMarkers()},ue=function(){f&&D()},N=function(e){var e=e.which,t=13===(n=N.lastChar)||32===n,n=8===n||46===n;N.lastChar=e,d||(13===e||32===e?t?N.triggerNext=!0:D():8===e||46===e?n?N.triggerNext=!0:D():N.triggerNext&&(D(),N.triggerNext=!1),clearTimeout(f),f=setTimeout(function(){d||D()},1500))},te=function(e){(d=/start/i.test(e.type))||D()},de=function(){M.updateOriginal()},e()}Be.locale={},Be.formats={},Be.icons={},Be.command={get:function(e){return Fe[e]||null},set:function(e,t){return!(!e||!t)&&((t=We(Fe[e]||{},t)).remove=function(){Be.command.remove(e)},Fe[e]=t,this)},remove:function(e){return Fe[e]&&delete Fe[e],this}},window.sceditor={command:Be.command,commands:Fe,defaultOptions:mt,ios:gt,isWysiwygSupported:vt,regexEscape:w,escapeEntities:Oe,escapeUriScheme:function(e){var t,n=window.location;return e&&/^[^\/]*:/i.test(e)&&!y.test(e)?((t=n.pathname.split("/")).pop(),n.protocol+"//"+n.host+t.join("/")+"/"+e):e},dom:{css:De,attr:Se,removeAttr:Ee,is:Ne,closest:ye,width:et,height:Re,traverse:m,rTraverse:ot,parseHTML:rt,hasStyling:it,convertElement:at,blockLevelList:p,canHaveChildren:lt,isInline:Le,copyCSS:function(e,t){t.style&&e.style&&(t.style.cssText=e.style.cssText+t.style.cssText)},fixNesting:st,findCommonAncestor:function(e,t){for(;e=e.parentNode;)if((n=e)!==t&&n.contains&&n.contains(t))return e;var n},getSibling:g,removeWhiteSpace:ct,extractContents:v,getOffset:ut,getStyle:b,hasStyle:function(e,t,n){return!!(e=b(e,t))&&(!n||e===n||Array.isArray(n)&&-1<n.indexOf(e))}},locale:Be.locale,icons:Be.icons,utils:{each:he,isEmptyObject:l,extend:We},plugins:pt.plugins,formats:Be.formats,create:function(e,t){t=t||{},u(e,".sceditor-container")||(t.runWithoutWysiwygSupport||vt)&&new Be(e,t)},instance:function(e){return e._sceditor}}}();